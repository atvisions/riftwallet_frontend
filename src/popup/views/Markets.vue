<template>
  <ResponsiveLayout
    title="Markets"
    :show-header="true"
    :show-footer="true"
    :mode="mode"
    :scrollable="true"
  >
    <!-- è‡ªå®šä¹‰å¤´éƒ¨ -->
    <template #header>
      <TopHeader :mode="mode" />
    </template>

    <!-- ä¸»è¦å†…å®¹ -->
    <div class="markets-content">
      <!-- å¼€å‘ä¸­æç¤º -->
      <div class="coming-soon">
        <i class="ri-line-chart-line"></i>
        <h3>Markets Coming Soon</h3>
        <p>Real-time market data and trading features are under development.</p>
      </div>
    </div>

    <!-- åº•éƒ¨å¯¼èˆª -->
    <template #footer>
      <BottomNavigation />
    </template>
  </ResponsiveLayout>
</template>

<script setup lang="ts">
import ResponsiveLayout from '../components/ResponsiveLayout.vue'
import TopHeader from '../components/TopHeader.vue'
import BottomNavigation from '../components/BottomNavigation.vue'

// æ¥æ”¶ mode å±æ€§
const props = defineProps<{
  mode?: 'popup' | 'sidepanel'
}>()

// è‡ªåŠ¨æ£€æµ‹æ¨¡å¼ï¼šæ£€æŸ¥ URL è·¯å¾„æ¥åˆ¤æ–­æ˜¯å¦åœ¨ä¾§è¾¹æ ç¯å¢ƒä¸­
const isInSidePanel = window.location.href.includes('sidepanel') ||
                     window.location.pathname.includes('sidepanel')
const detectedMode = isInSidePanel ? 'sidepanel' : 'popup'
const mode = props.mode || detectedMode

console.log('ğŸ“Š Markets.vue - Mode Detection:', {
  propsMode: props.mode,
  detectedMode,
  finalMode: mode,
  windowWidth: window.innerWidth,
  windowHeight: window.innerHeight,
  href: window.location.href,
  pathname: window.location.pathname,
  isInSidePanel
})

// å¤´éƒ¨ç›¸å…³æ–¹æ³•å·²ç§»è‡³ TopHeader ç»„ä»¶ä¸­
</script>

<style scoped>
/* å¤´éƒ¨æ ·å¼å·²ç§»è‡³ TopHeader ç»„ä»¶ä¸­ */

.markets-content {
  padding: 12px;
  height: 100%;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
}

.coming-soon {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  flex: 1;
  padding: 40px 20px;
  color: #94a3b8;
  text-align: center;
  min-height: 400px;
}

.coming-soon i {
  font-size: 48px;
  margin-bottom: 16px;
  opacity: 0.5;
}

.coming-soon h3 {
  font-size: 18px;
  margin: 0 0 8px 0;
  color: #f1f5f9;
}

.coming-soon p {
  margin: 0;
  font-size: 14px;
  line-height: 1.5;
}
</style>