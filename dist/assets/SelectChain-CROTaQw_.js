import{u as b}from"./popup-TD7wOOC_.js";import{d as S,f as A,b as r,o as F,k as o,q as s,A as u,F as E,G as I,D as h,I as p,l as a,E as f}from"./main-Bf4zo9mQ.js";import{A as g}from"./index-DcL2QsEm.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chrome-mock-B1Y85l16.js";const P={class:"select-chain-page"},N={class:"content"},x={key:0,class:"chains-container"},L=["onClick"],R={class:"chain-icon"},T=["src","alt"],j={key:1,class:"chain-placeholder"},G={class:"chain-info"},O={class:"chain-selector"},U={key:0,class:"ri-check-line"},V={key:1,class:"loading-container"},$={key:2,class:"error-container"},D={class:"footer"},M=["disabled"],q={key:0},z={key:1},J=S({__name:"SelectChain",setup(H){const v=b(),y=A(),c=r(!1),d=r(!1),i=r(""),m=r([]),l=r(null),k=()=>{v.go(-1)},_=async()=>{try{c.value=!0,i.value="";const e=await(await fetch(`${g.API_BASE_URL}/wallets/get_supported_chains/`)).json();if(e.state==="success")m.value=e.data||[];else throw new Error(e.message||"Failed to load supported chains")}catch(t){i.value=t instanceof Error?t.message:"Failed to load chains",console.error("Failed to load supported chains:",t)}finally{c.value=!1}},C=t=>{l.value=t},w=async()=>{if(l.value)try{d.value=!0;const e=await(await fetch(`${g.API_BASE_URL}/wallets/select_chain/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_id:y.deviceId,chain:l.value.chain})})).json();if(e.state==="success")console.log("Chain selected successfully:",e.data),console.log("Generated mnemonic:",e.data.mnemonic),sessionStorage.setItem("generated_mnemonic",e.data.mnemonic),sessionStorage.setItem("selected_chain",l.value.chain),v.push("/verify-mnemonic");else throw new Error(e.message||"Failed to select chain")}catch(t){i.value=t instanceof Error?t.message:"Failed to select chain",console.error("Failed to select chain:",t)}finally{d.value=!1}};return F(()=>{_()}),(t,e)=>(a(),o("div",P,[s("div",{class:"header"},[s("button",{class:"back-btn",onClick:k},e[0]||(e[0]=[s("i",{class:"ri-arrow-left-line"},null,-1)])),e[1]||(e[1]=s("h1",null,"Select Blockchain",-1)),e[2]||(e[2]=s("div",{class:"placeholder"},null,-1))]),s("div",N,[e[6]||(e[6]=s("div",{class:"description"},[s("p",null,"Choose the blockchain network for your new wallet")],-1)),c.value?u("",!0):(a(),o("div",x,[(a(!0),o(E,null,I(m.value,n=>(a(),o("div",{key:n.chain,class:f(["chain-card",{active:l.value?.chain===n.chain}]),onClick:K=>C(n)},[s("div",R,[n.logo?(a(),o("img",{key:0,src:n.logo,alt:n.name},null,8,T)):(a(),o("div",j,h((n.chain||n.name||"C").charAt(0).toUpperCase()),1))]),s("div",G,[s("h3",null,h(n.name),1),s("p",null,h(n.chain),1)]),s("div",O,[s("div",{class:f(["radio-circle",{selected:l.value?.chain===n.chain}])},[l.value?.chain===n.chain?(a(),o("i",U)):u("",!0)],2)])],10,L))),128))])),c.value?(a(),o("div",V,e[3]||(e[3]=[s("div",{class:"loading-spinner"},null,-1),s("p",null,"Loading supported chains...",-1)]))):u("",!0),i.value?(a(),o("div",$,[e[5]||(e[5]=s("div",{class:"error-icon"},[s("i",{class:"ri-error-warning-line"})],-1)),s("p",null,h(i.value),1),s("button",{class:"retry-btn",onClick:_},e[4]||(e[4]=[s("i",{class:"ri-refresh-line"},null,-1),p(" Retry ")]))])):u("",!0)]),s("div",D,[s("button",{class:"continue-btn",disabled:!l.value||d.value,onClick:w},[d.value?(a(),o("span",q,e[7]||(e[7]=[s("i",{class:"ri-loader-4-line animate-spin"},null,-1),p(" Processing... ")]))):(a(),o("span",z,e[8]||(e[8]=[p(" Continue "),s("i",{class:"ri-arrow-right-line"},null,-1)])))],8,M)])]))}}),ee=B(J,[["__scopeId","data-v-5b4ac9b0"]]);export{ee as default};
