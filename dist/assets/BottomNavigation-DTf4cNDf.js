import{d as W,r as k,c as L,o as j,a as z,e as n,f as o,i as e,g as J,G as r,T as Q,C as h,n as m,H as S,I as A,K as x,y as X,m as O,h as D,b as Z,F as ee}from"./auth-6eK4OsPi.js";import{a as te,u as se,e as le}from"./auth-handler-CmfhYZP0.js";import{C as ae,A as oe}from"./chrome-mock-BbAbqiJG.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ne={class:"wallet-selector"},ie={class:"wallet-info"},re={class:"wallet-avatar-container"},ce=["src","alt"],de={key:1,class:"wallet-avatar-fallback"},ue={class:"wallet-details"},pe={class:"wallet-name-row"},ve={class:"wallet-name"},he={class:"wallet-chain"},me={class:"drawer-header"},_e={class:"drawer-title-bar"},fe={class:"header-actions"},we={class:"filter-container"},ge={key:0,class:"filter-dropdown"},ke={key:0,class:"ri-check-line"},ye=["onClick"],Ce={class:"filter-option-content"},be={class:"filter-option-icon"},Le=["src","alt"],Se={key:1,class:"chain-logo-fallback"},Ae={key:0,class:"ri-check-line"},We={class:"drawer-content"},Ee={class:"wallet-section"},Ne={class:"wallet-grid"},Te={key:0,class:"empty-wallets"},Ie={class:"empty-title"},$e={class:"empty-message"},Fe=["onClick"],Pe={class:"wallet-card-header"},xe={class:"wallet-avatar-container"},De=["src","alt"],Oe={key:1,class:"wallet-avatar-fallback"},Be={class:"wallet-card-info"},Me={class:"wallet-card-name"},He={class:"wallet-card-chain"},Ve=["onClick"],qe={class:"wallet-card-address"},Ge={class:"address-text"},Ke=["onClick","title"],Re={key:0,class:"kadena-info"},Ye=W({__name:"WalletSelector",setup(C){const _=se(),f=te(),p=k(!1),c=k(!1),v=k(null),i=k(!1),a=k("ALL"),d=k([]),b=k(!1),N=L(()=>f.wallets),w=L(()=>f.currentWallet),T=L(()=>a.value==="ALL"?N.value:N.value.filter(s=>s.chain===a.value)),y=s=>ae[s]?.name||s,B=()=>{p.value=!0,X(()=>{setTimeout(()=>{c.value=!0},10)})},g=()=>{c.value=!1,setTimeout(()=>{p.value=!1},300)},M=async()=>{try{b.value=!0;const t=await(await fetch(`${oe.API_BASE_URL}/wallets/get_supported_chains/`)).json();t.state==="success"?d.value=t.data||[]:console.error("Failed to load supported chains:",t.message)}catch(s){console.error("Failed to load supported chains:",s)}finally{b.value=!1}},H=()=>{i.value=!i.value},I=s=>{a.value=s,i.value=!1},V=s=>{f.setCurrentWallet(s),g()},q=s=>s?s.length<=20?s:`${s.slice(0,10)}...${s.slice(-8)}`:"",G=async(s,t)=>{try{await navigator.clipboard.writeText(s),v.value=t,setTimeout(()=>{v.value=null},2e3)}catch(l){console.error("Failed to copy address:",l);try{const u=document.createElement("textarea");u.value=s,document.body.appendChild(u),u.select(),document.execCommand("copy"),document.body.removeChild(u),v.value=t,setTimeout(()=>{v.value=null},2e3)}catch(u){console.error("Fallback copy failed:",u)}}},$=s=>{const t=s.target;t.style.display="none"},K=s=>{const t=s.target;t.style.display="none"},R=s=>{console.log("Manage wallet:",s),_.push(`/wallet/${s.id}`),g()},Y=()=>{_.push("/select-chain"),g()},U=()=>{_.push("/import-wallet"),g()},F=s=>{s.key==="Escape"&&(i.value?i.value=!1:p.value&&g())},P=s=>{const t=s.target;i.value&&!t.closest(".filter-container")&&(i.value=!1)};return j(()=>{document.addEventListener("keydown",F),document.addEventListener("click",P),M()}),z(()=>{document.removeEventListener("keydown",F),document.removeEventListener("click",P)}),(s,t)=>(o(),n("div",ne,[e("div",{class:"current-wallet",onClick:B},[e("div",ie,[e("div",re,[w.value?.avatar?(o(),n("img",{key:0,src:w.value.avatar,alt:w.value.name,class:"wallet-avatar",onError:$},null,40,ce)):(o(),n("div",de,t[1]||(t[1]=[e("i",{class:"ri-wallet-3-line"},null,-1)])))]),e("div",ue,[e("div",pe,[e("span",ve,r(w.value?.name||"No Wallet"),1),t[2]||(t[2]=e("i",{class:"ri-arrow-down-s-line dropdown-icon"},null,-1))]),e("span",he,r(w.value?y(w.value.chain):""),1)])])]),(o(),J(Q,{to:"body"},[p.value?(o(),n("div",{key:0,class:m(["wallet-drawer-backdrop",{show:c.value}]),onClick:g},null,2)):h("",!0),p.value?(o(),n("div",{key:1,class:m(["wallet-drawer",{show:c.value}])},[e("div",me,[t[7]||(t[7]=e("div",{class:"drawer-handle"},null,-1)),e("div",_e,[t[6]||(t[6]=e("h3",{class:"drawer-title"},"Select Wallet",-1)),e("div",fe,[e("div",we,[e("button",{class:m(["filter-btn",{active:i.value}]),onClick:H},t[3]||(t[3]=[e("i",{class:"ri-filter-3-line"},null,-1)]),2),i.value?(o(),n("div",ge,[e("div",{class:m(["filter-option",{selected:a.value==="ALL"}]),onClick:t[0]||(t[0]=l=>I("ALL"))},[t[4]||(t[4]=e("div",{class:"filter-option-content"},[e("div",{class:"filter-option-icon"},[e("i",{class:"ri-global-line"})]),e("span",null,"All Networks")],-1)),a.value==="ALL"?(o(),n("i",ke)):h("",!0)],2),(o(!0),n(S,null,A(d.value,l=>(o(),n("div",{key:l.chain,class:m(["filter-option",{selected:a.value===l.chain}]),onClick:u=>I(l.chain)},[e("div",Ce,[e("div",be,[l.logo?(o(),n("img",{key:0,src:l.logo,alt:l.name,class:"chain-logo",onError:K},null,40,Le)):(o(),n("div",Se,r(l.name.charAt(0)),1))]),e("span",null,r(l.name),1)]),a.value===l.chain?(o(),n("i",Ae)):h("",!0)],10,ye))),128))])):h("",!0)]),e("button",{class:"drawer-close-btn",onClick:g},t[5]||(t[5]=[e("i",{class:"ri-close-line"},null,-1)]))])])]),e("div",We,[e("div",Ee,[e("div",Ne,[T.value.length===0?(o(),n("div",Te,[t[8]||(t[8]=e("div",{class:"empty-icon"},[e("i",{class:"ri-wallet-3-line"})],-1)),e("div",Ie,r(a.value==="ALL"?"No Wallets Yet":`No ${y(a.value)} Wallets`),1),e("div",$e,r(a.value==="ALL"?"Create your first wallet to get started":`Create a ${y(a.value)} wallet to get started`),1)])):h("",!0),(o(!0),n(S,null,A(T.value,l=>(o(),n("div",{key:l.id,class:m(["wallet-card",{selected:w.value?.id===l.id}]),onClick:u=>V(l)},[e("div",Pe,[e("div",xe,[l.avatar?(o(),n("img",{key:0,src:l.avatar,alt:l.name,class:"wallet-avatar",onError:$},null,40,De)):(o(),n("div",Oe,t[9]||(t[9]=[e("i",{class:"ri-wallet-3-line"},null,-1)])))]),e("div",Be,[e("div",Me,r(l.name),1),e("div",He,r(y(l.chain)),1)]),e("button",{class:"wallet-card-menu",onClick:x(u=>R(l),["stop"])},t[10]||(t[10]=[e("i",{class:"ri-more-2-line"},null,-1)]),8,Ve)]),e("div",qe,[e("span",Ge,r(q(l.address)),1),e("button",{class:"copy-btn",onClick:x(u=>G(l.address,String(l.id)),["stop"]),title:v.value===String(l.id)?"Copied!":"Copy Address"},[e("i",{class:m(v.value===String(l.id)?"ri-check-line":"ri-file-copy-line")},null,2)],8,Ke)]),l.chain==="KDA"&&l.kadena_chain_id!==null?(o(),n("div",Re," Chain ID: "+r(l.kadena_chain_id),1)):h("",!0)],10,Fe))),128))])])]),e("div",{class:"drawer-actions"},[e("button",{class:"action-button create-wallet",onClick:Y},t[11]||(t[11]=[e("i",{class:"ri-add-line"},null,-1),e("span",null,"Create New Wallet",-1)])),e("button",{class:"action-button import-wallet",onClick:U},t[12]||(t[12]=[e("i",{class:"ri-download-line"},null,-1),e("span",null,"Import Wallet",-1)]))])],2)):h("",!0)]))]))}}),Ue=E(Ye,[["__scopeId","data-v-cba502ab"]]),je={class:"top-header"},ze={class:"header-left"},Je={class:"header-right"},Qe=W({__name:"TopHeader",props:{pageType:{}},setup(C){const _=C,f=window.location.href.includes("sidepanel")||window.location.pathname.includes("sidepanel"),p=_.pageType||"other",c=()=>{console.log("Opening search...")},v=async()=>{if(console.log("Opening side panel from popup..."),typeof chrome<"u"&&chrome.sidePanel)try{const a=await chrome.windows.getCurrent();a.id&&(await chrome.sidePanel.open({windowId:a.id}),window.location.href.includes("popup")&&window.close())}catch(a){console.error("Failed to open side panel:",a)}},i=async()=>{if(console.log("Closing side panel..."),p==="home"){if(console.log("ðŸ”„ Close side panel clicked! (Phantom-style)"),typeof chrome<"u"&&chrome.runtime)try{if(console.log("ðŸ“± Sending close side panel request..."),(await chrome.runtime.sendMessage({type:"CLOSE_SIDEPANEL_PHANTOM_STYLE"}))?.success){if(console.log("âœ… Side panel close request successful"),window.location.pathname.includes("sidepanel")){console.log("ðŸ“± In side panel, attempting to close...");try{window.close(),console.log("âœ… Window close called")}catch{console.log("âš ï¸ Could not close window, trying navigation...")}}}else console.log("âŒ Side panel close request failed")}catch(a){console.error("âŒ Failed to send close side panel message:",a)}}else if(typeof chrome<"u"&&chrome.runtime)try{await chrome.runtime.sendMessage({type:"CLOSE_SIDEPANEL_PHANTOM_STYLE"})}catch(a){console.error("Failed to close side panel:",a)}};return(a,d)=>(o(),n("div",je,[e("div",ze,[O(Ue)]),e("div",Je,[e("button",{onClick:c,class:"header-btn",title:"Search"},d[0]||(d[0]=[e("i",{class:"ri-search-line"},null,-1)])),D(f)?h("",!0):(o(),n("button",{key:0,onClick:v,class:"header-btn side-panel-open",title:"Open in Side Panel"},d[1]||(d[1]=[e("i",{class:"ri-fullscreen-line"},null,-1)]))),D(f)?(o(),n("button",{key:1,onClick:i,class:"header-btn side-panel-close",title:"Close Side Panel"},d[2]||(d[2]=[e("i",{class:"ri-fullscreen-exit-line"},null,-1)]))):h("",!0)])]))}}),at=E(Qe,[["__scopeId","data-v-4f0f166e"]]),Xe={class:"bottom-nav"},Ze=W({__name:"BottomNavigation",setup(C){const _=le(),f=[{name:"home",path:"/",icon:"ri-home-line",label:"Home"},{name:"markets",path:"/markets",icon:"ri-line-chart-line",label:"Markets"},{name:"trade",path:"/trade",icon:"ri-exchange-line",label:"Trade"},{name:"discover",path:"/discover",icon:"ri-compass-line",label:"Discover"},{name:"wallet",path:"/settings",icon:"ri-settings-line",label:"Wallet"}],p=c=>c==="/"?_.path==="/":_.path.startsWith(c);return(c,v)=>{const i=Z("router-link");return o(),n("nav",Xe,[(o(),n(S,null,A(f,a=>O(i,{key:a.name,to:a.path,class:m(["nav-item",{active:p(a.path)}])},{default:ee(()=>[e("i",{class:m(a.icon)},null,2),e("span",null,r(a.label),1)]),_:2},1032,["to","class"])),64))])}}}),ot=E(Ze,[["__scopeId","data-v-8584de75"]]);export{ot as B,at as T};
