import{d as V,f as z,b as o,c as p,k as r,q as s,D as v,u as D,H as B,A as g,y as k,M as C,E as d,N as $,I as x,l}from"./main-Bf4zo9mQ.js";import{_ as F,u as R}from"./popup-TD7wOOC_.js";import{A as T}from"./index-DcL2QsEm.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chrome-mock-B1Y85l16.js";const W={class:"setup-password-page"},Z={class:"header-section"},q={class:"app-name"},G={class:"form-section"},H={class:"input-group"},K={class:"input-wrapper"},O=["type"],Y={key:0,class:"error-message"},j={class:"input-group"},J={class:"input-wrapper"},L=["type"],Q={key:0,class:"error-message"},X={key:0,class:"password-strength"},ss={class:"strength-bar"},es=["disabled"],ts={key:0,class:"loading-spinner"},as={key:1},os={key:1,class:"error-message global-error"},rs=V({__name:"SetupPassword",setup(ls){const A=R(),y=z(),a=o(""),n=o(""),w=o(!1),f=o(!1),i=o(""),u=o(""),m=o(!1),h=o(""),_=p(()=>{const t=a.value;let e=0;return t.length>=8&&(e+=1),t.length>=12&&(e+=1),/[a-z]/.test(t)&&(e+=1),/[A-Z]/.test(t)&&(e+=1),/[0-9]/.test(t)&&(e+=1),/[^A-Za-z0-9]/.test(t)&&(e+=1),e}),P=p(()=>{const t=_.value;return t<=2?"weak":t<=4?"medium":"strong"}),E=p(()=>{const t=_.value;return`${Math.min(t*16.67,100)}%`}),M=p(()=>{const t=_.value;return t<=2?"Weak":t<=4?"Medium":"Strong"}),b=p(()=>a.value.length>=8&&a.value===n.value&&!i.value&&!u.value),N=()=>{i.value="",a.value.length>0&&a.value.length<8&&(i.value="Password must be at least 8 characters long"),n.value&&S()},S=()=>{u.value="",n.value&&n.value!==a.value&&(u.value="Passwords do not match")},I=async()=>{if(b.value)try{m.value=!0,h.value="",await y.setPaymentPassword(a.value),await y.setPasswordSession(),A.push("/wallet-choice")}catch(t){h.value=t instanceof Error?t.message:"Failed to set password"}finally{m.value=!1}};return(t,e)=>(l(),r("div",W,[s("div",Z,[e[4]||(e[4]=s("div",{class:"logo-container"},[s("img",{src:F,alt:"Riftwallet",class:"logo"})],-1)),s("h1",q,v(D(T).NAME),1),e[5]||(e[5]=s("p",{class:"welcome-text"},"Create a secure password to protect your wallet",-1))]),s("div",G,[s("form",{onSubmit:B(I,["prevent"]),class:"password-form"},[s("div",H,[e[6]||(e[6]=s("label",{for:"password"},"Password",-1)),s("div",K,[k(s("input",{id:"password","onUpdate:modelValue":e[0]||(e[0]=c=>a.value=c),type:w.value?"text":"password",placeholder:"Enter your password (min 8 characters)",class:d(["password-input",{error:i.value}]),onInput:N},null,42,O),[[C,a.value]]),s("button",{type:"button",onClick:e[1]||(e[1]=c=>w.value=!w.value),class:"toggle-password"},[s("i",{class:d(w.value?"ri-eye-off-line":"ri-eye-line")},null,2)])]),i.value?(l(),r("div",Y,v(i.value),1)):g("",!0)]),s("div",j,[e[7]||(e[7]=s("label",{for:"confirmPassword"},"Confirm Password",-1)),s("div",J,[k(s("input",{id:"confirmPassword","onUpdate:modelValue":e[2]||(e[2]=c=>n.value=c),type:f.value?"text":"password",placeholder:"Confirm your password",class:d(["password-input",{error:u.value}]),onInput:S},null,42,L),[[C,n.value]]),s("button",{type:"button",onClick:e[3]||(e[3]=c=>f.value=!f.value),class:"toggle-password"},[s("i",{class:d(f.value?"ri-eye-off-line":"ri-eye-line")},null,2)])]),u.value?(l(),r("div",Q,v(u.value),1)):g("",!0)]),a.value?(l(),r("div",X,[s("div",ss,[s("div",{class:d(["strength-fill",P.value]),style:$({width:E.value})},null,6)]),s("div",{class:d(["strength-text",P.value])},v(M.value),3)])):g("",!0),s("button",{type:"submit",disabled:!b.value||m.value,class:"submit-btn"},[m.value?(l(),r("div",ts)):(l(),r("span",as,"Create Password"))],8,es),h.value?(l(),r("div",os,v(h.value),1)):g("",!0)],32)]),e[8]||(e[8]=s("div",{class:"footer-info"},[s("p",null,[s("i",{class:"ri-shield-check-line"}),x(" Password protects all transactions")]),s("p",{class:"critical-warning"},[s("i",{class:"ri-alert-line"}),x(" Your password cannot be reset. Keep it safe!")])],-1))]))}}),ps=U(rs,[["__scopeId","data-v-cde9366d"]]);export{ps as default};
