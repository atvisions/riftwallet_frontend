import{d as D,r as o,q as A,f as W,E as $,e as l,h as e,c as n,B as g,I as x,H as S,G as i,z as b,D as L,F as m,A as N,L as V,J as H}from"./auth-B5jpq_BM.js";import{a as T,u as F}from"./preload-helper-BHn8pG3Y.js";import{P as O}from"./PageContainer-Qetv8PV3.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chrome-mock-BLIE_U1K.js";import"./index-DSub5CB9.js";const M={class:"form-container"},U={class:"form-group"},J={class:"chain-selector"},q=["onClick"],G=["src","alt"],R={class:"chain-name"},Z={class:"chain-code"},j={class:"form-group"},Q={class:"form-hint"},X={class:"private-key-input-container"},Y=["type"],ee={key:0,class:"error-message"},te={key:0,class:"form-group"},ae=["value"],se={class:"form-group"},oe={class:"password-input-container"},le=["type"],re={key:0,class:"error-message"},ne=["disabled"],ie={key:0,class:"ri-loader-4-line spinning"},ue={key:1,class:"ri-key-line"},de={key:1,class:"error-alert"},ce=D({__name:"ImportPrivateKey",setup(pe){const C=F(),h=T(),r=o("ETH"),d=o(""),c=o(""),_=o("0"),y=o(!1),w=o(!1),p=o(!1),f=o(""),u=o(""),v=o(""),E=[{code:"ETH",name:"Ethereum",logo:"https://www.riftwallet.io/media/chain_logos/ETH.png"},{code:"BSC",name:"BNB Chain",logo:"https://www.riftwallet.io/media/chain_logos/BSC.png"},{code:"BASE",name:"Base",logo:"https://www.riftwallet.io/media/chain_logos/BASE.png"},{code:"SOL",name:"Solana",logo:"https://www.riftwallet.io/media/chain_logos/SOL.png"},{code:"KDA",name:"Kadena",logo:"https://www.riftwallet.io/media/chain_logos/KDA.png"}],B=A(()=>d.value.trim()&&c.value.trim()&&r.value),K=()=>{const s=d.value.trim().replace(/^0x/,"");if(r.value==="SOL"){if(!/^[1-9A-HJ-NP-Za-km-z]{87,88}$/.test(s)&&!/^[a-fA-F0-9]{64}$/.test(s))return u.value="Solana private key must be Base58 encoded (87-88 characters) or 64-character hexadecimal string",!1}else if(!/^[a-fA-F0-9]{64}$/.test(s))return u.value="Private key must be a 64-character hexadecimal string",!1;return u.value="",!0},P=()=>c.value.length<8?(v.value="Password must be at least 8 characters",!1):(v.value="",!0),I=async()=>{if(!(!K()||!P()))try{p.value=!0,f.value="";const s={private_key:d.value.trim().replace(/^0x/,""),chain:r.value,payment_password:c.value,kadena_chain_id:r.value==="KDA"?_.value:"0"},t=await h.importWallet(s);await h.loadWallets();const a=h.wallets.find(k=>k.address===t.address&&k.chain===t.chain);a&&(h.setCurrentWallet(a),console.log("Wallet import completed, redirecting to home")),C.push("/")}catch(s){f.value=s instanceof Error?s.message:"Import failed, please check if the private key is correct"}finally{p.value=!1}};return(s,t)=>(l(),W(O,{title:"Import Private Key","show-header":!0,"show-footer":!0,"show-back-button":!0,"custom-back-action":()=>s.$router.go(-1),"max-width":"420px",padding:"24px",centered:!0},{default:$(()=>[e("div",M,[e("div",U,[t[5]||(t[5]=e("label",null,"Select Blockchain Network",-1)),e("div",J,[(l(),n(S,null,x(E,a=>e("div",{key:a.code,class:m(["chain-option",{active:r.value===a.code}]),onClick:k=>r.value=a.code},[e("img",{src:a.logo,alt:a.name,class:"chain-logo"},null,8,G),e("span",R,i(a.name),1),e("span",Z,i(a.code),1)],10,q)),64))])]),e("div",j,[t[6]||(t[6]=e("label",null,"Private Key",-1)),e("p",Q,i(r.value==="SOL"?"Enter your private key (Base58 encoded or 64-character hexadecimal string)":"Enter your private key (64-character hexadecimal string)"),1),e("div",X,[b(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=a=>d.value=a),type:y.value?"text":"password",class:m(["private-key-input",{error:u.value}]),placeholder:"Enter your private key...",rows:"3"},null,10,Y),[[L,d.value]]),e("button",{type:"button",class:"private-key-toggle",onClick:t[1]||(t[1]=a=>y.value=!y.value)},[e("i",{class:m(y.value?"ri-eye-off-line":"ri-eye-line")},null,2)])]),u.value?(l(),n("div",ee,i(u.value),1)):g("",!0)]),r.value==="KDA"?(l(),n("div",te,[t[7]||(t[7]=e("label",null,"Kadena Chain ID",-1)),t[8]||(t[8]=e("p",{class:"form-hint"},"Select Kadena Chain ID (0-19)",-1)),b(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>_.value=a),class:"chain-id-select"},[(l(),n(S,null,x(20,a=>e("option",{key:a-1,value:(a-1).toString()},"Chain "+i(a-1),9,ae)),64))],512),[[N,_.value]])])):g("",!0),e("div",se,[t[9]||(t[9]=e("label",null,"Payment Password",-1)),t[10]||(t[10]=e("p",{class:"form-hint"},"Enter your payment password to protect the wallet",-1)),e("div",oe,[b(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>c.value=a),type:w.value?"text":"password",class:m(["password-input",{error:v.value}]),placeholder:"Enter payment password"},null,10,le),[[V,c.value]]),e("button",{type:"button",class:"password-toggle",onClick:t[4]||(t[4]=a=>w.value=!w.value)},[e("i",{class:m(w.value?"ri-eye-off-line":"ri-eye-line")},null,2)])]),v.value?(l(),n("div",re,i(v.value),1)):g("",!0)]),e("button",{class:"import-btn",disabled:!B.value||p.value,onClick:I},[p.value?(l(),n("i",ie)):(l(),n("i",ue)),H(" "+i(p.value?"Importing...":"Import Wallet"),1)],8,ne),f.value?(l(),n("div",de,[t[11]||(t[11]=e("i",{class:"ri-error-warning-line"},null,-1)),e("span",null,i(f.value),1)])):g("",!0)])]),_:1},8,["custom-back-action"]))}}),ge=z(ce,[["__scopeId","data-v-ade359b0"]]);export{ge as default};
