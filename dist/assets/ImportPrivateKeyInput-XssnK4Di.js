import{d as S,r as l,q as D,o as E,f as L,E as I,e as o,h as a,c as n,B as m,G as i,z as w,D as B,F as f,A,H as N,I as V,L as F,J as M}from"./auth-B5jpq_BM.js";import{a as $,u as J}from"./preload-helper-BHn8pG3Y.js";import{P as O}from"./PageContainer-Qetv8PV3.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chrome-mock-BLIE_U1K.js";import"./index-DSub5CB9.js";const z={class:"form-content"},W={key:0,class:"selected-chain"},q={class:"chain-display"},H=["src","alt"],R={key:1,class:"chain-placeholder"},T={class:"chain-details"},G={class:"form-group"},Z={class:"form-hint"},j={class:"private-key-input-container"},Q={key:0,class:"error-message"},X={key:1,class:"form-group"},Y=["value"],ee={class:"form-group"},ae={class:"password-input-container"},te=["type"],se={key:0,class:"error-message"},re={key:0,class:"error-alert"},oe={class:"bottom-section"},le=["disabled"],ne={key:0,class:"ri-loader-4-line spinning"},ie={key:1,class:"ri-key-line"},ce=S({__name:"ImportPrivateKeyInput",setup(ue){const h=J();$();const t=l(null),d=l(""),p=l(""),k=l("0"),g=l(!1),y=l(!1),_=l(!1),c=l(""),u=l(""),v=l(""),b=D(()=>d.value.trim()&&p.value.trim()&&t.value),C=()=>{h.go(-1)},P=()=>{const s=d.value.trim().replace(/^0x/,"");if(t.value?.chain==="SOL"){if(!/^[1-9A-HJ-NP-Za-km-z]{87,88}$/.test(s)&&!/^[a-fA-F0-9]{64}$/.test(s))return u.value="Solana private key must be Base58 encoded (87-88 characters) or 64-character hexadecimal string",!1}else if(!/^[a-fA-F0-9]{64}$/.test(s))return u.value="Private key must be a 64-character hexadecimal string",!1;return u.value="",!0},x=()=>p.value.length<8?(v.value="Password must be at least 8 characters",!1):(v.value="",!0),K=async()=>{if(!(!P()||!x()))try{c.value="";const s={private_key:d.value.trim().replace(/^0x/,""),chain:t.value.chain,payment_password:p.value,kadena_chain_id:t.value.chain==="KDA"?k.value:"0"};console.log("Starting wallet import with data:",s),console.log("Redirecting to loading page for wallet import and balance refresh"),await h.push({name:"WalletImportLoading",query:{importData:JSON.stringify(s)}})}catch(s){const e=s instanceof Error?s.message:"Import failed";e.toLowerCase().includes("password")?c.value="Incorrect password. Please check your payment password.":e.toLowerCase().includes("invalid")&&e.toLowerCase().includes("private key")?c.value="Invalid private key. Please check your private key format.":e.toLowerCase().includes("private key")?c.value="Invalid private key. Please check if the private key is correct.":c.value=e,console.error("Import private key error:",s)}};return E(()=>{const s=sessionStorage.getItem("import_selected_chain");if(s)try{t.value=JSON.parse(s)}catch(e){console.error("Failed to parse selected chain:",e),h.push("/import-private-key-select-chain")}else h.push("/import-private-key-select-chain")}),(s,e)=>(o(),L(O,{title:"Import Private Key","show-header":!0,"show-footer":!0,"show-back-button":!0,"custom-back-action":C,"max-width":"420px",padding:"24px",centered:!0},{footer:I(()=>[a("div",oe,[a("button",{class:"import-btn",disabled:!b.value||_.value,onClick:K},[_.value?(o(),n("i",ne)):(o(),n("i",ie)),M(" "+i(_.value?"Importing...":"Import Wallet"),1)],8,le)])]),default:I(()=>[a("div",z,[t.value?(o(),n("div",W,[a("div",q,[t.value.logo?(o(),n("img",{key:0,src:t.value.logo,alt:t.value.name,class:"chain-logo"},null,8,H)):(o(),n("div",R,i(t.value.chain.charAt(0).toUpperCase()),1)),a("div",T,[a("h3",null,i(t.value.name),1),a("p",null,i(t.value.chain),1)])])])):m("",!0),a("div",G,[e[5]||(e[5]=a("label",null,"Private Key",-1)),a("p",Z,i(t.value?.chain==="SOL"?"Enter your private key (Base58 encoded or 64-character hexadecimal string)":"Enter your private key (64-character hexadecimal string)"),1),a("div",j,[w(a("textarea",{"onUpdate:modelValue":e[0]||(e[0]=r=>d.value=r),class:f(["private-key-input",{error:u.value}]),placeholder:"Enter your private key...",rows:"3"},null,2),[[B,d.value]]),a("button",{type:"button",class:"private-key-toggle",onClick:e[1]||(e[1]=r=>g.value=!g.value)},[a("i",{class:f(g.value?"ri-eye-off-line":"ri-eye-line")},null,2)])]),u.value?(o(),n("div",Q,i(u.value),1)):m("",!0)]),t.value?.chain==="KDA"?(o(),n("div",X,[e[6]||(e[6]=a("label",null,"Kadena Chain ID",-1)),e[7]||(e[7]=a("p",{class:"form-hint"},"Select Kadena Chain ID (0-19)",-1)),w(a("select",{"onUpdate:modelValue":e[2]||(e[2]=r=>k.value=r),class:"chain-id-select"},[(o(),n(N,null,V(20,r=>a("option",{key:r-1,value:(r-1).toString()},"Chain "+i(r-1),9,Y)),64))],512),[[A,k.value]])])):m("",!0),a("div",ee,[e[8]||(e[8]=a("label",null,"Payment Password",-1)),e[9]||(e[9]=a("p",{class:"form-hint"},"Enter your payment password to protect the wallet",-1)),a("div",ae,[w(a("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>p.value=r),type:y.value?"text":"password",class:f(["password-input",{error:v.value}]),placeholder:"Enter payment password"},null,10,te),[[F,p.value]]),a("button",{type:"button",class:"password-toggle",onClick:e[4]||(e[4]=r=>y.value=!y.value)},[a("i",{class:f(y.value?"ri-eye-off-line":"ri-eye-line")},null,2)])]),v.value?(o(),n("div",se,i(v.value),1)):m("",!0)])]),c.value?(o(),n("div",re,[e[10]||(e[10]=a("i",{class:"ri-error-warning-line"},null,-1)),a("span",null,i(c.value),1)])):m("",!0)]),_:1}))}}),fe=U(ce,[["__scopeId","data-v-93f11f51"]]);export{fe as default};
