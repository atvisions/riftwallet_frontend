import{d as S,r as l,c as D,o as E,g as L,F as w,f as o,i as a,e as i,C as m,G as n,A as I,E as B,n as f,B as A,H as N,I as V,N as F,L as M}from"./auth-CcrM1kjR.js";import{a as $,u as O}from"./preload-helper-BrVD15Cz.js";import{R}from"./ResponsiveLayout-DQ7b-BNd.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chrome-mock-BLIE_U1K.js";import"./index-DSub5CB9.js";const J={class:"import-key-content"},W={class:"form-content"},z={key:0,class:"selected-chain"},H={class:"chain-display"},T=["src","alt"],q={key:1,class:"chain-placeholder"},G={class:"chain-details"},Z={class:"form-group"},j={class:"form-hint"},Q={class:"private-key-input-container"},X={key:0,class:"error-message"},Y={key:1,class:"form-group"},ee=["value"],ae={class:"form-group"},te={class:"password-input-container"},se=["type"],re={key:0,class:"error-message"},oe={key:2,class:"error-alert"},le={class:"bottom-section"},ie=["disabled"],ne={key:0,class:"ri-loader-4-line spinning"},ce={key:1,class:"ri-key-line"},ue=S({__name:"ImportPrivateKeyInput",setup(de){const y=O();$();const t=l(null),d=l(""),v=l(""),k=l("0"),g=l(!1),h=l(!1),_=l(!1),c=l(""),u=l(""),p=l(""),C=D(()=>d.value.trim()&&v.value.trim()&&t.value),b=()=>{y.go(-1)},P=()=>{const s=d.value.trim().replace(/^0x/,"");if(t.value?.chain==="SOL"){if(!/^[1-9A-HJ-NP-Za-km-z]{87,88}$/.test(s)&&!/^[a-fA-F0-9]{64}$/.test(s))return u.value="Solana private key must be Base58 encoded (87-88 characters) or 64-character hexadecimal string",!1}else if(!/^[a-fA-F0-9]{64}$/.test(s))return u.value="Private key must be a 64-character hexadecimal string",!1;return u.value="",!0},x=()=>v.value.length<8?(p.value="Password must be at least 8 characters",!1):(p.value="",!0),K=async()=>{if(!(!P()||!x()))try{c.value="";const s={private_key:d.value.trim().replace(/^0x/,""),chain:t.value.chain,payment_password:v.value,kadena_chain_id:t.value.chain==="KDA"?k.value:"0"};console.log("Starting wallet import with data:",s),console.log("Redirecting to loading page for wallet import and balance refresh"),await y.push({name:"WalletImportLoading",query:{importData:JSON.stringify(s)}})}catch(s){const e=s instanceof Error?s.message:"Import failed";e.toLowerCase().includes("password")?c.value="Incorrect password. Please check your payment password.":e.toLowerCase().includes("invalid")&&e.toLowerCase().includes("private key")?c.value="Invalid private key. Please check your private key format.":e.toLowerCase().includes("private key")?c.value="Invalid private key. Please check if the private key is correct.":c.value=e,console.error("Import private key error:",s)}};return E(()=>{const s=sessionStorage.getItem("import_selected_chain");if(s)try{t.value=JSON.parse(s)}catch(e){console.error("Failed to parse selected chain:",e),y.push("/import-private-key-select-chain")}else y.push("/import-private-key-select-chain")}),(s,e)=>(o(),L(R,{title:"Import Private Key","show-header":!0,"show-footer":!0,scrollable:!0,onBack:b},{header:w(()=>[a("div",{class:"import-key-header"},[a("div",{class:"header-left"},[a("button",{onClick:b,class:"back-button"},e[5]||(e[5]=[a("i",{class:"ri-arrow-left-line"},null,-1)])),e[6]||(e[6]=a("h1",{class:"header-title"},"Import Private Key",-1))])])]),footer:w(()=>[a("div",le,[a("button",{class:"import-btn",disabled:!C.value||_.value,onClick:K},[_.value?(o(),i("i",ne)):(o(),i("i",ce)),M(" "+n(_.value?"Importing...":"Import Wallet"),1)],8,ie)])]),default:w(()=>[a("div",J,[a("div",W,[t.value?(o(),i("div",z,[a("div",H,[t.value.logo?(o(),i("img",{key:0,src:t.value.logo,alt:t.value.name,class:"chain-logo"},null,8,T)):(o(),i("div",q,n(t.value.chain.charAt(0).toUpperCase()),1)),a("div",G,[a("h3",null,n(t.value.name),1),a("p",null,n(t.value.chain),1)])])])):m("",!0),a("div",Z,[e[7]||(e[7]=a("label",null,"Private Key",-1)),a("p",j,n(t.value?.chain==="SOL"?"Enter your private key (Base58 encoded or 64-character hexadecimal string)":"Enter your private key (64-character hexadecimal string)"),1),a("div",Q,[I(a("textarea",{"onUpdate:modelValue":e[0]||(e[0]=r=>d.value=r),class:f(["private-key-input",{error:u.value}]),placeholder:"Enter your private key...",rows:"3"},null,2),[[B,d.value]]),a("button",{type:"button",class:"private-key-toggle",onClick:e[1]||(e[1]=r=>g.value=!g.value)},[a("i",{class:f(g.value?"ri-eye-off-line":"ri-eye-line")},null,2)])]),u.value?(o(),i("div",X,n(u.value),1)):m("",!0)]),t.value?.chain==="KDA"?(o(),i("div",Y,[e[8]||(e[8]=a("label",null,"Kadena Chain ID",-1)),e[9]||(e[9]=a("p",{class:"form-hint"},"Select Kadena Chain ID (0-19)",-1)),I(a("select",{"onUpdate:modelValue":e[2]||(e[2]=r=>k.value=r),class:"chain-id-select"},[(o(),i(N,null,V(20,r=>a("option",{key:r-1,value:(r-1).toString()},"Chain "+n(r-1),9,ee)),64))],512),[[A,k.value]])])):m("",!0),a("div",ae,[e[10]||(e[10]=a("label",null,"Payment Password",-1)),e[11]||(e[11]=a("p",{class:"form-hint"},"Enter your payment password to protect the wallet",-1)),a("div",te,[I(a("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>v.value=r),type:h.value?"text":"password",class:f(["password-input",{error:p.value}]),placeholder:"Enter payment password"},null,10,se),[[F,v.value]]),a("button",{type:"button",class:"password-toggle",onClick:e[4]||(e[4]=r=>h.value=!h.value)},[a("i",{class:f(h.value?"ri-eye-off-line":"ri-eye-line")},null,2)])]),p.value?(o(),i("div",re,n(p.value),1)):m("",!0)]),c.value?(o(),i("div",oe,[e[12]||(e[12]=a("i",{class:"ri-error-warning-line"},null,-1)),a("span",null,n(c.value),1)])):m("",!0)])])]),_:1}))}}),ke=U(ue,[["__scopeId","data-v-6e76e056"]]);export{ke as default};
