import{d as I,u as V,v as o,p,c as r,g as s,E as v,f as B,N as D,B as h,z as k,M as C,G as d,O as F,F as x,b as l}from"./auth-tCBxrB_D.js";import{_ as $}from"./icon128-CuYnzOPO.js";import{u as G}from"./preload-helper-IGrWFsVS.js";import{A as O}from"./index-CpkLCnFh.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chrome-mock-BOlt1wEj.js";const T={class:"setup-password-page"},U={class:"header-section"},W={class:"app-name"},Z={class:"form-section"},K={class:"input-group"},j={class:"input-wrapper"},q=["type"],H={key:0,class:"error-message"},J={class:"input-group"},L={class:"input-wrapper"},Q=["type"],X={key:0,class:"error-message"},Y={key:0,class:"password-strength"},ss={class:"strength-bar"},es=["disabled"],ts={key:0,class:"loading-spinner"},as={key:1},os={key:1,class:"error-message global-error"},rs=I({__name:"SetupPassword",setup(ls){const E=G(),y=V(),a=o(""),n=o(""),f=o(!1),w=o(!1),i=o(""),u=o(""),m=o(!1),g=o(""),_=p(()=>{const t=a.value;let e=0;return t.length>=8&&(e+=1),t.length>=12&&(e+=1),/[a-z]/.test(t)&&(e+=1),/[A-Z]/.test(t)&&(e+=1),/[0-9]/.test(t)&&(e+=1),/[^A-Za-z0-9]/.test(t)&&(e+=1),e}),P=p(()=>{const t=_.value;return t<=2?"weak":t<=4?"medium":"strong"}),A=p(()=>{const t=_.value;return`${Math.min(t*16.67,100)}%`}),M=p(()=>{const t=_.value;return t<=2?"Weak":t<=4?"Medium":"Strong"}),b=p(()=>a.value.length>=8&&a.value===n.value&&!i.value&&!u.value),N=()=>{i.value="",a.value.length>0&&a.value.length<8&&(i.value="Password must be at least 8 characters long"),n.value&&S()},S=()=>{u.value="",n.value&&n.value!==a.value&&(u.value="Passwords do not match")},z=async()=>{if(b.value)try{m.value=!0,g.value="",await y.setPaymentPassword(a.value),await y.setPasswordSession(),E.push("/wallet-choice")}catch(t){g.value=t instanceof Error?t.message:"Failed to set password"}finally{m.value=!1}};return(t,e)=>(l(),r("div",T,[s("div",U,[e[4]||(e[4]=s("div",{class:"logo-container"},[s("img",{src:$,alt:"Riftwallet",class:"logo"})],-1)),s("h1",W,v(B(O).NAME),1),e[5]||(e[5]=s("p",{class:"welcome-text"},"Create a secure password to protect your wallet",-1))]),s("div",Z,[s("form",{onSubmit:D(z,["prevent"]),class:"password-form"},[s("div",K,[e[6]||(e[6]=s("label",{for:"password"},"Password",-1)),s("div",j,[k(s("input",{id:"password","onUpdate:modelValue":e[0]||(e[0]=c=>a.value=c),type:f.value?"text":"password",placeholder:"Enter your password (min 8 characters)",class:d(["password-input",{error:i.value}]),onInput:N},null,42,q),[[C,a.value]]),s("button",{type:"button",onClick:e[1]||(e[1]=c=>f.value=!f.value),class:"toggle-password"},[s("i",{class:d(f.value?"ri-eye-off-line":"ri-eye-line")},null,2)])]),i.value?(l(),r("div",H,v(i.value),1)):h("",!0)]),s("div",J,[e[7]||(e[7]=s("label",{for:"confirmPassword"},"Confirm Password",-1)),s("div",L,[k(s("input",{id:"confirmPassword","onUpdate:modelValue":e[2]||(e[2]=c=>n.value=c),type:w.value?"text":"password",placeholder:"Confirm your password",class:d(["password-input",{error:u.value}]),onInput:S},null,42,Q),[[C,n.value]]),s("button",{type:"button",onClick:e[3]||(e[3]=c=>w.value=!w.value),class:"toggle-password"},[s("i",{class:d(w.value?"ri-eye-off-line":"ri-eye-line")},null,2)])]),u.value?(l(),r("div",X,v(u.value),1)):h("",!0)]),a.value?(l(),r("div",Y,[s("div",ss,[s("div",{class:d(["strength-fill",P.value]),style:F({width:A.value})},null,6)]),s("div",{class:d(["strength-text",P.value])},v(M.value),3)])):h("",!0),s("button",{type:"submit",disabled:!b.value||m.value,class:"submit-btn"},[m.value?(l(),r("div",ts)):(l(),r("span",as,"Create Password"))],8,es),g.value?(l(),r("div",os,v(g.value),1)):h("",!0)],32)]),e[8]||(e[8]=s("div",{class:"footer-info"},[s("p",null,[s("i",{class:"ri-shield-check-line"}),x(" Password protects all transactions")]),s("p",{class:"critical-warning"},[s("i",{class:"ri-alert-line"}),x(" If you forget your password, it cannot be recovered. Keep it safe!")])],-1))]))}}),vs=R(rs,[["__scopeId","data-v-2ed67853"]]);export{vs as default};
