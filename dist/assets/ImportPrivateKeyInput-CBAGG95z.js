import{d as S,r as l,c as D,o as E,g as L,F as w,f as o,i as a,e as n,C as m,G as i,A as I,E as B,n as f,B as A,H as N,I as V,N as F,L as M}from"./auth-4sWye4Dp.js";import{a as $,u as O}from"./preload-helper-YfDtpjzA.js";import{R}from"./ResponsiveLayout-DfHFJK1P.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chrome-mock-DxZfNgLw.js";const J={class:"form-content"},W={key:0,class:"selected-chain"},z={class:"chain-display"},H=["src","alt"],T={key:1,class:"chain-placeholder"},q={class:"chain-details"},G={class:"form-group"},Z={class:"form-hint"},j={class:"private-key-input-container"},Q={key:0,class:"error-message"},X={key:1,class:"form-group"},Y=["value"],ee={class:"form-group"},ae={class:"password-input-container"},te=["type"],se={key:0,class:"error-message"},re={key:2,class:"error-alert"},oe={class:"bottom-section"},le=["disabled"],ne={key:0,class:"ri-loader-4-line spinning"},ie={key:1,class:"ri-key-line"},ue=S({__name:"ImportPrivateKeyInput",setup(ce){const y=O();$();const t=l(null),d=l(""),v=l(""),k=l("0"),g=l(!1),h=l(!1),_=l(!1),u=l(""),c=l(""),p=l(""),C=D(()=>d.value.trim()&&v.value.trim()&&t.value),b=()=>{y.go(-1)},P=()=>{const s=d.value.trim().replace(/^0x/,"");if(t.value?.chain==="SOL"){if(!/^[1-9A-HJ-NP-Za-km-z]{87,88}$/.test(s)&&!/^[a-fA-F0-9]{64}$/.test(s))return c.value="Solana private key must be Base58 encoded (87-88 characters) or 64-character hexadecimal string",!1}else if(!/^[a-fA-F0-9]{64}$/.test(s))return c.value="Private key must be a 64-character hexadecimal string",!1;return c.value="",!0},x=()=>v.value.length<8?(p.value="Password must be at least 8 characters",!1):(p.value="",!0),K=async()=>{if(!(!P()||!x()))try{u.value="";const s={private_key:d.value.trim().replace(/^0x/,""),chain:t.value.chain,payment_password:v.value,kadena_chain_id:t.value.chain==="KDA"?k.value:"0"};console.log("Starting wallet import with data:",s),console.log("Redirecting to loading page for wallet import and balance refresh"),await y.push({name:"WalletImportLoading",query:{importData:JSON.stringify(s)}})}catch(s){const e=s instanceof Error?s.message:"Import failed";e.toLowerCase().includes("password")?u.value="Incorrect password. Please check your payment password.":e.toLowerCase().includes("invalid")&&e.toLowerCase().includes("private key")?u.value="Invalid private key. Please check your private key format.":e.toLowerCase().includes("private key")?u.value="Invalid private key. Please check if the private key is correct.":u.value=e,console.error("Import private key error:",s)}};return E(()=>{const s=sessionStorage.getItem("import_selected_chain");if(s)try{t.value=JSON.parse(s)}catch(e){console.error("Failed to parse selected chain:",e),y.push("/select-chain?mode=import-private-key")}else y.push("/select-chain?mode=import-private-key")}),(s,e)=>(o(),L(R,{title:"Import Private Key","show-header":!0,"show-footer":!0,scrollable:!0,padding:"16px",onBack:b},{header:w(()=>[a("div",{class:"page-header"},[a("div",{class:"header-left"},[a("button",{onClick:b,class:"back-button"},e[5]||(e[5]=[a("i",{class:"ri-arrow-left-line"},null,-1)])),e[6]||(e[6]=a("h1",{class:"header-title"},"Import Private Key",-1))])])]),footer:w(()=>[a("div",oe,[a("button",{class:"import-btn",disabled:!C.value||_.value,onClick:K},[_.value?(o(),n("i",ne)):(o(),n("i",ie)),M(" "+i(_.value?"Importing...":"Import Wallet"),1)],8,le)])]),default:w(()=>[a("div",J,[t.value?(o(),n("div",W,[a("div",z,[t.value.logo?(o(),n("img",{key:0,src:t.value.logo,alt:t.value.name,class:"chain-logo"},null,8,H)):(o(),n("div",T,i(t.value.chain.charAt(0).toUpperCase()),1)),a("div",q,[a("h3",null,i(t.value.name),1),a("p",null,i(t.value.chain),1)])])])):m("",!0),a("div",G,[e[7]||(e[7]=a("label",null,"Private Key",-1)),a("p",Z,i(t.value?.chain==="SOL"?"Enter your private key (Base58 encoded or 64-character hexadecimal string)":"Enter your private key (64-character hexadecimal string)"),1),a("div",j,[I(a("textarea",{"onUpdate:modelValue":e[0]||(e[0]=r=>d.value=r),class:f(["private-key-input",{error:c.value}]),placeholder:"Enter your private key...",rows:"3"},null,2),[[B,d.value]]),a("button",{type:"button",class:"private-key-toggle",onClick:e[1]||(e[1]=r=>g.value=!g.value)},[a("i",{class:f(g.value?"ri-eye-off-line":"ri-eye-line")},null,2)])]),c.value?(o(),n("div",Q,i(c.value),1)):m("",!0)]),t.value?.chain==="KDA"?(o(),n("div",X,[e[8]||(e[8]=a("label",null,"Kadena Chain ID",-1)),e[9]||(e[9]=a("p",{class:"form-hint"},"Select Kadena Chain ID (0-19)",-1)),I(a("select",{"onUpdate:modelValue":e[2]||(e[2]=r=>k.value=r),class:"chain-id-select"},[(o(),n(N,null,V(20,r=>a("option",{key:r-1,value:(r-1).toString()},"Chain "+i(r-1),9,Y)),64))],512),[[A,k.value]])])):m("",!0),a("div",ee,[e[10]||(e[10]=a("label",null,"Payment Password",-1)),e[11]||(e[11]=a("p",{class:"form-hint"},"Enter your payment password to protect the wallet",-1)),a("div",ae,[I(a("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>v.value=r),type:h.value?"text":"password",class:f(["password-input",{error:p.value}]),placeholder:"Enter payment password"},null,10,te),[[F,v.value]]),a("button",{type:"button",class:"password-toggle",onClick:e[4]||(e[4]=r=>h.value=!h.value)},[a("i",{class:f(h.value?"ri-eye-off-line":"ri-eye-line")},null,2)])]),p.value?(o(),n("div",se,i(p.value),1)):m("",!0)]),u.value?(o(),n("div",re,[e[12]||(e[12]=a("i",{class:"ri-error-warning-line"},null,-1)),a("span",null,i(u.value),1)])):m("",!0)])]),_:1}))}}),he=U(ue,[["__scopeId","data-v-863d73c0"]]);export{he as default};
