import{d as g,u as m,r as c,o as y,e as u,i as e,G as p,h as P,K as _,C as S,A as V,M as b,n as v,f as w,y as A}from"./auth-BwimyXkQ.js";import{a as I,u as k,_ as C}from"./preload-helper-D1eRigLN.js";import{A as R}from"./chrome-mock-0jeXDaAI.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";const x={class:"verify-password-page"},E={class:"header-section"},M={class:"app-name"},N={class:"form-section"},z={class:"input-group"},B={class:"input-wrapper"},D=["type"],q={key:0,class:"error-message"},G=["disabled"],H={key:0,class:"loading-spinner"},T={key:1},F=g({__name:"VerifyPassword",setup(K){console.log("ðŸ” VerifyPassword.vue - é¡µé¢å¼€å§‹åŠ è½½"),console.log("ðŸŒ å½“å‰çŽ¯å¢ƒä¿¡æ¯:",{href:window.location.href,pathname:window.location.pathname,hash:window.location.hash,windowSize:{width:window.innerWidth,height:window.innerHeight}}),console.log("ðŸ” VerifyPassword.vue - ç»„ä»¶å¼€å§‹åŠ è½½"),console.log("ðŸŒ å½“å‰çŽ¯å¢ƒä¿¡æ¯:",{href:window.location.href,pathname:window.location.pathname,windowSize:{width:window.innerWidth,height:window.innerHeight}});const n=k(),s=m(),i=I(),t=c(""),r=c(!1),d=c(!1),l=c(""),f=async()=>{if(console.log("ðŸ” å¼€å§‹å¯†ç éªŒè¯æµç¨‹"),console.log("ðŸ“ è¾“å…¥çš„å¯†ç é•¿åº¦:",t.value.length),!t.value){console.log("âŒ å¯†ç ä¸ºç©ºï¼Œåœæ­¢éªŒè¯");return}try{d.value=!0,l.value="",console.log("ðŸ”„ è°ƒç”¨ authStore.verifyPaymentPassword"),console.log("ðŸª å½“å‰ authStore çŠ¶æ€:",{isAuthenticated:s.isAuthenticated,deviceId:s.deviceId,hasPaymentPassword:s.hasPaymentPassword,isPasswordSessionValid:s.isPasswordSessionValid});const a=await s.verifyPaymentPassword(t.value);console.log("âœ… å¯†ç éªŒè¯ç»“æžœ:",a),a?(console.log("ðŸŽ‰ å¯†ç éªŒè¯æˆåŠŸï¼Œæ£€æŸ¥é’±åŒ…çŠ¶æ€"),console.log("ðŸ” éªŒè¯åŽçš„ authStore çŠ¶æ€:",{isAuthenticated:s.isAuthenticated,deviceId:s.deviceId,hasPaymentPassword:s.hasPaymentPassword,isPasswordSessionValid:s.isPasswordSessionValid}),await A(),await new Promise(o=>setTimeout(o,50)),console.log("ðŸ“± å¼€å§‹åŠ è½½é’±åŒ…åˆ—è¡¨"),await i.loadWallets(),console.log("ðŸ“Š é’±åŒ…åŠ è½½å®Œæˆï¼Œé’±åŒ…æ•°é‡:",i.wallets.length),i.wallets.length>0?(console.log("ðŸ  æœ‰é’±åŒ…ï¼Œä»Žå¯†ç éªŒè¯é¡µé¢è·³è½¬åˆ°é¦–é¡µ"),await n.replace("/"),console.log("âœ… è·¯ç”±è·³è½¬å®Œæˆ")):(console.log("ðŸ’¼ æ²¡æœ‰é’±åŒ…ï¼Œä»Žå¯†ç éªŒè¯é¡µé¢è·³è½¬åˆ°é’±åŒ…é€‰æ‹©é¡µé¢"),await n.replace("/wallet-choice"),console.log("âœ… è·¯ç”±è·³è½¬å®Œæˆ"))):(console.log("âŒ å¯†ç éªŒè¯å¤±è´¥"),l.value="Invalid password. Please try again.")}catch(a){console.error("ðŸ’¥ å¯†ç éªŒè¯è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯:",a),l.value=a instanceof Error?a.message:"Verification failed"}finally{d.value=!1,console.log("ï¿½ï¿½ å¯†ç éªŒè¯æµç¨‹ç»“æŸ")}};return y(()=>{console.log("ðŸ” VerifyPassword.vue - é¡µé¢æŒ‚è½½å®Œæˆ"),console.log("ðŸª æŒ‚è½½æ—¶çš„ authStore çŠ¶æ€:",{isAuthenticated:s.isAuthenticated,deviceId:s.deviceId,hasPaymentPassword:s.hasPaymentPassword,isPasswordSessionValid:s.isPasswordSessionValid}),console.log("ðŸ“± æŒ‚è½½æ—¶çš„ walletStore çŠ¶æ€:",{walletsCount:i.wallets.length,currentWallet:i.currentWallet}),console.log("ðŸŒ æŒ‚è½½æ—¶çš„è·¯ç”±ä¿¡æ¯:",{currentRoute:n.currentRoute.value.path,query:n.currentRoute.value.query,params:n.currentRoute.value.params})}),(a,o)=>(w(),u("div",x,[e("div",E,[o[2]||(o[2]=e("div",{class:"logo-container"},[e("img",{src:C,alt:"Riftwallet",class:"logo"})],-1)),e("h1",M,p(P(R).NAME),1),o[3]||(o[3]=e("p",{class:"form-description"}," Enter your password to access your wallet ",-1))]),e("div",N,[e("form",{onSubmit:_(f,["prevent"]),class:"password-form"},[e("div",z,[o[4]||(o[4]=e("label",{for:"password"},"Password",-1)),e("div",B,[V(e("input",{id:"password","onUpdate:modelValue":o[0]||(o[0]=h=>t.value=h),type:r.value?"text":"password",placeholder:"Enter your password",class:v(["password-input",{error:l.value}]),autofocus:""},null,10,D),[[b,t.value]]),e("button",{type:"button",onClick:o[1]||(o[1]=h=>r.value=!r.value),class:"toggle-password"},[e("i",{class:v(r.value?"ri-eye-off-line":"ri-eye-line")},null,2)])]),l.value?(w(),u("div",q,p(l.value),1)):S("",!0)]),e("button",{type:"submit",disabled:!t.value||d.value,class:"submit-btn"},[d.value?(w(),u("div",H)):(w(),u("span",T,"Verify Password"))],8,G)],32)])]))}}),J=W(F,[["__scopeId","data-v-a24702b0"]]);export{J as default};
