const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomeSidePanel-JCiLoeQP.js","assets/preload-helper-DTCqTb4O.js","assets/auth-DA2mZ09H.js","assets/chrome-mock-BbAbqiJG.js","assets/auth-Bt6g8DFh.css","assets/ResponsiveLayout-By-qHHPy.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/ResponsiveLayout-DY9OWmIU.css","assets/BottomNavigation-N1rRGhga.js","assets/BottomNavigation-BwEQ4zmz.css","assets/HomeSidePanel-DyH-Bi2H.css","assets/WalletDetail-KWrKK4nf.js","assets/PageHeader-bQKhRC2E.js","assets/PageHeader-Deg_r7Vb.css","assets/WalletDetail-DEI2oHnH.css","assets/RenameWallet-BjOmuQhI.js","assets/RenameWallet-CVATTyue.css","assets/ShowPrivateKey-C4KGeTOT.js","assets/ShowPrivateKey-Ca_JlDQT.css","assets/DeleteWallet-BQwdO1Wu.js","assets/DeleteWallet-0FvFlpt1.css","assets/Send-CsOVK_Hp.js","assets/Send-CMRKXDDv.css","assets/Receive-C16mGDxe.js","assets/Receive-CvPgX43_.css","assets/Swap-DGWU2a13.js","assets/Swap-CIx_PKQ1.css","assets/History-BUfnyw2-.js","assets/History-jaAZL-0t.css","assets/Markets-CG3Sgv_c.js","assets/Markets-B6QsmIcU.css","assets/Trade-D8QacAW4.js","assets/Trade-C0OKoTpO.css","assets/Discover-BiD1_wy7.js","assets/Discover-Bbctwgag.css","assets/Settings-BOL-enqy.js","assets/Settings-D34isWgt.css","assets/ImportWallet-Cwj0T3B6.js","assets/ImportWallet-CVwQZSdQ.css","assets/ImportMnemonic-CMZmlPK-.js","assets/ImportMnemonic-Bc8gpMBp.css","assets/ImportMnemonicInput-BW26dcH1.js","assets/ImportMnemonicInput-8nheoQ4y.css","assets/ImportPrivateKey-CXLQvdXx.js","assets/ImportPrivateKey-Ch17VNqg.css","assets/ImportPrivateKeyInput-Dg-2kgPB.js","assets/ImportPrivateKeyInput-q7zaiOuA.css","assets/WalletImportLoading-woDlvC0s.js","assets/WalletImportLoading-TKZgXiZf.css","assets/SetupPassword-Ctv_Az4y.js","assets/SetupPassword-Yy2yLFDT.css","assets/VerifyPassword-B_XyGmb5.js","assets/VerifyPassword-2SkTThJa.css","assets/WalletChoice-zZuZt4Nc.js","assets/WalletChoice-BJFYGSQy.css","assets/SelectChain-Dqkqa7OR.js","assets/SelectChain-D_17XEXg.css","assets/VerifyMnemonic-BXqcnH4G.js","assets/VerifyMnemonic-BclRmCH6.css","assets/ConfirmMnemonic-vJrBFPKZ.js","assets/ConfirmMnemonic-Dx_RPTFn.css","assets/CreateWalletPassword-DF1Y_qKC.js","assets/CreateWalletPassword-Bwgjh9gE.css"])))=>i.map(i=>d[i]);
import{u as d,d as E,r as _,c as P,o as I,w as V,a as R,b as S,e as g,f as w,g as A,h as k,i as c,n as D,j as L,k as T,l as O}from"./auth-DA2mZ09H.js";import{u as f,a as C,_ as W,b as e,c as z,d as M}from"./preload-helper-DTCqTb4O.js";/* empty css             */import"./chrome-mock-BbAbqiJG.js";let r=null;function b(){r&&clearInterval(r),r=setInterval(async()=>{const n=d();await n.checkPasswordSession(),n.hasPaymentPassword&&!n.isPasswordSessionValid&&(console.log("Session expired during periodic check, redirecting to verify password"),await n.clearPasswordSession(),f().push("/verify-password"))},5*60*1e3),console.log("Session check started")}function H(){r&&(clearInterval(r),r=null,console.log("Session check stopped"))}async function x(){await d().setPasswordSession(),console.log("Session refreshed")}function B(){const n=["mousedown","mousemove","keypress","scroll","touchstart"];let i=Date.now();const p=async()=>{const t=Date.now();t-i>5*60*1e3&&d().isPasswordSessionValid&&await x(),i=t};n.forEach(t=>{document.addEventListener(t,p,!0)}),console.log("Activity-based session refresh enabled")}const K={key:0,class:"loading-screen"},N=E({__name:"App",setup(n){const i=f(),p=C(),t=d(),a=_(!1);_(!1);const l=_("popup"),u=()=>{const o=window.location.href.includes("sidepanel")||window.location.pathname.includes("sidepanel")||window.innerWidth>500&&window.innerHeight>700;l.value=o?"sidepanel":"popup",console.log("ðŸ” Global Mode detected:",l.value,{href:window.location.href,pathname:window.location.pathname,width:window.innerWidth,height:window.innerHeight})},y=P(()=>{const o={"layout-popup":l.value==="popup","layout-sidepanel":l.value==="sidepanel"};return console.log("ðŸŽ¯ Global App - layoutClasses:",{currentMode:l.value,classes:o,windowWidth:window.innerWidth,windowHeight:window.innerHeight}),o});return I(async()=>{try{if(console.log("ðŸŽ¯ Initializing global layout mode detection"),u(),window.addEventListener("resize",u),a.value){console.log("App already initialized, skipping");return}await t.initialize(),console.log("Auth state:",{needsPasswordSetup:t.needsPasswordSetup,hasPaymentPassword:t.hasPaymentPassword,canAccessWallet:t.canAccessWallet,isPasswordSessionValid:t.isPasswordSessionValid,currentRoute:i.currentRoute.value.path});const o=i.currentRoute.value.path;o==="/"||o==="/popup.html"?(console.log("Executing routing logic for path:",o),t.hasPaymentPassword?t.isPasswordSessionValid?(console.log("Password set and session valid, checking wallet status"),await p.loadWallets(),p.wallets.length>0?console.log("Has wallets, staying on home page"):(console.log("No wallets found, redirecting to wallet choice"),await i.replace("/wallet-choice"))):(console.log("Password set but session expired, redirecting to verify password"),await i.replace("/verify-password")):(console.log("No password set, redirecting to setup password"),await i.replace("/setup-password"))):console.log("Skipping routing logic for non-root path:",o),t.hasPaymentPassword&&(b(),B()),await i.isReady(),a.value=!0,console.log("App initialization completed")}catch(o){console.error("Failed to initialize app:",o),a.value=!0}}),V(()=>i.currentRoute.value.path,async(o,s)=>{if(console.log("Route changed from",s,"to",o),[s==="/verify-password"&&o==="/",s==="/wallet-choice"&&o==="/",["/select-chain","/verify-mnemonic","/confirm-mnemonic","/create-wallet-password"].includes(s)&&o==="/",["/import-wallet","/import-mnemonic","/import-private-key","/import-private-key-input","/import-mnemonic-input","/wallet-import-loading"].includes(s)&&o==="/",s==="/setup-password"&&o==="/"].some(v=>v)){console.log("Skipping route logic - coming from authentication/wallet setup flow");return}if(o==="/"&&a.value){if(sessionStorage.getItem("isVerifyingPassword")==="true"){console.log("Already verifying password, skipping duplicate check");return}setTimeout(async()=>{if(sessionStorage.getItem("isVerifyingPassword")==="true"){console.log("Password verification in progress, skipping");return}await t.checkPasswordSession(),t.hasPaymentPassword&&!t.isPasswordSessionValid&&(console.log("Session expired after delay check, redirecting to verify password"),sessionStorage.setItem("isVerifyingPassword","true"),i.push("/verify-password"))},300)}}),R(()=>{H(),window.removeEventListener("resize",u)}),(o,s)=>{const h=S("router-view");return w(),g("div",{id:"app",class:D(["wallet-app",y.value])},[k(t).loading||!a.value?(w(),g("div",K,s[0]||(s[0]=[c("div",{class:"loading-content"},[c("img",{src:W,alt:"Riftwallet",class:"loading-logo"}),c("div",{class:"loading-spinner"}),c("p",null,"Initializing Riftwallet...")],-1)]))):(w(),A(h,{key:1}))],2)}}}),G=[{path:"/",name:"Home",component:()=>e(()=>import("./HomeSidePanel-JCiLoeQP.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))},{path:"/wallet/:id",name:"WalletDetail",component:()=>e(()=>import("./WalletDetail-KWrKK4nf.js"),__vite__mapDeps([11,2,3,4,1,12,6,13,14]))},{path:"/wallet/:id/rename",name:"RenameWallet",component:()=>e(()=>import("./RenameWallet-BjOmuQhI.js"),__vite__mapDeps([15,2,3,4,1,12,6,13,16]))},{path:"/wallet/:id/private-key",name:"ShowPrivateKey",component:()=>e(()=>import("./ShowPrivateKey-C4KGeTOT.js"),__vite__mapDeps([17,2,3,4,1,12,6,13,18]))},{path:"/wallet/:id/delete",name:"DeleteWallet",component:()=>e(()=>import("./DeleteWallet-BQwdO1Wu.js"),__vite__mapDeps([19,2,3,4,1,12,6,13,20]))},{path:"/send",name:"Send",component:()=>e(()=>import("./Send-CsOVK_Hp.js"),__vite__mapDeps([21,2,3,4,1,12,6,13,22]))},{path:"/receive",name:"Receive",component:()=>e(()=>import("./Receive-C16mGDxe.js"),__vite__mapDeps([23,1,2,3,4,5,6,7,24]))},{path:"/swap",name:"Swap",component:()=>e(()=>import("./Swap-DGWU2a13.js"),__vite__mapDeps([25,5,2,3,4,6,7,26]))},{path:"/history",name:"History",component:()=>e(()=>import("./History-BUfnyw2-.js"),__vite__mapDeps([27,1,2,3,4,5,6,7,28]))},{path:"/markets",name:"Markets",component:()=>e(()=>import("./Markets-CG3Sgv_c.js"),__vite__mapDeps([29,5,2,3,4,6,7,8,1,9,30]))},{path:"/trade",name:"Trade",component:()=>e(()=>import("./Trade-D8QacAW4.js"),__vite__mapDeps([31,5,2,3,4,6,7,8,1,9,32]))},{path:"/discover",name:"Discover",component:()=>e(()=>import("./Discover-BiD1_wy7.js"),__vite__mapDeps([33,5,2,3,4,6,7,8,1,9,34]))},{path:"/settings",name:"Settings",component:()=>e(()=>import("./Settings-BOL-enqy.js"),__vite__mapDeps([35,2,3,4,1,5,6,7,8,9,36]))},{path:"/import-wallet",name:"ImportWallet",component:()=>e(()=>import("./ImportWallet-Cwj0T3B6.js"),__vite__mapDeps([37,1,2,3,4,5,6,7,38]))},{path:"/import-mnemonic",name:"ImportMnemonic",component:()=>e(()=>import("./ImportMnemonic-CMZmlPK-.js"),__vite__mapDeps([39,2,3,4,1,5,6,7,40]))},{path:"/import-mnemonic-input",name:"ImportMnemonicInput",component:()=>e(()=>import("./ImportMnemonicInput-BW26dcH1.js"),__vite__mapDeps([41,2,3,4,1,5,6,7,42]))},{path:"/import-private-key",name:"ImportPrivateKey",component:()=>e(()=>import("./ImportPrivateKey-CXLQvdXx.js"),__vite__mapDeps([43,2,3,4,1,5,6,7,44]))},{path:"/import-private-key-input",name:"ImportPrivateKeyInput",component:()=>e(()=>import("./ImportPrivateKeyInput-Dg-2kgPB.js"),__vite__mapDeps([45,2,3,4,1,5,6,7,46]))},{path:"/wallet-import-loading",name:"WalletImportLoading",component:()=>e(()=>import("./WalletImportLoading-woDlvC0s.js"),__vite__mapDeps([47,1,2,3,4,6,48]))},{path:"/setup-password",name:"SetupPassword",component:()=>e(()=>import("./SetupPassword-Ctv_Az4y.js"),__vite__mapDeps([49,2,3,4,1,6,50]))},{path:"/verify-password",name:"VerifyPassword",component:()=>e(()=>import("./VerifyPassword-B_XyGmb5.js"),__vite__mapDeps([51,2,3,4,1,6,52]))},{path:"/wallet-choice",name:"WalletChoice",component:()=>e(()=>import("./WalletChoice-zZuZt4Nc.js"),__vite__mapDeps([53,1,2,3,4,6,54]))},{path:"/select-chain",name:"SelectChain",component:()=>e(()=>import("./SelectChain-Dqkqa7OR.js"),__vite__mapDeps([55,1,2,3,4,5,6,7,56]))},{path:"/verify-mnemonic",name:"VerifyMnemonic",component:()=>e(()=>import("./VerifyMnemonic-BXqcnH4G.js"),__vite__mapDeps([57,1,2,3,4,5,6,7,58]))},{path:"/confirm-mnemonic",name:"ConfirmMnemonic",component:()=>e(()=>import("./ConfirmMnemonic-vJrBFPKZ.js"),__vite__mapDeps([59,2,3,4,1,5,6,7,60]))},{path:"/create-wallet-password",name:"CreateWalletPassword",component:()=>e(()=>import("./CreateWalletPassword-DF1Y_qKC.js"),__vite__mapDeps([61,2,3,4,1,5,6,7,62]))}],j=z({history:M(),routes:G}),m=L(N);m.use(T());m.use(j);m.use(O);m.mount("#app");
