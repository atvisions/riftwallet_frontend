import{d as K,v as l,p as S,o as D,e as E,L,b as o,g as a,c as n,B as m,E as i,z as w,G as f,D as B,I as A,J as M,A as N,M as V,F}from"./auth-tCBxrB_D.js";import{a as $,u as J}from"./preload-helper-IGrWFsVS.js";import{R as O}from"./ResponsiveLayout-BQBtD7HK.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chrome-mock-BOlt1wEj.js";import"./index-CpkLCnFh.js";const U={class:"import-private-key-container"},z={class:"form-content"},W={key:0,class:"selected-chain"},T={class:"chain-display"},q=["src","alt"],G={key:1,class:"chain-placeholder"},H={class:"chain-details"},Z={class:"form-group"},j={class:"form-hint"},Q={class:"private-key-input-container"},X={key:0,class:"error-message"},Y={key:1,class:"form-group"},ee=["value"],ae={class:"form-group"},te={class:"password-input-container"},se=["type"],re={key:0,class:"error-message"},oe={key:0,class:"error-alert"},le={class:"bottom-section"},ne=["disabled"],ie={key:0,class:"ri-loader-4-line spinning"},ce={key:1,class:"ri-key-line"},ue=K({__name:"ImportPrivateKeyInput",setup(de){const y=J();$();const t=l(null),d=l(""),v=l(""),k=l("0"),_=l(!1),h=l(!1),g=l(!1),c=l(""),u=l(""),p=l(""),b=S(()=>d.value.trim()&&v.value.trim()&&t.value),I=()=>{y.go(-1)},C=()=>{const s=d.value.trim().replace(/^0x/,"");if(t.value?.chain==="SOL"){if(!/^[1-9A-HJ-NP-Za-km-z]{87,88}$/.test(s)&&!/^[a-fA-F0-9]{64}$/.test(s))return u.value="Solana private key must be Base58 encoded (87-88 characters) or 64-character hexadecimal string",!1}else if(!/^[a-fA-F0-9]{64}$/.test(s))return u.value="Private key must be a 64-character hexadecimal string",!1;return u.value="",!0},P=()=>v.value.length<8?(p.value="Password must be at least 8 characters",!1):(p.value="",!0),x=async()=>{if(!(!C()||!P()))try{c.value="";const s={private_key:d.value.trim().replace(/^0x/,""),chain:t.value.chain,payment_password:v.value,kadena_chain_id:t.value.chain==="KDA"?k.value:"0"};console.log("Starting wallet import with data:",s),console.log("Redirecting to loading page for wallet import and balance refresh"),await y.push({name:"WalletImportLoading",query:{importData:JSON.stringify(s)}})}catch(s){const e=s instanceof Error?s.message:"Import failed";e.toLowerCase().includes("password")?c.value="Incorrect password. Please check your payment password.":e.toLowerCase().includes("invalid")&&e.toLowerCase().includes("private key")?c.value="Invalid private key. Please check your private key format.":e.toLowerCase().includes("private key")?c.value="Invalid private key. Please check if the private key is correct.":c.value=e,console.error("Import private key error:",s)}};return D(()=>{const s=sessionStorage.getItem("import_selected_chain");if(s)try{t.value=JSON.parse(s)}catch(e){console.error("Failed to parse selected chain:",e),y.push("/import-private-key-select-chain")}else y.push("/import-private-key-select-chain")}),(s,e)=>(o(),E(O,{title:"Import Private Key","show-header":!0,"show-footer":!1,"show-back-button":!0,scrollable:!0,padding:"0",onBack:I},{default:L(()=>[a("div",U,[a("div",z,[t.value?(o(),n("div",W,[a("div",T,[t.value.logo?(o(),n("img",{key:0,src:t.value.logo,alt:t.value.name,class:"chain-logo"},null,8,q)):(o(),n("div",G,i(t.value.chain.charAt(0).toUpperCase()),1)),a("div",H,[a("h3",null,i(t.value.name),1),a("p",null,i(t.value.chain),1)])])])):m("",!0),a("div",Z,[e[5]||(e[5]=a("label",null,"Private Key",-1)),a("p",j,i(t.value?.chain==="SOL"?"Enter your private key (Base58 encoded or 64-character hexadecimal string)":"Enter your private key (64-character hexadecimal string)"),1),a("div",Q,[w(a("textarea",{"onUpdate:modelValue":e[0]||(e[0]=r=>d.value=r),class:f(["private-key-input",{error:u.value}]),placeholder:"Enter your private key...",rows:"3"},null,2),[[B,d.value]]),a("button",{type:"button",class:"private-key-toggle",onClick:e[1]||(e[1]=r=>_.value=!_.value)},[a("i",{class:f(_.value?"ri-eye-off-line":"ri-eye-line")},null,2)])]),u.value?(o(),n("div",X,i(u.value),1)):m("",!0)]),t.value?.chain==="KDA"?(o(),n("div",Y,[e[6]||(e[6]=a("label",null,"Kadena Chain ID",-1)),e[7]||(e[7]=a("p",{class:"form-hint"},"Select Kadena Chain ID (0-19)",-1)),w(a("select",{"onUpdate:modelValue":e[2]||(e[2]=r=>k.value=r),class:"chain-id-select"},[(o(),n(A,null,M(20,r=>a("option",{key:r-1,value:(r-1).toString()},"Chain "+i(r-1),9,ee)),64))],512),[[N,k.value]])])):m("",!0),a("div",ae,[e[8]||(e[8]=a("label",null,"Payment Password",-1)),e[9]||(e[9]=a("p",{class:"form-hint"},"Enter your payment password to protect the wallet",-1)),a("div",te,[w(a("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>v.value=r),type:h.value?"text":"password",class:f(["password-input",{error:p.value}]),placeholder:"Enter payment password"},null,10,se),[[V,v.value]]),a("button",{type:"button",class:"password-toggle",onClick:e[4]||(e[4]=r=>h.value=!h.value)},[a("i",{class:f(h.value?"ri-eye-off-line":"ri-eye-line")},null,2)])]),p.value?(o(),n("div",re,i(p.value),1)):m("",!0)])]),c.value?(o(),n("div",oe,[e[10]||(e[10]=a("i",{class:"ri-error-warning-line"},null,-1)),a("span",null,i(c.value),1)])):m("",!0),a("div",le,[a("button",{class:"import-btn",disabled:!b.value||g.value,onClick:x},[g.value?(o(),n("i",ie)):(o(),n("i",ce)),F(" "+i(g.value?"Importing...":"Import Wallet"),1)],8,ne)])])]),_:1}))}}),ke=R(ue,[["__scopeId","data-v-a1c0b8ca"]]);export{ke as default};
