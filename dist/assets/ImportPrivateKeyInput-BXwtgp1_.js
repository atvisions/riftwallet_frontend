import{d as D,b as n,c as E,o as W,k as o,q as t,A as h,D as i,y as b,C as A,E as k,z as B,F as V,G as F,M,I as N,l as r}from"./main-Bf4zo9mQ.js";import{a as $,u as U}from"./popup-TD7wOOC_.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chrome-mock-B1Y85l16.js";import"./index-DcL2QsEm.js";const L={class:"import-private-key-input-page"},O={class:"content"},J={class:"form-container"},T={key:0,class:"selected-chain"},q={class:"chain-display"},G=["src","alt"],H={key:1,class:"chain-placeholder"},R={class:"chain-details"},Z={class:"form-group"},j={class:"form-hint"},Q={class:"private-key-input-container"},X={key:0,class:"error-message"},Y={key:1,class:"form-group"},ee=["value"],te={class:"form-group"},ae={class:"password-input-container"},se=["type"],le={key:0,class:"error-message"},oe=["disabled"],re={key:0,class:"ri-loader-4-line spinning"},ne={key:1,class:"ri-key-line"},ie={key:2,class:"error-alert"},ce=D({__name:"ImportPrivateKeyInput",setup(ue){const u=U(),y=$(),a=n(null),d=n(""),v=n(""),g=n("0"),w=n(!1),f=n(!1),p=n(!1),_=n(""),c=n(""),m=n(""),C=E(()=>d.value.trim()&&v.value.trim()&&a.value),x=()=>{u.go(-1)},P=()=>{const l=d.value.trim().replace(/^0x/,"");if(a.value?.chain==="SOL"){if(!/^[1-9A-HJ-NP-Za-km-z]{87,88}$/.test(l)&&!/^[a-fA-F0-9]{64}$/.test(l))return c.value="Solana private key must be Base58 encoded (87-88 characters) or 64-character hexadecimal string",!1}else if(!/^[a-fA-F0-9]{64}$/.test(l))return c.value="Private key must be a 64-character hexadecimal string",!1;return c.value="",!0},S=()=>v.value.length<8?(m.value="Password must be at least 8 characters",!1):(m.value="",!0),K=async()=>{if(!(!P()||!S()))try{p.value=!0,_.value="";const l={private_key:d.value.trim().replace(/^0x/,""),chain:a.value.chain,payment_password:v.value,kadena_chain_id:a.value.chain==="KDA"?g.value:"0"};console.log("Starting wallet import with data:",l);const e=await y.importWallet(l);console.log("Import successful, received wallet:",e),await y.loadWallets();const s=y.wallets.find(I=>I.address===e.address&&I.chain===e.chain);s&&(y.setCurrentWallet(s),sessionStorage.removeItem("import_selected_chain"),console.log("Wallet import completed, redirecting to home")),u.push("/")}catch(l){_.value=l instanceof Error?l.message:"Import failed, please check if the private key is correct"}finally{p.value=!1}};return W(()=>{const l=sessionStorage.getItem("import_selected_chain");if(l)try{a.value=JSON.parse(l)}catch(e){console.error("Failed to parse selected chain:",e),u.push("/import-private-key-select-chain")}else u.push("/import-private-key-select-chain")}),(l,e)=>(r(),o("div",L,[t("div",{class:"header"},[t("button",{onClick:x,class:"back-btn"},e[5]||(e[5]=[t("i",{class:"ri-arrow-left-line"},null,-1)])),e[6]||(e[6]=t("h1",null,"Import Private Key",-1))]),t("div",O,[t("div",J,[a.value?(r(),o("div",T,[t("div",q,[a.value.logo?(r(),o("img",{key:0,src:a.value.logo,alt:a.value.name,class:"chain-logo"},null,8,G)):(r(),o("div",H,i(a.value.chain.charAt(0).toUpperCase()),1)),t("div",R,[t("h3",null,i(a.value.name),1),t("p",null,i(a.value.chain),1)])])])):h("",!0),t("div",Z,[e[7]||(e[7]=t("label",null,"Private Key",-1)),t("p",j,i(a.value?.chain==="SOL"?"Enter your private key (Base58 encoded or 64-character hexadecimal string)":"Enter your private key (64-character hexadecimal string)"),1),t("div",Q,[b(t("textarea",{"onUpdate:modelValue":e[0]||(e[0]=s=>d.value=s),class:k(["private-key-input",{error:c.value}]),placeholder:"Enter your private key...",rows:"3"},null,2),[[A,d.value]]),t("button",{type:"button",class:"private-key-toggle",onClick:e[1]||(e[1]=s=>w.value=!w.value)},[t("i",{class:k(w.value?"ri-eye-off-line":"ri-eye-line")},null,2)])]),c.value?(r(),o("div",X,i(c.value),1)):h("",!0)]),a.value?.chain==="KDA"?(r(),o("div",Y,[e[8]||(e[8]=t("label",null,"Kadena Chain ID",-1)),e[9]||(e[9]=t("p",{class:"form-hint"},"Select Kadena Chain ID (0-19)",-1)),b(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>g.value=s),class:"chain-id-select"},[(r(),o(V,null,F(20,s=>t("option",{key:s-1,value:(s-1).toString()},"Chain "+i(s-1),9,ee)),64))],512),[[B,g.value]])])):h("",!0),t("div",te,[e[10]||(e[10]=t("label",null,"Payment Password",-1)),e[11]||(e[11]=t("p",{class:"form-hint"},"Enter your payment password to protect the wallet",-1)),t("div",ae,[b(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>v.value=s),type:f.value?"text":"password",class:k(["password-input",{error:m.value}]),placeholder:"Enter payment password"},null,10,se),[[M,v.value]]),t("button",{type:"button",class:"password-toggle",onClick:e[4]||(e[4]=s=>f.value=!f.value)},[t("i",{class:k(f.value?"ri-eye-off-line":"ri-eye-line")},null,2)])]),m.value?(r(),o("div",le,i(m.value),1)):h("",!0)]),t("button",{class:"import-btn",disabled:!C.value||p.value,onClick:K},[p.value?(r(),o("i",re)):(r(),o("i",ne)),N(" "+i(p.value?"Importing...":"Import Wallet"),1)],8,oe),_.value?(r(),o("div",ie,[e[12]||(e[12]=t("i",{class:"ri-error-warning-line"},null,-1)),t("span",null,i(_.value),1)])):h("",!0)])])]))}}),ye=z(ce,[["__scopeId","data-v-7c96dd32"]]);export{ye as default};
