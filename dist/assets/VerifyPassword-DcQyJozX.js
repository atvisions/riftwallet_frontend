import{d as g,u as m,r as c,o as y,e as u,i as e,G as p,h as P,K as _,C as S,A as V,M as A,n as v,f as w}from"./auth-DRfzTYJF.js";import{a as b,u as I,_ as C}from"./preload-helper-DtVLuan9.js";import{A as W}from"./chrome-mock-0jeXDaAI.js";import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"verify-password-page"},E={class:"header-section"},M={class:"app-name"},x={class:"form-section"},N={class:"input-group"},z={class:"input-wrapper"},B=["type"],D={key:0,class:"error-message"},q=["disabled"],G={key:0,class:"loading-spinner"},H={key:1},F=g({__name:"VerifyPassword",setup(K){console.log("ðŸ” VerifyPassword.vue - é¡µé¢å¼€å§‹åŠ è½½"),console.log("ðŸŒ å½“å‰çŽ¯å¢ƒä¿¡æ¯:",{href:window.location.href,pathname:window.location.pathname,hash:window.location.hash,windowSize:{width:window.innerWidth,height:window.innerHeight}}),console.log("ðŸ” VerifyPassword.vue - ç»„ä»¶å¼€å§‹åŠ è½½"),console.log("ðŸŒ å½“å‰çŽ¯å¢ƒä¿¡æ¯:",{href:window.location.href,pathname:window.location.pathname,windowSize:{width:window.innerWidth,height:window.innerHeight}});const i=I(),s=m(),t=b(),l=c(""),r=c(!1),d=c(!1),n=c(""),f=async()=>{if(console.log("ðŸ” å¼€å§‹å¯†ç éªŒè¯æµç¨‹"),console.log("ðŸ“ è¾“å…¥çš„å¯†ç é•¿åº¦:",l.value.length),!l.value){console.log("âŒ å¯†ç ä¸ºç©ºï¼Œåœæ­¢éªŒè¯");return}try{d.value=!0,n.value="",console.log("ðŸ”„ è°ƒç”¨ authStore.verifyPaymentPassword"),console.log("ðŸª å½“å‰ authStore çŠ¶æ€:",{isAuthenticated:s.isAuthenticated,deviceId:s.deviceId,hasPaymentPassword:s.hasPaymentPassword,isPasswordSessionValid:s.isPasswordSessionValid});const a=await s.verifyPaymentPassword(l.value);console.log("âœ… å¯†ç éªŒè¯ç»“æžœ:",a),a?(console.log("ðŸŽ‰ å¯†ç éªŒè¯æˆåŠŸï¼Œæ£€æŸ¥é’±åŒ…çŠ¶æ€"),console.log("ðŸ” éªŒè¯åŽçš„ authStore çŠ¶æ€:",{isAuthenticated:s.isAuthenticated,deviceId:s.deviceId,hasPaymentPassword:s.hasPaymentPassword,isPasswordSessionValid:s.isPasswordSessionValid}),await new Promise(o=>setTimeout(o,50)),console.log("ðŸ“± å¼€å§‹åŠ è½½é’±åŒ…åˆ—è¡¨"),await t.loadWallets(),console.log("ðŸ“Š é’±åŒ…åŠ è½½å®Œæˆï¼Œé’±åŒ…æ•°é‡:",t.wallets.length),t.wallets.length>0?(console.log("ðŸ  æœ‰é’±åŒ…ï¼Œä»Žå¯†ç éªŒè¯é¡µé¢è·³è½¬åˆ°é¦–é¡µ"),console.log("ðŸŽ¯ å½“å‰é’±åŒ…:",t.currentWallet),await i.replace("/"),console.log("âœ… è·¯ç”±è·³è½¬å®Œæˆ")):(console.log("ðŸ’¼ æ²¡æœ‰é’±åŒ…ï¼Œä»Žå¯†ç éªŒè¯é¡µé¢è·³è½¬åˆ°é’±åŒ…é€‰æ‹©é¡µé¢"),await i.replace("/wallet-choice"),console.log("âœ… è·¯ç”±è·³è½¬å®Œæˆ"))):(console.log("âŒ å¯†ç éªŒè¯å¤±è´¥"),n.value="Invalid password. Please try again.")}catch(a){console.error("ðŸ’¥ å¯†ç éªŒè¯è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯:",a),n.value=a instanceof Error?a.message:"Verification failed"}finally{d.value=!1,console.log("ðŸ å¯†ç éªŒè¯æµç¨‹ç»“æŸ")}};return y(()=>{console.log("ðŸ” VerifyPassword.vue - é¡µé¢æŒ‚è½½å®Œæˆ"),console.log("ðŸª æŒ‚è½½æ—¶çš„ authStore çŠ¶æ€:",{isAuthenticated:s.isAuthenticated,deviceId:s.deviceId,hasPaymentPassword:s.hasPaymentPassword,isPasswordSessionValid:s.isPasswordSessionValid}),console.log("ðŸ“± æŒ‚è½½æ—¶çš„ walletStore çŠ¶æ€:",{walletsCount:t.wallets.length,currentWallet:t.currentWallet}),console.log("ðŸŒ æŒ‚è½½æ—¶çš„è·¯ç”±ä¿¡æ¯:",{currentRoute:i.currentRoute.value.path,query:i.currentRoute.value.query,params:i.currentRoute.value.params})}),(a,o)=>(w(),u("div",R,[e("div",E,[o[2]||(o[2]=e("div",{class:"logo-container"},[e("img",{src:C,alt:"Riftwallet",class:"logo"})],-1)),e("h1",M,p(P(W).NAME),1),o[3]||(o[3]=e("p",{class:"form-description"}," Enter your password to access your wallet ",-1))]),e("div",x,[e("form",{onSubmit:_(f,["prevent"]),class:"password-form"},[e("div",N,[o[4]||(o[4]=e("label",{for:"password"},"Password",-1)),e("div",z,[V(e("input",{id:"password","onUpdate:modelValue":o[0]||(o[0]=h=>l.value=h),type:r.value?"text":"password",placeholder:"Enter your password",class:v(["password-input",{error:n.value}]),autofocus:""},null,10,B),[[A,l.value]]),e("button",{type:"button",onClick:o[1]||(o[1]=h=>r.value=!r.value),class:"toggle-password"},[e("i",{class:v(r.value?"ri-eye-off-line":"ri-eye-line")},null,2)])]),n.value?(w(),u("div",D,p(n.value),1)):S("",!0)]),e("button",{type:"submit",disabled:!l.value||d.value,class:"submit-btn"},[d.value?(w(),u("div",G)):(w(),u("span",H,"Verify Password"))],8,q)],32)])]))}}),j=k(F,[["__scopeId","data-v-4555a0af"]]);export{j as default};
