const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomeSidePanel-CdFcQm6W.js","assets/preload-helper-gab_YaoT.js","assets/auth-DQh_hvla.js","assets/chrome-mock-wjw8bMAV.js","assets/auth-Bt6g8DFh.css","assets/ResponsiveLayout-DxLVppIv.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/ResponsiveLayout-DY9OWmIU.css","assets/BottomNavigation-CgkotWda.js","assets/BottomNavigation-BwEQ4zmz.css","assets/HomeSidePanel-DyH-Bi2H.css","assets/WalletDetail-CCs9c22m.js","assets/PageHeader-CwFKyMAW.js","assets/PageHeader-Deg_r7Vb.css","assets/WalletDetail-DEI2oHnH.css","assets/RenameWallet-C4rakLsR.js","assets/RenameWallet-CVATTyue.css","assets/ShowPrivateKey-C7zhso-1.js","assets/ShowPrivateKey-Ca_JlDQT.css","assets/DeleteWallet-ydAjTheI.js","assets/DeleteWallet-0FvFlpt1.css","assets/Send-CgipmvPg.js","assets/Send-CMRKXDDv.css","assets/Receive-T012x14E.js","assets/Receive-CvPgX43_.css","assets/Swap-DOI0ebYU.js","assets/Swap-CIx_PKQ1.css","assets/History-DJtW04vs.js","assets/History-jaAZL-0t.css","assets/Markets-oGWtjOz3.js","assets/Markets-B6QsmIcU.css","assets/Trade-DM4ja4bD.js","assets/Trade-C0OKoTpO.css","assets/Discover-CStqn119.js","assets/Discover-Bbctwgag.css","assets/Settings-tG9WJq5L.js","assets/Settings-kLFYLIp8.css","assets/ChangePassword-Dm_Hhdop.js","assets/ChangePassword-BKUzuSsh.css","assets/ImportWallet-fQ5yyCxS.js","assets/ImportWallet-CVwQZSdQ.css","assets/ImportMnemonic-BZ8YRtCq.js","assets/ImportMnemonic-Bc8gpMBp.css","assets/ImportMnemonicInput-D8OblcBr.js","assets/ImportMnemonicInput-8nheoQ4y.css","assets/ImportPrivateKey-BP85wkCo.js","assets/ImportPrivateKey-Ch17VNqg.css","assets/ImportPrivateKeyInput-po-8zMvV.js","assets/ImportPrivateKeyInput-q7zaiOuA.css","assets/WalletImportLoading-DPAMhtJl.js","assets/WalletImportLoading-TKZgXiZf.css","assets/SetupPassword-DrLXy70W.js","assets/SetupPassword-Yy2yLFDT.css","assets/VerifyPassword-BrK2udmJ.js","assets/VerifyPassword-2SkTThJa.css","assets/WalletChoice-DmYwoakN.js","assets/WalletChoice-BJFYGSQy.css","assets/SelectChain-C5rusRZZ.js","assets/SelectChain-D_17XEXg.css","assets/VerifyMnemonic-DwFNLXvL.js","assets/VerifyMnemonic-BclRmCH6.css","assets/ConfirmMnemonic-CyLQXcH1.js","assets/ConfirmMnemonic-Dx_RPTFn.css","assets/CreateWalletPassword-B5y_OESe.js","assets/CreateWalletPassword-Bwgjh9gE.css"])))=>i.map(i=>d[i]);
import{u as f,d as I,r as d,c as A,o as R,w as L,a as V,b as T,e as h,f as _,g as D,h as S,i as p,n as O,j as C,k as W,l as M}from"./auth-DQh_hvla.js";import{u as y,a as z,_ as H,b as e,c as b,d as x}from"./preload-helper-gab_YaoT.js";import{g as B}from"./chrome-mock-wjw8bMAV.js";/* empty css             */let r=null,E=Date.now(),v=!1;async function K(){try{const s=(await B().get(["settings"])).settings||{};return{autoLock:s.autoLock!==!1,lockTimeout:s.lockTimeout||30}}catch(i){return console.error("Failed to get auto-lock settings:",i),{autoLock:!0,lockTimeout:30}}}async function N(){const i=await K();if(!i.autoLock||i.lockTimeout===-1)return!1;if(i.lockTimeout===0)return!0;const s=Date.now()-E,o=i.lockTimeout*60*1e3;return s>=o}function F(){r&&clearInterval(r),P(),r=setInterval(async()=>{const i=f();if(!i.hasPaymentPassword)return;await N()&&(console.log("Auto-lock triggered due to inactivity, redirecting to verify password"),await i.clearPasswordSession(),y().push("/verify-password"))},30*1e3),console.log("Session check started with activity-based auto-lock")}function G(){r&&(clearInterval(r),r=null,console.log("Session check stopped"))}function P(){if(v)return;const i=["mousedown","mousemove","keypress","scroll","touchstart","click"],n=()=>{E=Date.now()};i.forEach(s=>{document.addEventListener(s,n,!0)}),v=!0,console.log("Activity listeners setup completed")}function j(){P()}const U={key:0,class:"loading-screen"},q=I({__name:"App",setup(i){const n=y(),s=z(),o=f(),l=d(!1);d(!1);const c=d("popup"),m=()=>{const t=window.location.href.includes("sidepanel")||window.location.pathname.includes("sidepanel")||window.innerWidth>500&&window.innerHeight>700;c.value=t?"sidepanel":"popup",console.log("ðŸ” Global Mode detected:",c.value,{href:window.location.href,pathname:window.location.pathname,width:window.innerWidth,height:window.innerHeight})},k=A(()=>{const t={"layout-popup":c.value==="popup","layout-sidepanel":c.value==="sidepanel"};return console.log("ðŸŽ¯ Global App - layoutClasses:",{currentMode:c.value,classes:t,windowWidth:window.innerWidth,windowHeight:window.innerHeight}),t});return R(async()=>{try{if(console.log("ðŸŽ¯ Initializing global layout mode detection"),m(),window.addEventListener("resize",m),l.value){console.log("App already initialized, skipping");return}await o.initialize(),console.log("Auth state:",{needsPasswordSetup:o.needsPasswordSetup,hasPaymentPassword:o.hasPaymentPassword,canAccessWallet:o.canAccessWallet,isPasswordSessionValid:o.isPasswordSessionValid,currentRoute:n.currentRoute.value.path});const t=n.currentRoute.value.path;t==="/"||t==="/popup.html"?(console.log("Executing routing logic for path:",t),o.hasPaymentPassword?o.isPasswordSessionValid?(console.log("Password set and session valid, checking wallet status"),await s.loadWallets(),s.wallets.length>0?console.log("Has wallets, staying on home page"):(console.log("No wallets found, redirecting to wallet choice"),await n.replace("/wallet-choice"))):(console.log("Password set but session expired, redirecting to verify password"),await n.replace("/verify-password")):(console.log("No password set, redirecting to setup password"),await n.replace("/setup-password"))):console.log("Skipping routing logic for non-root path:",t),o.hasPaymentPassword&&(F(),j()),await n.isReady(),l.value=!0,console.log("App initialization completed")}catch(t){console.error("Failed to initialize app:",t),l.value=!0}}),L(()=>n.currentRoute.value.path,async(t,a)=>{if(console.log("Route changed from",a,"to",t),[a==="/verify-password"&&t==="/",a==="/wallet-choice"&&t==="/",["/select-chain","/verify-mnemonic","/confirm-mnemonic","/create-wallet-password"].includes(a)&&t==="/",["/import-wallet","/import-mnemonic","/import-private-key","/import-private-key-input","/import-mnemonic-input","/wallet-import-loading"].includes(a)&&t==="/",a==="/setup-password"&&t==="/"].some(g=>g)){console.log("Skipping route logic - coming from authentication/wallet setup flow");return}if(t==="/"&&l.value){if(sessionStorage.getItem("isVerifyingPassword")==="true"){console.log("Already verifying password, skipping duplicate check");return}setTimeout(async()=>{if(sessionStorage.getItem("isVerifyingPassword")==="true"){console.log("Password verification in progress, skipping");return}await o.checkPasswordSession(),o.hasPaymentPassword&&!o.isPasswordSessionValid&&(console.log("Session expired after delay check, redirecting to verify password"),sessionStorage.setItem("isVerifyingPassword","true"),n.push("/verify-password"))},300)}}),V(()=>{G(),window.removeEventListener("resize",m)}),(t,a)=>{const w=T("router-view");return _(),h("div",{id:"app",class:O(["wallet-app",k.value])},[S(o).loading||!l.value?(_(),h("div",U,a[0]||(a[0]=[p("div",{class:"loading-content"},[p("img",{src:H,alt:"Riftwallet",class:"loading-logo"}),p("div",{class:"loading-spinner"}),p("p",null,"Initializing Riftwallet...")],-1)]))):(_(),D(w,{key:1}))],2)}}}),J=[{path:"/",name:"Home",component:()=>e(()=>import("./HomeSidePanel-CdFcQm6W.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))},{path:"/wallet/:id",name:"WalletDetail",component:()=>e(()=>import("./WalletDetail-CCs9c22m.js"),__vite__mapDeps([11,2,3,4,1,12,6,13,14]))},{path:"/wallet/:id/rename",name:"RenameWallet",component:()=>e(()=>import("./RenameWallet-C4rakLsR.js"),__vite__mapDeps([15,2,3,4,1,12,6,13,16]))},{path:"/wallet/:id/private-key",name:"ShowPrivateKey",component:()=>e(()=>import("./ShowPrivateKey-C7zhso-1.js"),__vite__mapDeps([17,2,3,4,1,12,6,13,18]))},{path:"/wallet/:id/delete",name:"DeleteWallet",component:()=>e(()=>import("./DeleteWallet-ydAjTheI.js"),__vite__mapDeps([19,2,3,4,1,12,6,13,20]))},{path:"/send",name:"Send",component:()=>e(()=>import("./Send-CgipmvPg.js"),__vite__mapDeps([21,2,3,4,1,12,6,13,22]))},{path:"/receive",name:"Receive",component:()=>e(()=>import("./Receive-T012x14E.js"),__vite__mapDeps([23,1,2,3,4,5,6,7,24]))},{path:"/swap",name:"Swap",component:()=>e(()=>import("./Swap-DOI0ebYU.js"),__vite__mapDeps([25,5,2,3,4,6,7,26]))},{path:"/history",name:"History",component:()=>e(()=>import("./History-DJtW04vs.js"),__vite__mapDeps([27,1,2,3,4,5,6,7,28]))},{path:"/markets",name:"Markets",component:()=>e(()=>import("./Markets-oGWtjOz3.js"),__vite__mapDeps([29,5,2,3,4,6,7,8,1,9,30]))},{path:"/trade",name:"Trade",component:()=>e(()=>import("./Trade-DM4ja4bD.js"),__vite__mapDeps([31,5,2,3,4,6,7,8,1,9,32]))},{path:"/discover",name:"Discover",component:()=>e(()=>import("./Discover-CStqn119.js"),__vite__mapDeps([33,5,2,3,4,6,7,8,1,9,34]))},{path:"/settings",name:"Settings",component:()=>e(()=>import("./Settings-tG9WJq5L.js"),__vite__mapDeps([35,1,2,3,4,5,6,7,8,9,36]))},{path:"/change-password",name:"ChangePassword",component:()=>e(()=>import("./ChangePassword-Dm_Hhdop.js"),__vite__mapDeps([37,2,3,4,1,12,6,13,38]))},{path:"/import-wallet",name:"ImportWallet",component:()=>e(()=>import("./ImportWallet-fQ5yyCxS.js"),__vite__mapDeps([39,1,2,3,4,5,6,7,40]))},{path:"/import-mnemonic",name:"ImportMnemonic",component:()=>e(()=>import("./ImportMnemonic-BZ8YRtCq.js"),__vite__mapDeps([41,2,3,4,1,5,6,7,42]))},{path:"/import-mnemonic-input",name:"ImportMnemonicInput",component:()=>e(()=>import("./ImportMnemonicInput-D8OblcBr.js"),__vite__mapDeps([43,2,3,4,1,5,6,7,44]))},{path:"/import-private-key",name:"ImportPrivateKey",component:()=>e(()=>import("./ImportPrivateKey-BP85wkCo.js"),__vite__mapDeps([45,2,3,4,1,5,6,7,46]))},{path:"/import-private-key-input",name:"ImportPrivateKeyInput",component:()=>e(()=>import("./ImportPrivateKeyInput-po-8zMvV.js"),__vite__mapDeps([47,2,3,4,1,5,6,7,48]))},{path:"/wallet-import-loading",name:"WalletImportLoading",component:()=>e(()=>import("./WalletImportLoading-DPAMhtJl.js"),__vite__mapDeps([49,1,2,3,4,6,50]))},{path:"/setup-password",name:"SetupPassword",component:()=>e(()=>import("./SetupPassword-DrLXy70W.js"),__vite__mapDeps([51,2,3,4,1,6,52]))},{path:"/verify-password",name:"VerifyPassword",component:()=>e(()=>import("./VerifyPassword-BrK2udmJ.js"),__vite__mapDeps([53,2,3,4,1,6,54]))},{path:"/wallet-choice",name:"WalletChoice",component:()=>e(()=>import("./WalletChoice-DmYwoakN.js"),__vite__mapDeps([55,1,2,3,4,6,56]))},{path:"/select-chain",name:"SelectChain",component:()=>e(()=>import("./SelectChain-C5rusRZZ.js"),__vite__mapDeps([57,1,2,3,4,5,6,7,58]))},{path:"/verify-mnemonic",name:"VerifyMnemonic",component:()=>e(()=>import("./VerifyMnemonic-DwFNLXvL.js"),__vite__mapDeps([59,1,2,3,4,5,6,7,60]))},{path:"/confirm-mnemonic",name:"ConfirmMnemonic",component:()=>e(()=>import("./ConfirmMnemonic-CyLQXcH1.js"),__vite__mapDeps([61,2,3,4,1,5,6,7,62]))},{path:"/create-wallet-password",name:"CreateWalletPassword",component:()=>e(()=>import("./CreateWalletPassword-B5y_OESe.js"),__vite__mapDeps([63,2,3,4,1,5,6,7,64]))}],Q=b({history:x(),routes:J}),u=C(q);u.use(W());u.use(Q);u.use(M);u.mount("#app");
