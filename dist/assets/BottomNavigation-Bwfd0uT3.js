import{d as k,r as S,c as W,o as O,a as H,e as a,f as l,i as e,C as v,G as h,n as w,H as T,I as x,L as E,M as I,m as A,h as N,b as B,F as V}from"./auth-Vb-AA__w.js";import{a as q,u as Y,e as G}from"./preload-helper-DQNYPBmD.js";import{C as R}from"./chrome-mock-DxZfNgLw.js";import{_ as y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"wallet-selector"},K={class:"wallet-info"},U={class:"wallet-avatar-container"},j=["src","alt"],J={key:1,class:"wallet-avatar-fallback"},Q={class:"wallet-details"},X={class:"wallet-name-row"},Z={class:"wallet-name"},ee={class:"wallet-chain"},te={key:0,class:"dropdown-menu"},se={class:"wallet-list-container"},oe={class:"wallet-list"},ne=["onClick"],ae={class:"wallet-avatar-container"},le=["src","alt"],ie={key:1,class:"wallet-avatar-fallback"},ce={class:"wallet-info"},re={class:"wallet-header"},de={class:"wallet-name"},ue={class:"wallet-chain-badge"},pe={class:"wallet-address-row"},me={class:"wallet-address"},_e=["onClick","title"],he={key:0,class:"kadena-chain"},ve=["onClick"],we=k({__name:"WalletSelector",setup(g){const m=Y(),p=q(),r=S(!1),i=S(null),f=W(()=>p.wallets),c=W(()=>p.currentWallet),s=t=>R[t]?.name||t,d=()=>{r.value=!r.value},_=()=>{r.value=!1},L=t=>{p.setCurrentWallet(t),_()},P=t=>t?t.length<=20?t:`${t.slice(0,10)}...${t.slice(-8)}`:"",$=async(t,n)=>{try{await navigator.clipboard.writeText(t),i.value=n,setTimeout(()=>{i.value=null},2e3)}catch(o){console.error("Failed to copy address:",o);try{const u=document.createElement("textarea");u.value=t,document.body.appendChild(u),u.select(),document.execCommand("copy"),document.body.removeChild(u),i.value=n,setTimeout(()=>{i.value=null},2e3)}catch(u){console.error("Fallback copy failed:",u)}}},C=t=>{const n=t.target;n.style.display="none"},M=t=>{console.log("Manage wallet:",t),_()},D=()=>{m.push("/select-chain"),_()},F=()=>{m.push("/import-wallet"),_()},b=t=>{t.target.closest(".wallet-selector")||_()};return O(()=>{document.addEventListener("click",b)}),H(()=>{document.removeEventListener("click",b)}),(t,n)=>(l(),a("div",z,[e("div",{class:"current-wallet",onClick:d},[e("div",K,[e("div",U,[c.value?.avatar?(l(),a("img",{key:0,src:c.value.avatar,alt:c.value.name,class:"wallet-avatar",onError:C},null,40,j)):(l(),a("div",J,n[0]||(n[0]=[e("i",{class:"ri-wallet-3-line"},null,-1)])))]),e("div",Q,[e("div",X,[e("span",Z,h(c.value?.name||"No Wallet"),1),e("i",{class:w(["ri-arrow-down-s-line dropdown-icon",{rotated:r.value}])},null,2)]),e("span",ee,h(c.value?s(c.value.chain):""),1)])])]),r.value?(l(),a("div",te,[e("div",se,[n[3]||(n[3]=e("div",{class:"section-title"},"MY WALLETS",-1)),e("div",oe,[(l(!0),a(T,null,x(f.value,o=>(l(),a("div",{key:o.id,class:w(["wallet-item",{active:c.value?.id===o.id}]),onClick:u=>L(o)},[e("div",ae,[o.avatar?(l(),a("img",{key:0,src:o.avatar,alt:o.name,class:"wallet-avatar",onError:C},null,40,le)):(l(),a("div",ie,n[1]||(n[1]=[e("i",{class:"ri-wallet-3-line"},null,-1)])))]),e("div",ce,[e("div",re,[e("span",de,h(o.name),1),e("span",ue,h(s(o.chain)),1)]),e("div",pe,[e("span",me,h(P(o.address)),1),e("button",{class:"copy-address-btn",onClick:I(u=>$(o.address,o.id),["stop"]),title:i.value===o.id?"Copied!":"Copy Address"},[e("i",{class:w(i.value===o.id?"ri-check-line":"ri-file-copy-line")},null,2)],8,_e)]),o.chain==="KDA"&&o.kadena_chain_id!==null?(l(),a("div",he," Chain ID: "+h(o.kadena_chain_id),1)):v("",!0)]),e("button",{class:"manage-btn",onClick:I(u=>M(o),["stop"])},n[2]||(n[2]=[e("i",{class:"ri-settings-3-line"},null,-1)]),8,ve)],10,ne))),128))])]),e("div",{class:"actions"},[e("button",{class:"action-btn create-btn",onClick:D},n[4]||(n[4]=[e("i",{class:"ri-add-line"},null,-1),E(" Create New Wallet ")])),e("button",{class:"action-btn import-btn",onClick:F},n[5]||(n[5]=[e("i",{class:"ri-download-line"},null,-1),E(" Import Wallet ")]))])])):v("",!0),r.value?(l(),a("div",{key:1,class:"backdrop",onClick:_})):v("",!0)]))}}),fe=y(we,[["__scopeId","data-v-ce6b7141"]]),ge={class:"top-header"},ke={class:"header-left"},ye={class:"header-right"},Ce=k({__name:"TopHeader",props:{pageType:{}},setup(g){const m=g,p=window.location.href.includes("sidepanel")||window.location.pathname.includes("sidepanel"),r=m.pageType||"other",i=()=>{console.log("Opening search...")},f=async()=>{if(console.log("Opening side panel from popup..."),typeof chrome<"u"&&chrome.sidePanel)try{const s=await chrome.windows.getCurrent();s.id&&(await chrome.sidePanel.open({windowId:s.id}),window.location.href.includes("popup")&&window.close())}catch(s){console.error("Failed to open side panel:",s)}},c=async()=>{if(console.log("Closing side panel..."),r==="home"){if(console.log("ðŸ”„ Close side panel clicked! (Phantom-style)"),typeof chrome<"u"&&chrome.runtime)try{if(console.log("ðŸ“± Sending close side panel request..."),(await chrome.runtime.sendMessage({type:"CLOSE_SIDEPANEL_PHANTOM_STYLE"}))?.success){if(console.log("âœ… Side panel close request successful"),window.location.pathname.includes("sidepanel")){console.log("ðŸ“± In side panel, attempting to close...");try{window.close(),console.log("âœ… Window close called")}catch{console.log("âš ï¸ Could not close window, trying navigation...")}}}else console.log("âŒ Side panel close request failed")}catch(s){console.error("âŒ Failed to send close side panel message:",s)}}else if(typeof chrome<"u"&&chrome.runtime)try{await chrome.runtime.sendMessage({type:"CLOSE_SIDEPANEL_PHANTOM_STYLE"})}catch(s){console.error("Failed to close side panel:",s)}};return(s,d)=>(l(),a("div",ge,[e("div",ke,[A(fe)]),e("div",ye,[e("button",{onClick:i,class:"header-btn",title:"Search"},d[0]||(d[0]=[e("i",{class:"ri-search-line"},null,-1)])),N(p)?v("",!0):(l(),a("button",{key:0,onClick:f,class:"header-btn side-panel-open",title:"Open in Side Panel"},d[1]||(d[1]=[e("i",{class:"ri-fullscreen-line"},null,-1)]))),N(p)?(l(),a("button",{key:1,onClick:c,class:"header-btn side-panel-close",title:"Close Side Panel"},d[2]||(d[2]=[e("i",{class:"ri-fullscreen-exit-line"},null,-1)]))):v("",!0)])]))}}),Te=y(Ce,[["__scopeId","data-v-4f0f166e"]]),be={class:"bottom-nav"},Se=k({__name:"BottomNavigation",setup(g){const m=G(),p=[{name:"home",path:"/",icon:"ri-home-line",label:"Home"},{name:"markets",path:"/markets",icon:"ri-line-chart-line",label:"Markets"},{name:"trade",path:"/trade",icon:"ri-exchange-line",label:"Trade"},{name:"discover",path:"/discover",icon:"ri-compass-line",label:"Discover"},{name:"wallet",path:"/settings",icon:"ri-settings-line",label:"Wallet"}],r=i=>i==="/"?m.path==="/":m.path.startsWith(i);return(i,f)=>{const c=B("router-link");return l(),a("nav",be,[(l(),a(T,null,x(p,s=>A(c,{key:s.name,to:s.path,class:w(["nav-item",{active:r(s.path)}])},{default:V(()=>[e("i",{class:w(s.icon)},null,2),e("span",null,h(s.label),1)]),_:2},1032,["to","class"])),64))])}}}),xe=y(Se,[["__scopeId","data-v-8584de75"]]);export{xe as B,Te as T};
