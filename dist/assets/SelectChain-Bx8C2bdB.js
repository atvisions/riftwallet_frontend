import{u as A,e as x}from"./preload-helper-DW6y3PHv.js";import{d as E,u as N,r as l,c as y,o as R,g as P,F as m,f as a,i as e,e as i,C as h,G as c,H as L,I as O,n as C,J as v}from"./auth-DRfzTYJF.js";import{A as w}from"./chrome-mock-0jeXDaAI.js";import{R as T}from"./ResponsiveLayout-NikCG07L.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";const j={class:"page-content"},G={class:"description"},U={key:0,class:"chains-container"},V=["onClick"],$={class:"card-content"},M={class:"chain-icon"},q=["src","alt"],z={key:1,class:"chain-placeholder"},D={class:"chain-info"},H={class:"chain-selector"},K={key:0,class:"ri-check-line"},Q={key:1,class:"loading-container"},W={key:2,class:"error-container"},X={class:"footer"},Y=["disabled"],Z={key:0},ee={key:1},se=E({__name:"SelectChain",setup(te){const d=A(),b=x(),S=N(),u=l(!1),p=l(!1),r=l(""),_=l([]),n=l(null),f=y(()=>b.query.mode||"create"),B=y(()=>{switch(f.value){case"import-mnemonic":return"Choose the blockchain network for your recovery phrase import";case"import-private-key":return"Choose the blockchain network for your private key import";default:return"Choose the blockchain network for your new wallet"}}),k=()=>{d.go(-1)},g=async()=>{try{u.value=!0,r.value="";const s=await(await fetch(`${w.API_BASE_URL}/wallets/get_supported_chains/`)).json();if(s.state==="success")_.value=s.data||[];else throw new Error(s.message||"Failed to load supported chains")}catch(t){r.value=t instanceof Error?t.message:"Failed to load chains",console.error("Failed to load supported chains:",t)}finally{u.value=!1}},I=t=>{n.value=t},F=async()=>{if(n.value)try{switch(p.value=!0,f.value){case"import-mnemonic":sessionStorage.setItem("mnemonic_selected_chain",JSON.stringify(n.value)),d.push("/import-mnemonic-input");break;case"import-private-key":sessionStorage.setItem("import_selected_chain",JSON.stringify(n.value)),d.push("/import-private-key-input");break;default:const s=await(await fetch(`${w.API_BASE_URL}/wallets/select_chain/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_id:S.deviceId,chain:n.value.chain})})).json();if(s.state==="success")console.log("Chain selected successfully:",s.data),console.log("Generated mnemonic:",s.data.mnemonic),sessionStorage.setItem("generated_mnemonic",s.data.mnemonic),sessionStorage.setItem("selected_chain",n.value.chain),d.push("/verify-mnemonic");else throw new Error(s.message||"Failed to select chain");break}}catch(t){r.value=t instanceof Error?t.message:"Failed to select chain",console.error("Failed to select chain:",t)}finally{p.value=!1}};return R(()=>{g()}),(t,s)=>(a(),P(T,{title:"Select Blockchain","show-header":!0,"show-footer":!0,scrollable:!0,padding:"16px",onBack:k},{header:m(()=>[e("div",{class:"page-header"},[e("div",{class:"header-left"},[e("button",{onClick:k,class:"back-button"},s[0]||(s[0]=[e("i",{class:"ri-arrow-left-line"},null,-1)])),s[1]||(s[1]=e("h1",{class:"header-title"},"Select Blockchain",-1))])])]),footer:m(()=>[e("div",X,[e("button",{class:"continue-btn",disabled:!n.value||p.value,onClick:F},[p.value?(a(),i("span",Z,s[8]||(s[8]=[e("i",{class:"ri-loader-4-line animate-spin"},null,-1),v(" Processing... ")]))):(a(),i("span",ee,s[9]||(s[9]=[v(" Continue "),e("i",{class:"ri-arrow-right-line"},null,-1)])))],8,Y)])]),default:m(()=>[e("div",j,[e("div",G,[e("p",null,c(B.value),1)]),u.value?h("",!0):(a(),i("div",U,[(a(!0),i(L,null,O(_.value,o=>(a(),i("div",{key:o.chain,class:C(["chain-card",{active:n.value?.chain===o.chain}]),onClick:oe=>I(o)},[s[3]||(s[3]=e("div",{class:"card-background"},null,-1)),e("div",$,[e("div",M,[o.logo?(a(),i("img",{key:0,src:o.logo,alt:o.name},null,8,q)):(a(),i("div",z,c((o.chain||o.name||"C").charAt(0).toUpperCase()),1)),s[2]||(s[2]=e("div",{class:"icon-glow"},null,-1))]),e("div",D,[e("h3",null,c(o.name),1),e("p",null,c(o.chain),1)]),e("div",H,[e("div",{class:C(["radio-circle",{selected:n.value?.chain===o.chain}])},[n.value?.chain===o.chain?(a(),i("i",K)):h("",!0)],2)])]),s[4]||(s[4]=e("div",{class:"card-decoration"},[e("div",{class:"decoration-circle"}),e("div",{class:"decoration-line"})],-1))],10,V))),128))])),u.value?(a(),i("div",Q,s[5]||(s[5]=[e("div",{class:"loading-spinner"},null,-1),e("p",null,"Loading supported chains...",-1)]))):h("",!0),r.value?(a(),i("div",W,[s[7]||(s[7]=e("div",{class:"error-icon"},[e("i",{class:"ri-error-warning-line"})],-1)),e("p",null,c(r.value),1),e("button",{class:"retry-btn",onClick:g},s[6]||(s[6]=[e("i",{class:"ri-refresh-line"},null,-1),v(" Retry ")]))])):h("",!0)])]),_:1}))}}),ce=J(se,[["__scopeId","data-v-a43b0779"]]);export{ce as default};
