import{u as S}from"./preload-helper-BrVD15Cz.js";import{d as B,u as F,r,o as A,g as I,F as h,f as a,i as s,e as n,C as u,H as E,I as L,G as v,L as p,n as k}from"./auth-CcrM1kjR.js";import{A as y}from"./index-DSub5CB9.js";import{R as P}from"./ResponsiveLayout-DQ7b-BNd.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chrome-mock-BLIE_U1K.js";const x={class:"page-content"},N={key:0,class:"chains-container"},T=["onClick"],j={class:"card-content"},G={class:"chain-icon"},O=["src","alt"],U={key:1,class:"chain-placeholder"},V={class:"chain-info"},$={class:"chain-selector"},M={key:0,class:"ri-check-line"},z={key:1,class:"loading-container"},D={key:2,class:"error-container"},H={class:"footer"},J=["disabled"],q={key:0},K={key:1},Q=B({__name:"SelectChain",setup(W){const m=S(),C=F(),c=r(!1),d=r(!1),i=r(""),f=r([]),l=r(null),_=()=>{m.go(-1)},g=async()=>{try{c.value=!0,i.value="";const e=await(await fetch(`${y.API_BASE_URL}/wallets/get_supported_chains/`)).json();if(e.state==="success")f.value=e.data||[];else throw new Error(e.message||"Failed to load supported chains")}catch(o){i.value=o instanceof Error?o.message:"Failed to load chains",console.error("Failed to load supported chains:",o)}finally{c.value=!1}},w=o=>{l.value=o},b=async()=>{if(l.value)try{d.value=!0;const e=await(await fetch(`${y.API_BASE_URL}/wallets/select_chain/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_id:C.deviceId,chain:l.value.chain})})).json();if(e.state==="success")console.log("Chain selected successfully:",e.data),console.log("Generated mnemonic:",e.data.mnemonic),sessionStorage.setItem("generated_mnemonic",e.data.mnemonic),sessionStorage.setItem("selected_chain",l.value.chain),m.push("/verify-mnemonic");else throw new Error(e.message||"Failed to select chain")}catch(o){i.value=o instanceof Error?o.message:"Failed to select chain",console.error("Failed to select chain:",o)}finally{d.value=!1}};return A(()=>{g()}),(o,e)=>(a(),I(P,{title:"Select Blockchain","show-header":!0,"show-footer":!0,scrollable:!0,onBack:_},{header:h(()=>[s("div",{class:"page-header"},[s("div",{class:"header-left"},[s("button",{onClick:_,class:"back-button"},e[0]||(e[0]=[s("i",{class:"ri-arrow-left-line"},null,-1)])),e[1]||(e[1]=s("h1",{class:"header-title"},"Select Blockchain",-1))])])]),footer:h(()=>[s("div",H,[s("button",{class:"continue-btn",disabled:!l.value||d.value,onClick:b},[d.value?(a(),n("span",q,e[9]||(e[9]=[s("i",{class:"ri-loader-4-line animate-spin"},null,-1),p(" Processing... ")]))):(a(),n("span",K,e[10]||(e[10]=[p(" Continue "),s("i",{class:"ri-arrow-right-line"},null,-1)])))],8,J)])]),default:h(()=>[s("div",x,[e[8]||(e[8]=s("div",{class:"description"},[s("p",null,"Choose the blockchain network for your new wallet")],-1)),c.value?u("",!0):(a(),n("div",N,[(a(!0),n(E,null,L(f.value,t=>(a(),n("div",{key:t.chain,class:k(["chain-card",{active:l.value?.chain===t.chain}]),onClick:X=>w(t)},[e[3]||(e[3]=s("div",{class:"card-background"},null,-1)),s("div",j,[s("div",G,[t.logo?(a(),n("img",{key:0,src:t.logo,alt:t.name},null,8,O)):(a(),n("div",U,v((t.chain||t.name||"C").charAt(0).toUpperCase()),1)),e[2]||(e[2]=s("div",{class:"icon-glow"},null,-1))]),s("div",V,[s("h3",null,v(t.name),1),s("p",null,v(t.chain),1)]),s("div",$,[s("div",{class:k(["radio-circle",{selected:l.value?.chain===t.chain}])},[l.value?.chain===t.chain?(a(),n("i",M)):u("",!0)],2)])]),e[4]||(e[4]=s("div",{class:"card-decoration"},[s("div",{class:"decoration-circle"}),s("div",{class:"decoration-line"})],-1))],10,T))),128))])),c.value?(a(),n("div",z,e[5]||(e[5]=[s("div",{class:"loading-spinner"},null,-1),s("p",null,"Loading supported chains...",-1)]))):u("",!0),i.value?(a(),n("div",D,[e[7]||(e[7]=s("div",{class:"error-icon"},[s("i",{class:"ri-error-warning-line"})],-1)),s("p",null,v(i.value),1),s("button",{class:"retry-btn",onClick:g},e[6]||(e[6]=[s("i",{class:"ri-refresh-line"},null,-1),p(" Retry ")]))])):u("",!0)])]),_:1}))}}),ae=R(Q,[["__scopeId","data-v-0e5bebe1"]]);export{ae as default};
