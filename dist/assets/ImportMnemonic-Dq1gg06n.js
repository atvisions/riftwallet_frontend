import{d as P,r,q as L,f as S,E as W,e as l,h as o,c as n,B as y,I as x,H as D,z as _,D as M,F as f,G as i,L as A,J as N}from"./auth-B5jpq_BM.js";import{a as T,u as V}from"./preload-helper-BHn8pG3Y.js";import{P as H}from"./PageContainer-Qetv8PV3.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chrome-mock-BLIE_U1K.js";import"./index-DSub5CB9.js";const R={class:"form-container"},$={class:"form-group"},z={class:"chain-selector"},F=["onClick"],O=["src","alt"],U={class:"chain-name"},q={class:"chain-code"},G={class:"form-group"},J={key:0,class:"error-message"},j={class:"form-group"},Q={class:"password-input-container"},X=["type"],Y={key:0,class:"error-message"},Z=["disabled"],ee={key:0,class:"ri-loader-4-line spinning"},oe={key:1,class:"ri-download-line"},ae={key:0,class:"error-alert"},se=P({__name:"ImportMnemonic",setup(te){const k=V(),c=T(),d=r("ETH"),u=r(""),p=r(""),h=r(!1),m=r(!1),s=r(""),v=r(""),w=r(""),C=[{code:"ETH",name:"Ethereum",logo:"https://www.riftwallet.io/media/chain_logos/ETH.png"},{code:"BSC",name:"BNB Chain",logo:"https://www.riftwallet.io/media/chain_logos/BSC.png"},{code:"BASE",name:"Base",logo:"https://www.riftwallet.io/media/chain_logos/BASE.png"},{code:"SOL",name:"Solana",logo:"https://www.riftwallet.io/media/chain_logos/SOL.png"},{code:"KDA",name:"Kadena",logo:"https://www.riftwallet.io/media/chain_logos/KDA.png"}],b=L(()=>u.value.trim()&&p.value.trim()&&d.value),I=()=>u.value.trim().split(/\s+/).length!==12?(v.value="Recovery phrase must contain 12 words",!1):(v.value="",!0),E=()=>p.value.length<8?(w.value="Password must be at least 8 characters",!1):(w.value="",!0),B=async()=>{if(!(!I()||!E()))try{m.value=!0,s.value="";const t={mnemonic:u.value.trim(),chain:d.value,payment_password:p.value,kadena_chain_id:d.value==="KDA"?"0":void 0},e=await c.importWallet(t);await c.loadWallets(!1);const a=c.wallets.find(g=>g.address===e.address&&g.chain===e.chain);a&&(await c.setCurrentWallet(a),console.log("✅ Imported wallet set as current:",a.id,a.chain,a.name),console.log("⏳ Loading wallet balance before redirect..."),await c.loadWalletBalance(a.id),console.log("✅ Wallet balance loaded, redirecting to home")),console.log("Wallet import completed, redirecting to home"),k.push("/")}catch(t){const e=t instanceof Error?t.message:"Import failed";e.toLowerCase().includes("password")?s.value="Incorrect password. Please check your payment password.":e.toLowerCase().includes("invalid")&&e.toLowerCase().includes("private key")?s.value="Invalid private key. Please check your input.":e.toLowerCase().includes("invalid")&&e.toLowerCase().includes("mnemonic")?s.value="Invalid recovery phrase. Please check your 12-word phrase.":e.toLowerCase().includes("recovery phrase")?s.value="Invalid recovery phrase. Please check if the words are correct.":s.value=e,console.error("Import wallet error:",t)}finally{m.value=!1}};return(t,e)=>(l(),S(H,{title:"Import Recovery Phrase","show-header":!0,"show-footer":!0,"show-back-button":!0,"custom-back-action":()=>t.$router.go(-1),"max-width":"420px",padding:"24px",centered:!0},{default:W(()=>[o("div",R,[o("div",$,[e[3]||(e[3]=o("label",null,"Select Blockchain Network",-1)),o("div",z,[(l(),n(D,null,x(C,a=>o("div",{key:a.code,class:f(["chain-option",{active:d.value===a.code}]),onClick:g=>d.value=a.code},[o("img",{src:a.logo,alt:a.name,class:"chain-logo"},null,8,O),o("span",U,i(a.name),1),o("span",q,i(a.code),1)],10,F)),64))])]),o("div",G,[e[4]||(e[4]=o("label",null,"Recovery Phrase",-1)),e[5]||(e[5]=o("p",{class:"form-hint"},"Enter your 12-word recovery phrase, separated by spaces",-1)),_(o("textarea",{"onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a),class:f(["mnemonic-input",{error:v.value}]),placeholder:"Enter your 12-word recovery phrase...",rows:"4"},null,2),[[M,u.value]]),v.value?(l(),n("div",J,i(v.value),1)):y("",!0)]),o("div",j,[e[6]||(e[6]=o("label",null,"Payment Password",-1)),e[7]||(e[7]=o("p",{class:"form-hint"},"Enter your payment password to protect the wallet",-1)),o("div",Q,[_(o("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>p.value=a),type:h.value?"text":"password",class:f(["password-input",{error:w.value}]),placeholder:"Enter payment password"},null,10,X),[[A,p.value]]),o("button",{type:"button",class:"password-toggle",onClick:e[2]||(e[2]=a=>h.value=!h.value)},[o("i",{class:f(h.value?"ri-eye-off-line":"ri-eye-line")},null,2)])]),w.value?(l(),n("div",Y,i(w.value),1)):y("",!0)]),o("button",{class:"import-btn",disabled:!b.value||m.value,onClick:B},[m.value?(l(),n("i",ee)):(l(),n("i",oe)),N(" "+i(m.value?"Importing & Loading Wallet...":"Import Wallet"),1)],8,Z),s.value?(l(),n("div",ae,[e[8]||(e[8]=o("i",{class:"ri-error-warning-line"},null,-1)),o("span",null,i(s.value),1)])):y("",!0)])]),_:1},8,["custom-back-action"]))}}),ue=K(se,[["__scopeId","data-v-634edb7f"]]);export{ue as default};
