const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomeSidePanel-Dj-k9J02.js","assets/preload-helper-YfDtpjzA.js","assets/auth-4sWye4Dp.js","assets/chrome-mock-DxZfNgLw.js","assets/auth-Bt6g8DFh.css","assets/ResponsiveLayout-DfHFJK1P.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/ResponsiveLayout-DY9OWmIU.css","assets/BottomNavigation-BxN8IKnJ.js","assets/BottomNavigation-Ma6mpoLf.css","assets/HomeSidePanel--KHdlLkf.css","assets/WalletDetail-BzHmAYCv.js","assets/WalletDetail-BDO4pPdt.css","assets/Send-DLPM1cfh.js","assets/Send-B7lJids8.css","assets/Receive-Bm-z9ZGp.js","assets/Receive-CLSjVNPS.css","assets/Swap-ChggenUA.js","assets/Swap-CIx_PKQ1.css","assets/History-C9SLQyOm.js","assets/History-C9_grqRI.css","assets/Markets-Ba7C1LTy.js","assets/Markets-B6QsmIcU.css","assets/Trade-Dvgu1JUV.js","assets/Trade-KrLrlduN.css","assets/Discover-Bh4pwLLi.js","assets/Discover-C95Ns-HA.css","assets/Settings-DQKFKn2v.js","assets/Settings-D34isWgt.css","assets/ImportWallet-CI4WN4-j.js","assets/ImportWallet-CVwQZSdQ.css","assets/ImportMnemonic-BIA1lzcm.js","assets/ImportMnemonic-Bc8gpMBp.css","assets/ImportMnemonicInput-B3J1iUsj.js","assets/ImportMnemonicInput-2mPKBwjo.css","assets/ImportPrivateKey-IClOMqfx.js","assets/ImportPrivateKey-Ch17VNqg.css","assets/ImportPrivateKeyInput-CBAGG95z.js","assets/ImportPrivateKeyInput-DnvCnRGc.css","assets/WalletImportLoading-DcGAtt6x.js","assets/WalletImportLoading-TKZgXiZf.css","assets/SetupPassword-DbqDhaWm.js","assets/SetupPassword-Yy2yLFDT.css","assets/VerifyPassword-C9Foom_B.js","assets/VerifyPassword-B_P62Xrf.css","assets/WalletChoice-CLw4bvvJ.js","assets/WalletChoice-BJFYGSQy.css","assets/SelectChain-DSlHiedr.js","assets/SelectChain-D_17XEXg.css","assets/VerifyMnemonic-CDk5bWWf.js","assets/VerifyMnemonic-pj63dtke.css","assets/ConfirmMnemonic-CKSuXoi6.js","assets/ConfirmMnemonic-Dp-CcCnj.css","assets/CreateWalletPassword-D0N4BdCg.js","assets/CreateWalletPassword-Bwgjh9gE.css"])))=>i.map(i=>d[i]);
import{u as d,d as y,r as h,c as E,o as P,w as S,a as I,b as R,e as v,f as _,g as A,h as V,i as p,n as k,j as D,k as L,l as T}from"./auth-4sWye4Dp.js";import{u as g,a as O,_ as C,b as e,c as W,d as z}from"./preload-helper-YfDtpjzA.js";import"./chrome-mock-DxZfNgLw.js";/* empty css             */let r=null;function M(){r&&clearInterval(r),r=setInterval(async()=>{const n=d();await n.checkPasswordSession(),n.hasPaymentPassword&&!n.isPasswordSessionValid&&(console.log("Session expired during periodic check, redirecting to verify password"),await n.clearPasswordSession(),g().push("/verify-password"))},5*60*1e3),console.log("Session check started")}function b(){r&&(clearInterval(r),r=null,console.log("Session check stopped"))}async function H(){await d().setPasswordSession(),console.log("Session refreshed")}function x(){const n=["mousedown","mousemove","keypress","scroll","touchstart"];let i=Date.now();const c=async()=>{const t=Date.now();t-i>5*60*1e3&&d().isPasswordSessionValid&&await H(),i=t};n.forEach(t=>{document.addEventListener(t,c,!0)}),console.log("Activity-based session refresh enabled")}const B={key:0,class:"loading-screen"},N=y({__name:"App",setup(n){const i=g(),c=O(),t=d(),s=h(!1),l=h("popup"),u=()=>{const o=window.location.href.includes("sidepanel")||window.location.pathname.includes("sidepanel")||window.innerWidth>500&&window.innerHeight>700;l.value=o?"sidepanel":"popup",console.log("ðŸ” Global Mode detected:",l.value,{href:window.location.href,pathname:window.location.pathname,width:window.innerWidth,height:window.innerHeight})},f=E(()=>{const o={"layout-popup":l.value==="popup","layout-sidepanel":l.value==="sidepanel"};return console.log("ðŸŽ¯ Global App - layoutClasses:",{currentMode:l.value,classes:o,windowWidth:window.innerWidth,windowHeight:window.innerHeight}),o});return P(async()=>{try{if(console.log("ðŸŽ¯ Initializing global layout mode detection"),u(),window.addEventListener("resize",u),s.value){console.log("App already initialized, skipping");return}await t.initialize(),console.log("Auth state:",{needsPasswordSetup:t.needsPasswordSetup,hasPaymentPassword:t.hasPaymentPassword,canAccessWallet:t.canAccessWallet,isPasswordSessionValid:t.isPasswordSessionValid,currentRoute:i.currentRoute.value.path});const o=i.currentRoute.value.path;o==="/"||o==="/popup.html"?(console.log("Executing routing logic for path:",o),t.hasPaymentPassword?t.isPasswordSessionValid?(console.log("Password set and session valid, checking wallet status"),await c.loadWallets(),c.wallets.length>0?console.log("Has wallets, staying on home page"):(console.log("No wallets found, redirecting to wallet choice"),await i.replace("/wallet-choice"))):(console.log("Password set but session expired, redirecting to verify password"),await i.replace("/verify-password")):(console.log("No password set, redirecting to setup password"),await i.replace("/setup-password"))):console.log("Skipping routing logic for non-root path:",o),t.hasPaymentPassword&&(M(),x()),await i.isReady(),s.value=!0,console.log("App initialization completed")}catch(o){console.error("Failed to initialize app:",o),s.value=!0}}),S(()=>i.currentRoute.value.path,async(o,a)=>{if(console.log("Route changed from",a,"to",o),a==="/verify-password"&&o==="/"){console.log("Skipping route logic after password verification");return}if(a==="/wallet-choice"&&o==="/"){console.log("Skipping route logic after wallet creation/import");return}if(["/import-wallet","/import-mnemonic","/import-private-key","/import-private-key-select-chain","/import-private-key-input","/wallet-import-loading"].includes(a)&&o==="/"){console.log("Skipping route logic after wallet import");return}if(["/select-chain","/verify-mnemonic","/confirm-mnemonic","/create-wallet-password"].includes(a)&&o==="/"){console.log("Skipping route logic after wallet creation");return}o==="/"&&s.value&&a!=="/verify-password"&&a!=="/wallet-choice"&&a!=="/create-wallet-password"&&setTimeout(async()=>{await t.checkPasswordSession(),t.hasPaymentPassword&&!t.isPasswordSessionValid&&(console.log("Session expired after delay check, redirecting to verify password"),i.push("/verify-password"))},500)}),I(()=>{b(),window.removeEventListener("resize",u)}),(o,a)=>{const w=R("router-view");return _(),v("div",{id:"app",class:k(["wallet-app",f.value])},[V(t).loading||!s.value?(_(),v("div",B,a[0]||(a[0]=[p("div",{class:"loading-content"},[p("img",{src:C,alt:"Riftwallet",class:"loading-logo"}),p("div",{class:"loading-spinner"}),p("p",null,"Initializing Riftwallet...")],-1)]))):(_(),A(w,{key:1}))],2)}}}),G=[{path:"/",name:"Home",component:()=>e(()=>import("./HomeSidePanel-Dj-k9J02.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))},{path:"/wallet/:id",name:"WalletDetail",component:()=>e(()=>import("./WalletDetail-BzHmAYCv.js"),__vite__mapDeps([11,1,2,3,4,6,12]))},{path:"/send",name:"Send",component:()=>e(()=>import("./Send-DLPM1cfh.js"),__vite__mapDeps([13,2,3,4,1,5,6,7,14]))},{path:"/receive",name:"Receive",component:()=>e(()=>import("./Receive-Bm-z9ZGp.js"),__vite__mapDeps([15,1,2,3,4,5,6,7,16]))},{path:"/swap",name:"Swap",component:()=>e(()=>import("./Swap-ChggenUA.js"),__vite__mapDeps([17,5,2,3,4,6,7,18]))},{path:"/history",name:"History",component:()=>e(()=>import("./History-C9SLQyOm.js"),__vite__mapDeps([19,5,2,3,4,6,7,20]))},{path:"/markets",name:"Markets",component:()=>e(()=>import("./Markets-Ba7C1LTy.js"),__vite__mapDeps([21,5,2,3,4,6,7,8,1,9,22]))},{path:"/trade",name:"Trade",component:()=>e(()=>import("./Trade-Dvgu1JUV.js"),__vite__mapDeps([23,2,3,4,5,6,7,8,1,9,24]))},{path:"/discover",name:"Discover",component:()=>e(()=>import("./Discover-Bh4pwLLi.js"),__vite__mapDeps([25,5,2,3,4,6,7,8,1,9,26]))},{path:"/settings",name:"Settings",component:()=>e(()=>import("./Settings-DQKFKn2v.js"),__vite__mapDeps([27,2,3,4,1,5,6,7,8,9,28]))},{path:"/import-wallet",name:"ImportWallet",component:()=>e(()=>import("./ImportWallet-CI4WN4-j.js"),__vite__mapDeps([29,1,2,3,4,5,6,7,30]))},{path:"/import-mnemonic",name:"ImportMnemonic",component:()=>e(()=>import("./ImportMnemonic-BIA1lzcm.js"),__vite__mapDeps([31,2,3,4,1,5,6,7,32]))},{path:"/import-mnemonic-input",name:"ImportMnemonicInput",component:()=>e(()=>import("./ImportMnemonicInput-B3J1iUsj.js"),__vite__mapDeps([33,2,3,4,1,5,6,7,34]))},{path:"/import-private-key",name:"ImportPrivateKey",component:()=>e(()=>import("./ImportPrivateKey-IClOMqfx.js"),__vite__mapDeps([35,2,3,4,1,5,6,7,36]))},{path:"/import-private-key-input",name:"ImportPrivateKeyInput",component:()=>e(()=>import("./ImportPrivateKeyInput-CBAGG95z.js"),__vite__mapDeps([37,2,3,4,1,5,6,7,38]))},{path:"/wallet-import-loading",name:"WalletImportLoading",component:()=>e(()=>import("./WalletImportLoading-DcGAtt6x.js"),__vite__mapDeps([39,1,2,3,4,6,40]))},{path:"/setup-password",name:"SetupPassword",component:()=>e(()=>import("./SetupPassword-DbqDhaWm.js"),__vite__mapDeps([41,2,3,4,1,6,42]))},{path:"/verify-password",name:"VerifyPassword",component:()=>e(()=>import("./VerifyPassword-C9Foom_B.js"),__vite__mapDeps([43,2,3,4,1,6,44]))},{path:"/wallet-choice",name:"WalletChoice",component:()=>e(()=>import("./WalletChoice-CLw4bvvJ.js"),__vite__mapDeps([45,1,2,3,4,6,46]))},{path:"/select-chain",name:"SelectChain",component:()=>e(()=>import("./SelectChain-DSlHiedr.js"),__vite__mapDeps([47,1,2,3,4,5,6,7,48]))},{path:"/verify-mnemonic",name:"VerifyMnemonic",component:()=>e(()=>import("./VerifyMnemonic-CDk5bWWf.js"),__vite__mapDeps([49,1,2,3,4,5,6,7,50]))},{path:"/confirm-mnemonic",name:"ConfirmMnemonic",component:()=>e(()=>import("./ConfirmMnemonic-CKSuXoi6.js"),__vite__mapDeps([51,2,3,4,1,5,6,7,52]))},{path:"/create-wallet-password",name:"CreateWalletPassword",component:()=>e(()=>import("./CreateWalletPassword-D0N4BdCg.js"),__vite__mapDeps([53,2,3,4,1,5,6,7,54]))}],K=W({history:z(),routes:G}),m=D(N);m.use(L());m.use(K);m.use(T);m.mount("#app");
