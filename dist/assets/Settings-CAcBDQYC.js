const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/auth-6eK4OsPi.js","assets/chrome-mock-BbAbqiJG.js","assets/auth-Bt6g8DFh.css"])))=>i.map(i=>d[i]);
import{u as T,_ as V}from"./auth-handler-CmfhYZP0.js";import{d as B,r,o as N,w as E,g as I,F as c,h as g,f as D,i as s,A as u,D as v,m as p}from"./auth-6eK4OsPi.js";import{R as F}from"./ResponsiveLayout-bP3B-uVa.js";import{B as R,T as U}from"./BottomNavigation-DTf4cNDf.js";import{b as w}from"./chrome-mock-BbAbqiJG.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"settings-content"},O={class:"settings-section"},Q={class:"settings-list"},j={class:"setting-item"},q={class:"setting-toggle"},z={class:"settings-section"},J={class:"settings-list"},K={class:"setting-item"},X={class:"setting-toggle"},Y=B({__name:"Settings",props:{mode:{}},setup(m){const k=m,f=window.location.href.includes("sidepanel")||window.location.pathname.includes("sidepanel"),d=k.mode||(f?"sidepanel":"popup"),n=T(),o=r(!0),a=r(30),l=r(!0),y=async()=>{try{const e=(await w().get(["settings"])).settings||{};o.value=e.autoLock!==!1,a.value=e.lockTimeout||30,l.value=e.darkMode!==!1,console.log("Settings loaded:",e)}catch(i){console.error("Failed to load settings:",i)}},b=async()=>{try{const i=w(),t={autoLock:o.value,lockTimeout:a.value,darkMode:l.value};await i.set({settings:t}),console.log("Settings saved:",t)}catch(i){console.error("Failed to save settings:",i)}};N(()=>{y()}),E([o,a,l],()=>{b()},{deep:!0});const h=()=>{n.push("/select-chain")},S=()=>{n.push("/import-wallet")},x=()=>{console.log("Export wallet...")},C=()=>{n.push("/change-password")},P=()=>{console.log("Manage networks...")},M=()=>{window.open("https://www.riftwallet.io/privacy-policy/","_blank")},W=()=>{window.open("https://www.riftwallet.io/about/","_blank")},L=async()=>{try{console.log("🔒 开始锁定钱包 (Popup模式)");const{useAuthStore:i}=await V(async()=>{const{useAuthStore:e}=await import("./auth-6eK4OsPi.js").then(A=>A.Q);return{useAuthStore:e}},__vite__mapDeps([0,1,2]));await i().clearPasswordSession(),console.log("🔒 密码会话已清除"),console.log("🔒 准备跳转到密码验证页面");try{await n.replace("/verify-password"),console.log("🔒 路由跳转成功")}catch(e){console.warn("🔒 路由跳转失败，尝试强制导航:",e),window.location.hash="#/verify-password"}console.log("Wallet locked successfully")}catch(i){console.error("Failed to lock wallet:",i),window.location.hash="#/verify-password"}};return(i,t)=>(D(),I(F,{title:"Wallet","show-header":!0,"show-footer":!0,mode:g(d),scrollable:!0},{header:c(()=>[p(U,{mode:g(d)},null,8,["mode"])]),footer:c(()=>[p(R)]),default:c(()=>[s("div",H,[s("div",{class:"settings-section"},[t[5]||(t[5]=s("h3",{class:"section-title"},"Wallet Management",-1)),s("div",{class:"settings-list"},[s("div",{class:"setting-item",onClick:h},t[2]||(t[2]=[s("div",{class:"setting-icon"},[s("i",{class:"ri-add-line"})],-1),s("div",{class:"setting-info"},[s("div",{class:"setting-name"},"Create Wallet"),s("div",{class:"setting-desc"},"Generate a new wallet")],-1),s("i",{class:"ri-arrow-right-s-line"},null,-1)])),s("div",{class:"setting-item",onClick:S},t[3]||(t[3]=[s("div",{class:"setting-icon"},[s("i",{class:"ri-download-line"})],-1),s("div",{class:"setting-info"},[s("div",{class:"setting-name"},"Import Wallet"),s("div",{class:"setting-desc"},"Import existing wallet")],-1),s("i",{class:"ri-arrow-right-s-line"},null,-1)])),s("div",{class:"setting-item",onClick:x},t[4]||(t[4]=[s("div",{class:"setting-icon"},[s("i",{class:"ri-upload-line"})],-1),s("div",{class:"setting-info"},[s("div",{class:"setting-name"},"Export Wallet"),s("div",{class:"setting-desc"},"Backup your wallet")],-1),s("i",{class:"ri-arrow-right-s-line"},null,-1)]))])]),s("div",O,[t[10]||(t[10]=s("h3",{class:"section-title"},"Security",-1)),s("div",Q,[s("div",{class:"setting-item",onClick:C},t[6]||(t[6]=[s("div",{class:"setting-icon"},[s("i",{class:"ri-lock-line"})],-1),s("div",{class:"setting-info"},[s("div",{class:"setting-name"},"Change Password"),s("div",{class:"setting-desc"},"Update your password")],-1),s("i",{class:"ri-arrow-right-s-line"},null,-1)])),s("div",j,[t[8]||(t[8]=s("div",{class:"setting-icon"},[s("i",{class:"ri-shield-line"})],-1)),t[9]||(t[9]=s("div",{class:"setting-info"},[s("div",{class:"setting-name"},"Auto-lock"),s("div",{class:"setting-desc"},"Lock wallet after 30 minutes of inactivity")],-1)),s("div",q,[u(s("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),id:"autoLock"},null,512),[[v,o.value]]),t[7]||(t[7]=s("label",{for:"autoLock",class:"toggle-label"},null,-1))])])])]),s("div",{class:"settings-section"},[t[12]||(t[12]=s("h3",{class:"section-title"},"Network",-1)),s("div",{class:"settings-list"},[s("div",{class:"setting-item",onClick:P},t[11]||(t[11]=[s("div",{class:"setting-icon"},[s("i",{class:"ri-global-line"})],-1),s("div",{class:"setting-info"},[s("div",{class:"setting-name"},"Manage Networks"),s("div",{class:"setting-desc"},"Add or remove networks")],-1),s("i",{class:"ri-arrow-right-s-line"},null,-1)]))])]),s("div",z,[t[18]||(t[18]=s("h3",{class:"section-title"},"Preferences",-1)),s("div",J,[s("div",K,[t[14]||(t[14]=s("div",{class:"setting-icon"},[s("i",{class:"ri-palette-line"})],-1)),t[15]||(t[15]=s("div",{class:"setting-info"},[s("div",{class:"setting-name"},"Dark Mode"),s("div",{class:"setting-desc"},"Toggle dark theme")],-1)),s("div",X,[u(s("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=e=>l.value=e),id:"darkMode"},null,512),[[v,l.value]]),t[13]||(t[13]=s("label",{for:"darkMode",class:"toggle-label"},null,-1))])]),s("div",{class:"setting-item",onClick:M},t[16]||(t[16]=[s("div",{class:"setting-icon"},[s("i",{class:"ri-shield-user-line"})],-1),s("div",{class:"setting-info"},[s("div",{class:"setting-name"},"Privacy Policy"),s("div",{class:"setting-desc"},"View our privacy policy")],-1),s("i",{class:"ri-external-link-line"},null,-1)])),s("div",{class:"setting-item",onClick:W},t[17]||(t[17]=[s("div",{class:"setting-icon"},[s("i",{class:"ri-information-line"})],-1),s("div",{class:"setting-info"},[s("div",{class:"setting-name"},"About"),s("div",{class:"setting-desc"},"Version and info")],-1),s("i",{class:"ri-external-link-line"},null,-1)]))])]),s("div",{class:"lock-section"},[s("button",{class:"lock-button",onClick:L},t[19]||(t[19]=[s("i",{class:"ri-lock-line"},null,-1),s("span",null,"Lock Wallet",-1)]))])])]),_:1},8,["mode"]))}}),is=G(Y,[["__scopeId","data-v-9c0a2386"]]);export{is as default};
