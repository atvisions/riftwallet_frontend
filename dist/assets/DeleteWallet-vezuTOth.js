import{d as D,u as T,r as i,o as I,e as d,m as W,i as e,C as _,G as u,h as A,K as N,A as w,E as h,J as k,f as c}from"./auth-DRfzTYJF.js";import{a as C,e as P,u as S}from"./preload-helper-DW6y3PHv.js";import{P as x}from"./PageHeader-BUXdqk4W.js";import{C as L,h as V,A as O,j as B}from"./chrome-mock-0jeXDaAI.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"delete-wallet-page"},j={class:"content"},G={key:0,class:"wallet-preview"},R={class:"wallet-avatar"},U=["src","alt"],q={class:"wallet-info"},H={class:"wallet-address"},J={class:"wallet-chain"},$={class:"form-group"},K=["disabled"],Z={class:"form-group"},z=["disabled"],Q={key:0,class:"error-message"},X=["disabled"],Y={key:0,class:"loading-spinner"},ee={key:1,class:"ri-delete-bin-line"},te="/icons/icon128.png",ae=D({__name:"DeleteWallet",setup(se){const g=P(),m=S(),o=C(),f=T(),a=i(null),v=i(""),r=i(""),l=i(!1),p=i(""),E=s=>L[s]?.name||s,y=async()=>{if(!(!a.value||v.value!=="DELETE"||!r.value.trim())){l.value=!0,p.value="";try{if(!f.deviceId)throw new Error("Device ID not found");const s=await fetch(`${O.API_BASE_URL}${B.DELETE_WALLET(a.value.id)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_id:f.deviceId,payment_password:r.value})}),t=await s.json();if(!s.ok)throw new Error(t.message||"Failed to delete wallet");if(o.removeWallet(a.value.id),o.currentWallet?.id===a.value.id){const n=o.wallets.filter(b=>b.id!==a.value.id);n.length>0?o.setCurrentWallet(n[0]):o.setCurrentWallet(null)}m.push("/")}catch(s){p.value=s instanceof Error?s.message:"Failed to delete wallet"}finally{l.value=!1}}};return I(()=>{const s=parseInt(g.params.id);a.value=o.wallets.find(t=>t.id===s)||null,a.value||m.push("/")}),(s,t)=>(c(),d("div",M,[W(x,{title:"Delete Wallet"}),e("div",j,[a.value?(c(),d("div",G,[e("div",R,[e("img",{src:a.value.avatar||te,alt:a.value.name},null,8,U)]),e("div",q,[e("h3",null,u(a.value.name),1),e("p",H,u(A(V)(a.value.address)),1),e("p",J,u(E(a.value.chain)),1)])])):_("",!0),t[4]||(t[4]=e("div",{class:"danger-warning"},[e("div",{class:"warning-icon"},[e("i",{class:"ri-error-warning-line"})]),e("div",{class:"warning-content"},[e("h4",null,"Danger Zone"),e("p",null,"This action cannot be undone. Make sure you have backed up your private key or mnemonic phrase before deleting this wallet.")])],-1)),e("form",{onSubmit:N(y,["prevent"]),class:"delete-form"},[e("div",$,[t[2]||(t[2]=e("label",{for:"confirmText"},'Type "DELETE" to confirm',-1)),w(e("input",{id:"confirmText","onUpdate:modelValue":t[0]||(t[0]=n=>v.value=n),type:"text",placeholder:"Type DELETE to confirm",disabled:l.value,required:""},null,8,K),[[h,v.value]])]),e("div",Z,[t[3]||(t[3]=e("label",{for:"password"},"Payment Password",-1)),w(e("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=n=>r.value=n),type:"password",placeholder:"Enter your payment password",disabled:l.value,required:""},null,8,z),[[h,r.value]])]),p.value?(c(),d("div",Q,u(p.value),1)):_("",!0),e("button",{type:"submit",class:"delete-btn",disabled:l.value||v.value!=="DELETE"||!r.value.trim()},[l.value?(c(),d("div",Y)):(c(),d("i",ee)),k(" "+u(l.value?"Deleting...":"Delete Wallet"),1)],8,X)],32)])]))}}),de=F(ae,[["__scopeId","data-v-2ab09701"]]);export{de as default};
