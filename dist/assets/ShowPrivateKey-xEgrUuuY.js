import{d as x,u as A,r as l,o as N,e as i,m as E,i as e,C as p,G as o,h as m,K as T,A as D,E as V,J as O,n as w,f as r}from"./auth-DRfzTYJF.js";import{a as R,e as B,u as F}from"./preload-helper-DtVLuan9.js";import{P as H}from"./PageHeader-B6QzkLIr.js";import{C as j,k as G,h as M,A as W,j as q}from"./chrome-mock-0jeXDaAI.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const J={class:"show-private-key-page"},U={class:"content"},$={key:0,class:"wallet-preview"},L={class:"wallet-avatar"},Y=["src","alt"],Q={class:"wallet-info"},X={class:"wallet-address"},Z={class:"wallet-chain"},ee={class:"form-group"},se=["disabled"],te={key:0,class:"error-message"},ae=["disabled"],oe={key:0,class:"loading-spinner"},le={key:1,class:"ri-key-line"},ie={key:2,class:"debug-info",style:{background:"rgba(255,255,255,0.1)",padding:"10px",margin:"10px 0","border-radius":"5px","font-size":"12px"}},re={key:3,class:"private-key-section"},ne={class:"private-key-container"},ue={class:"private-key-display"},de={class:"private-key-actions"},ve=["title"],ce=["title"],pe="/icons/icon128.png",ye=x({__name:"ShowPrivateKey",setup(_e){const g=B(),k=F(),b=R(),h=A(),a=l(null),u=l(""),d=l(""),n=l(!1),v=l(""),y=l(!1),c=l(!1),_=l(!1),P=!1,S=t=>j[t]?.name||t,K=async()=>{if(!(!a.value||!u.value.trim())){n.value=!0,v.value="",console.log("Starting private key request for wallet:",a.value.id),console.log("Device ID:",h.deviceId);try{if(!h.deviceId)throw new Error("Device ID not found");const t=await fetch(`${W.API_BASE_URL}${q.SHOW_PRIVATE_KEY(a.value.id)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_id:h.deviceId,payment_password:u.value})}),s=await t.json();if(console.log("Show private key response:",{status:t.status,statusText:t.statusText,data:s}),!t.ok)throw new Error(s.message||"Failed to show private key");let f=s.private_key||s.data?.private_key||s.data;if(!f)throw console.error("Private key not found in response:",s),new Error("Private key not found in response");d.value=f,y.value=!0,u.value=""}catch(t){v.value=t instanceof Error?t.message:"Failed to show private key"}finally{n.value=!1}}},I=()=>{c.value=!c.value},C=async()=>{if(!d.value)return;await G(d.value)&&(_.value=!0,setTimeout(()=>{_.value=!1},2e3))};return N(()=>{const t=parseInt(g.params.id);a.value=b.wallets.find(s=>s.id===t)||null,a.value||k.push("/")}),(t,s)=>(r(),i("div",J,[E(H,{title:"Show Private Key"}),e("div",U,[a.value?(r(),i("div",$,[e("div",L,[e("img",{src:a.value.avatar||pe,alt:a.value.name},null,8,Y)]),e("div",Q,[e("h3",null,o(a.value.name),1),e("p",X,o(m(M)(a.value.address)),1),e("p",Z,o(S(a.value.chain)),1)])])):p("",!0),s[4]||(s[4]=e("div",{class:"security-warning"},[e("div",{class:"warning-icon"},[e("i",{class:"ri-shield-check-line"})]),e("div",{class:"warning-content"},[e("h4",null,"Security Warning"),e("p",null,"Never share your private key with anyone. Anyone with your private key can access your wallet and steal your funds.")])],-1)),y.value?p("",!0):(r(),i("form",{key:1,onSubmit:T(K,["prevent"]),class:"password-form"},[e("div",ee,[s[1]||(s[1]=e("label",{for:"password"},"Payment Password",-1)),D(e("input",{id:"password","onUpdate:modelValue":s[0]||(s[0]=f=>u.value=f),type:"password",placeholder:"Enter your payment password",disabled:n.value,required:""},null,8,se),[[V,u.value]])]),v.value?(r(),i("div",te,o(v.value),1)):p("",!0),e("button",{type:"submit",class:"show-btn",disabled:n.value||!u.value.trim()},[n.value?(r(),i("div",oe)):(r(),i("i",le)),O(" "+o(n.value?"Verifying...":"Show Private Key"),1)],8,ae)],32)),m(P)?(r(),i("div",ie,[s[2]||(s[2]=e("p",null,"Debug Info:",-1)),e("p",null,"privateKeyRevealed: "+o(y.value),1),e("p",null,"privateKey length: "+o(d.value.length),1),e("p",null,"loading: "+o(n.value),1),e("p",null,"error: "+o(v.value),1)])):p("",!0),y.value&&d.value?(r(),i("div",re,[e("div",ne,[s[3]||(s[3]=e("label",null,"Private Key",-1)),e("div",ue,[e("div",{class:w(["private-key-text",{blurred:!c.value}])},o(d.value),3),e("div",de,[e("button",{class:"toggle-visibility-btn",onClick:I,title:c.value?"Hide Private Key":"Show Private Key"},[e("i",{class:w(c.value?"ri-eye-off-line":"ri-eye-line")},null,2)],8,ve),e("button",{class:"copy-btn",onClick:C,title:_.value?"Copied!":"Copy Private Key"},[e("i",{class:w(_.value?"ri-check-line":"ri-file-copy-line")},null,2)],8,ce)])])])])):p("",!0)])]))}}),ke=z(ye,[["__scopeId","data-v-b21234f4"]]);export{ke as default};
