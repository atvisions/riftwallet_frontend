import{d as P,r as l,c as S,g as W,F as _,f as r,i as o,e as n,C as y,I as D,n as f,G as i,H as M,A as k,E as R,M as x,J as A}from"./auth-DA2mZ09H.js";import{a as $,u as N}from"./preload-helper-DTCqTb4O.js";import{R as T}from"./ResponsiveLayout-By-qHHPy.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chrome-mock-BbAbqiJG.js";const H={class:"page-header"},K={class:"header-left"},F={class:"page-content"},O={class:"form-container"},U={class:"form-group"},z={class:"chain-selector"},G=["onClick"],J=["src","alt"],j={class:"chain-name"},q={class:"chain-code"},Q={class:"form-group"},X={key:0,class:"error-message"},Y={class:"form-group"},Z={class:"password-input-container"},ee=["type"],oe={key:0,class:"error-message"},se=["disabled"],ae={key:0,class:"ri-loader-4-line spinning"},te={key:1,class:"ri-download-line"},le={key:0,class:"error-alert"},re=P({__name:"ImportMnemonic",setup(ne){const C=N(),d=$(),c=l("ETH"),u=l(""),p=l(""),h=l(!1),m=l(!1),t=l(""),v=l(""),w=l(""),b=[{code:"ETH",name:"Ethereum",logo:"https://www.riftwallet.io/media/chain_logos/ETH.png"},{code:"BSC",name:"BNB Chain",logo:"https://www.riftwallet.io/media/chain_logos/BSC.png"},{code:"BASE",name:"Base",logo:"https://www.riftwallet.io/media/chain_logos/BASE.png"},{code:"SOL",name:"Solana",logo:"https://www.riftwallet.io/media/chain_logos/SOL.png"},{code:"KDA",name:"Kadena",logo:"https://www.riftwallet.io/media/chain_logos/KDA.png"}],I=S(()=>u.value.trim()&&p.value.trim()&&c.value),E=()=>u.value.trim().split(/\s+/).length!==12?(v.value="Recovery phrase must contain 12 words",!1):(v.value="",!0),B=()=>p.value.length<8?(w.value="Password must be at least 8 characters",!1):(w.value="",!0),L=async()=>{if(!(!E()||!B()))try{m.value=!0,t.value="";const a={mnemonic:u.value.trim(),chain:c.value,payment_password:p.value,kadena_chain_id:c.value==="KDA"?"0":void 0},e=await d.importWallet(a);await d.loadWallets(!1);const s=d.wallets.find(g=>g.address===e.address&&g.chain===e.chain);s&&(await d.setCurrentWallet(s),console.log("✅ Imported wallet set as current:",s.id,s.chain,s.name),console.log("⏳ Loading wallet balance before redirect..."),await d.loadWalletBalance(s.id),console.log("✅ Wallet balance loaded, redirecting to home")),console.log("Wallet import completed, redirecting to home"),C.push("/")}catch(a){const e=a instanceof Error?a.message:"Import failed";e.toLowerCase().includes("password")?t.value="Incorrect password. Please check your payment password.":e.toLowerCase().includes("invalid")&&e.toLowerCase().includes("private key")?t.value="Invalid private key. Please check your input.":e.toLowerCase().includes("invalid")&&e.toLowerCase().includes("mnemonic")?t.value="Invalid recovery phrase. Please check your 12-word phrase.":e.toLowerCase().includes("recovery phrase")?t.value="Invalid recovery phrase. Please check if the words are correct.":t.value=e,console.error("Import wallet error:",a)}finally{m.value=!1}};return(a,e)=>(r(),W(T,{title:"Import Recovery Phrase","show-header":!0,"show-footer":!0,scrollable:!0,onBack:e[4]||(e[4]=s=>a.$router.go(-1))},{header:_(()=>[o("div",H,[o("div",K,[o("button",{onClick:e[0]||(e[0]=s=>a.$router.go(-1)),class:"back-button"},e[5]||(e[5]=[o("i",{class:"ri-arrow-left-line"},null,-1)])),e[6]||(e[6]=o("h1",{class:"header-title"},"Import Recovery Phrase",-1))])])]),default:_(()=>[o("div",F,[o("div",O,[o("div",U,[e[7]||(e[7]=o("label",null,"Select Blockchain Network",-1)),o("div",z,[(r(),n(M,null,D(b,s=>o("div",{key:s.code,class:f(["chain-option",{active:c.value===s.code}]),onClick:g=>c.value=s.code},[o("img",{src:s.logo,alt:s.name,class:"chain-logo"},null,8,J),o("span",j,i(s.name),1),o("span",q,i(s.code),1)],10,G)),64))])]),o("div",Q,[e[8]||(e[8]=o("label",null,"Recovery Phrase",-1)),e[9]||(e[9]=o("p",{class:"form-hint"},"Enter your 12-word recovery phrase, separated by spaces",-1)),k(o("textarea",{"onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s),class:f(["mnemonic-input",{error:v.value}]),placeholder:"Enter your 12-word recovery phrase...",rows:"4"},null,2),[[R,u.value]]),v.value?(r(),n("div",X,i(v.value),1)):y("",!0)]),o("div",Y,[e[10]||(e[10]=o("label",null,"Payment Password",-1)),e[11]||(e[11]=o("p",{class:"form-hint"},"Enter your payment password to protect the wallet",-1)),o("div",Z,[k(o("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>p.value=s),type:h.value?"text":"password",class:f(["password-input",{error:w.value}]),placeholder:"Enter payment password"},null,10,ee),[[x,p.value]]),o("button",{type:"button",class:"password-toggle",onClick:e[3]||(e[3]=s=>h.value=!h.value)},[o("i",{class:f(h.value?"ri-eye-off-line":"ri-eye-line")},null,2)])]),w.value?(r(),n("div",oe,i(w.value),1)):y("",!0)]),o("button",{class:"import-btn",disabled:!I.value||m.value,onClick:L},[m.value?(r(),n("i",ae)):(r(),n("i",te)),A(" "+i(m.value?"Importing & Loading Wallet...":"Import Wallet"),1)],8,se),t.value?(r(),n("div",le,[e[12]||(e[12]=o("i",{class:"ri-error-warning-line"},null,-1)),o("span",null,i(t.value),1)])):y("",!0)])])]),_:1}))}}),me=V(re,[["__scopeId","data-v-dfc0a267"]]);export{me as default};
