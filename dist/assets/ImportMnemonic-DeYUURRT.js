import{d as L,v as l,p as P,c as r,g as o,B as y,I as S,J as W,z as _,D,G as g,E as i,M,F as x,b as n}from"./auth-tCBxrB_D.js";import{a as A,u as N}from"./preload-helper-IGrWFsVS.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chrome-mock-BOlt1wEj.js";import"./index-CpkLCnFh.js";const V={class:"import-mnemonic-page"},K={class:"header"},R={class:"content"},$={class:"form-container"},H={class:"form-group"},z={class:"chain-selector"},F=["onClick"],O=["src","alt"],U={class:"chain-name"},G={class:"chain-code"},J={class:"form-group"},j={key:0,class:"error-message"},q={class:"form-group"},Q={class:"password-input-container"},X=["type"],Y={key:0,class:"error-message"},Z=["disabled"],ee={key:0,class:"ri-loader-4-line spinning"},oe={key:1,class:"ri-download-line"},se={key:0,class:"error-alert"},ae=L({__name:"ImportMnemonic",setup(te){const k=N(),d=A(),c=l("ETH"),u=l(""),p=l(""),h=l(!1),m=l(!1),a=l(""),v=l(""),w=l(""),C=[{code:"ETH",name:"Ethereum",logo:"https://www.riftwallet.io/media/chain_logos/ETH.png"},{code:"BSC",name:"BNB Chain",logo:"https://www.riftwallet.io/media/chain_logos/BSC.png"},{code:"BASE",name:"Base",logo:"https://www.riftwallet.io/media/chain_logos/BASE.png"},{code:"SOL",name:"Solana",logo:"https://www.riftwallet.io/media/chain_logos/SOL.png"},{code:"KDA",name:"Kadena",logo:"https://www.riftwallet.io/media/chain_logos/KDA.png"}],b=P(()=>u.value.trim()&&p.value.trim()&&c.value),I=()=>u.value.trim().split(/\s+/).length!==12?(v.value="Recovery phrase must contain 12 words",!1):(v.value="",!0),E=()=>p.value.length<8?(w.value="Password must be at least 8 characters",!1):(w.value="",!0),B=async()=>{if(!(!I()||!E()))try{m.value=!0,a.value="";const t={mnemonic:u.value.trim(),chain:c.value,payment_password:p.value,kadena_chain_id:c.value==="KDA"?"0":void 0},e=await d.importWallet(t);await d.loadWallets(!1);const s=d.wallets.find(f=>f.address===e.address&&f.chain===e.chain);s&&(await d.setCurrentWallet(s),console.log("✅ Imported wallet set as current:",s.id,s.chain,s.name),console.log("⏳ Loading wallet balance before redirect..."),await d.loadWalletBalance(s.id),console.log("✅ Wallet balance loaded, redirecting to home")),console.log("Wallet import completed, redirecting to home"),k.push("/")}catch(t){const e=t instanceof Error?t.message:"Import failed";e.toLowerCase().includes("password")?a.value="Incorrect password. Please check your payment password.":e.toLowerCase().includes("invalid")&&e.toLowerCase().includes("private key")?a.value="Invalid private key. Please check your input.":e.toLowerCase().includes("invalid")&&e.toLowerCase().includes("mnemonic")?a.value="Invalid recovery phrase. Please check your 12-word phrase.":e.toLowerCase().includes("recovery phrase")?a.value="Invalid recovery phrase. Please check if the words are correct.":a.value=e,console.error("Import wallet error:",t)}finally{m.value=!1}};return(t,e)=>(n(),r("div",V,[o("div",K,[o("button",{onClick:e[0]||(e[0]=s=>t.$router.go(-1)),class:"back-btn"},e[4]||(e[4]=[o("i",{class:"ri-arrow-left-line"},null,-1)])),e[5]||(e[5]=o("h1",null,"Import Recovery Phrase",-1))]),o("div",R,[o("div",$,[o("div",H,[e[6]||(e[6]=o("label",null,"Select Blockchain Network",-1)),o("div",z,[(n(),r(S,null,W(C,s=>o("div",{key:s.code,class:g(["chain-option",{active:c.value===s.code}]),onClick:f=>c.value=s.code},[o("img",{src:s.logo,alt:s.name,class:"chain-logo"},null,8,O),o("span",U,i(s.name),1),o("span",G,i(s.code),1)],10,F)),64))])]),o("div",J,[e[7]||(e[7]=o("label",null,"Recovery Phrase",-1)),e[8]||(e[8]=o("p",{class:"form-hint"},"Enter your 12-word recovery phrase, separated by spaces",-1)),_(o("textarea",{"onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s),class:g(["mnemonic-input",{error:v.value}]),placeholder:"Enter your 12-word recovery phrase...",rows:"4"},null,2),[[D,u.value]]),v.value?(n(),r("div",j,i(v.value),1)):y("",!0)]),o("div",q,[e[9]||(e[9]=o("label",null,"Payment Password",-1)),e[10]||(e[10]=o("p",{class:"form-hint"},"Enter your payment password to protect the wallet",-1)),o("div",Q,[_(o("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>p.value=s),type:h.value?"text":"password",class:g(["password-input",{error:w.value}]),placeholder:"Enter payment password"},null,10,X),[[M,p.value]]),o("button",{type:"button",class:"password-toggle",onClick:e[3]||(e[3]=s=>h.value=!h.value)},[o("i",{class:g(h.value?"ri-eye-off-line":"ri-eye-line")},null,2)])]),w.value?(n(),r("div",Y,i(w.value),1)):y("",!0)]),o("button",{class:"import-btn",disabled:!b.value||m.value,onClick:B},[m.value?(n(),r("i",ee)):(n(),r("i",oe)),x(" "+i(m.value?"Importing & Loading Wallet...":"Import Wallet"),1)],8,Z),a.value?(n(),r("div",se,[e[11]||(e[11]=o("i",{class:"ri-error-warning-line"},null,-1)),o("span",null,i(a.value),1)])):y("",!0)])])]))}}),ce=T(ae,[["__scopeId","data-v-bd42f35f"]]);export{ce as default};
