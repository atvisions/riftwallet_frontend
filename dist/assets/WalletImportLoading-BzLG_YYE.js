import{a as b,b as C,u as I}from"./popup-TD7wOOC_.js";import{A as W}from"./index-DcL2QsEm.js";import{d as S,b as u,o as T,k as i,q as e,A as h,D as r,E as m,I as A,l as c}from"./main-Bf4zo9mQ.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chrome-mock-B1Y85l16.js";const B={class:"wallet-import-loading-page"},P={class:"loading-container"},E={key:0,class:"wallet-info"},F={class:"wallet-card"},$=["src","alt"],q={key:1,class:"wallet-placeholder"},x={class:"wallet-details"},L={class:"wallet-chain"},N={class:"wallet-address"},D={class:"loading-section"},V={class:"progress-steps"},j={key:1,class:"error-section"},M={class:"error-message"},O=S({__name:"WalletImportLoading",setup(U){const p=I(),v=C(),g=b(),a=u(null),l=u(1),d=u(""),f=u(!1),_=t=>t?`${t.slice(0,6)}...${t.slice(-4)}`:"",w=async t=>{try{f.value=!0,d.value="",l.value=1,await new Promise(n=>setTimeout(n,1e3));const s=await fetch(`${W.API_BASE_URL}/wallets/${t}/refresh_balances/`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!s.ok)throw new Error(`Failed to refresh balance: ${s.status}`);const o=await s.json();if(o.state!=="success")throw new Error(o.message||"Failed to refresh balance");l.value=2,await new Promise(n=>setTimeout(n,1e3)),await g.loadWalletBalance(t),l.value=3,await new Promise(n=>setTimeout(n,500)),p.push("/")}catch(s){console.error("Failed to refresh wallet balance:",s),d.value=s instanceof Error?s.message:"Failed to refresh wallet data",l.value=1}finally{f.value=!1}},y=()=>{a.value?.id&&w(a.value.id)},k=()=>{p.push("/")};return T(async()=>{const t=v.query.walletId,s=v.query.address,o=v.query.chain;if(!t||!s||!o){p.push("/");return}a.value={id:parseInt(t),address:s,chain:o,name:`${o} Wallet`},await w(parseInt(t))}),(t,s)=>(c(),i("div",B,[e("div",P,[s[9]||(s[9]=e("div",{class:"success-icon"},[e("i",{class:"ri-check-line"})],-1)),s[10]||(s[10]=e("h1",null,"Wallet Imported Successfully!",-1)),a.value?(c(),i("div",E,[e("div",F,[a.value.avatar?(c(),i("img",{key:0,src:a.value.avatar,alt:a.value.name,class:"wallet-avatar"},null,8,$)):(c(),i("div",q,r(a.value.chain.charAt(0).toUpperCase()),1)),e("div",x,[e("h3",null,r(a.value.name||"My Wallet"),1),e("p",L,r(a.value.chain),1),e("p",N,r(_(a.value.address)),1)])])])):h("",!0),e("div",D,[s[3]||(s[3]=e("div",{class:"loading-spinner"},[e("i",{class:"ri-loader-4-line spinning"})],-1)),s[4]||(s[4]=e("h2",null,"Refreshing Wallet Data...",-1)),s[5]||(s[5]=e("p",{class:"loading-description"}," We're fetching the latest balance and token information from the blockchain. This may take a few moments. ",-1)),e("div",V,[e("div",{class:m(["step",{active:l.value>=1,completed:l.value>1}])},s[0]||(s[0]=[e("div",{class:"step-icon"},[e("i",{class:"ri-database-2-line"})],-1),e("span",null,"Syncing Balance",-1)]),2),e("div",{class:m(["step",{active:l.value>=2,completed:l.value>2}])},s[1]||(s[1]=[e("div",{class:"step-icon"},[e("i",{class:"ri-coins-line"})],-1),e("span",null,"Loading Tokens",-1)]),2),e("div",{class:m(["step",{active:l.value>=3,completed:l.value>3}])},s[2]||(s[2]=[e("div",{class:"step-icon"},[e("i",{class:"ri-check-line"})],-1),e("span",null,"Complete",-1)]),2)])]),d.value?(c(),i("div",j,[s[7]||(s[7]=e("div",{class:"error-icon"},[e("i",{class:"ri-error-warning-line"})],-1)),s[8]||(s[8]=e("h2",null,"Refresh Failed",-1)),e("p",M,r(d.value),1),e("div",{class:"error-actions"},[e("button",{class:"retry-btn",onClick:y},s[6]||(s[6]=[e("i",{class:"ri-refresh-line"},null,-1),A(" Retry ")])),e("button",{class:"skip-btn",onClick:k}," Skip & Continue ")])])):h("",!0)])]))}}),Q=R(O,[["__scopeId","data-v-f0d572e9"]]);export{Q as default};
