import{u as S}from"./preload-helper-BHn8pG3Y.js";import{d as B,u as F,r,o as x,f as A,E as f,e as a,h as s,c as n,B as u,H as E,I,G as h,J as p,F as g}from"./auth-B5jpq_BM.js";import{A as k}from"./index-DSub5CB9.js";import{P}from"./PageContainer-Qetv8PV3.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chrome-mock-BLIE_U1K.js";const L={key:0,class:"chains-container"},R=["onClick"],T={class:"card-content"},j={class:"chain-icon"},G=["src","alt"],O={key:1,class:"chain-placeholder"},U={class:"chain-info"},V={class:"chain-selector"},$={key:0,class:"ri-check-line"},J={key:1,class:"loading-container"},M={key:2,class:"error-container"},z={class:"footer"},D=["disabled"],H={key:0},q={key:1},K=B({__name:"SelectChain",setup(Q){const v=S(),y=F(),c=r(!1),d=r(!1),l=r(""),m=r([]),i=r(null),C=()=>{v.go(-1)},_=async()=>{try{c.value=!0,l.value="";const e=await(await fetch(`${k.API_BASE_URL}/wallets/get_supported_chains/`)).json();if(e.state==="success")m.value=e.data||[];else throw new Error(e.message||"Failed to load supported chains")}catch(t){l.value=t instanceof Error?t.message:"Failed to load chains",console.error("Failed to load supported chains:",t)}finally{c.value=!1}},w=t=>{i.value=t},b=async()=>{if(i.value)try{d.value=!0;const e=await(await fetch(`${k.API_BASE_URL}/wallets/select_chain/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_id:y.deviceId,chain:i.value.chain})})).json();if(e.state==="success")console.log("Chain selected successfully:",e.data),console.log("Generated mnemonic:",e.data.mnemonic),sessionStorage.setItem("generated_mnemonic",e.data.mnemonic),sessionStorage.setItem("selected_chain",i.value.chain),v.push("/verify-mnemonic");else throw new Error(e.message||"Failed to select chain")}catch(t){l.value=t instanceof Error?t.message:"Failed to select chain",console.error("Failed to select chain:",t)}finally{d.value=!1}};return x(()=>{_()}),(t,e)=>(a(),A(P,{title:"Select Blockchain","show-header":!0,"show-footer":!0,"show-back-button":!0,"custom-back-action":C,"max-width":"420px",padding:"24px",centered:!0},{footer:f(()=>[s("div",z,[s("button",{class:"continue-btn",disabled:!i.value||d.value,onClick:b},[d.value?(a(),n("span",H,e[6]||(e[6]=[s("i",{class:"ri-loader-4-line animate-spin"},null,-1),p(" Processing... ")]))):(a(),n("span",q,e[7]||(e[7]=[p(" Continue "),s("i",{class:"ri-arrow-right-line"},null,-1)])))],8,D)])]),default:f(()=>[e[8]||(e[8]=s("div",{class:"description"},[s("p",null,"Choose the blockchain network for your new wallet")],-1)),c.value?u("",!0):(a(),n("div",L,[(a(!0),n(E,null,I(m.value,o=>(a(),n("div",{key:o.chain,class:g(["chain-card",{active:i.value?.chain===o.chain}]),onClick:W=>w(o)},[e[1]||(e[1]=s("div",{class:"card-background"},null,-1)),s("div",T,[s("div",j,[o.logo?(a(),n("img",{key:0,src:o.logo,alt:o.name},null,8,G)):(a(),n("div",O,h((o.chain||o.name||"C").charAt(0).toUpperCase()),1)),e[0]||(e[0]=s("div",{class:"icon-glow"},null,-1))]),s("div",U,[s("h3",null,h(o.name),1),s("p",null,h(o.chain),1)]),s("div",V,[s("div",{class:g(["radio-circle",{selected:i.value?.chain===o.chain}])},[i.value?.chain===o.chain?(a(),n("i",$)):u("",!0)],2)])]),e[2]||(e[2]=s("div",{class:"card-decoration"},[s("div",{class:"decoration-circle"}),s("div",{class:"decoration-line"})],-1))],10,R))),128))])),c.value?(a(),n("div",J,e[3]||(e[3]=[s("div",{class:"loading-spinner"},null,-1),s("p",null,"Loading supported chains...",-1)]))):u("",!0),l.value?(a(),n("div",M,[e[5]||(e[5]=s("div",{class:"error-icon"},[s("i",{class:"ri-error-warning-line"})],-1)),s("p",null,h(l.value),1),s("button",{class:"retry-btn",onClick:_},e[4]||(e[4]=[s("i",{class:"ri-refresh-line"},null,-1),p(" Retry ")]))])):u("",!0)]),_:1,__:[8]}))}}),oe=N(K,[["__scopeId","data-v-870dfbf0"]]);export{oe as default};
