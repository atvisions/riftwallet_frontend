import{u as b}from"./preload-helper-IGrWFsVS.js";import{d as S,u as F,v as r,o as A,c as t,g as s,B as u,I as B,J as E,E as v,F as p,b as a,G as f}from"./auth-tCBxrB_D.js";import{A as g}from"./index-CpkLCnFh.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chrome-mock-BOlt1wEj.js";const P={class:"select-chain-page"},N={class:"content"},x={key:0,class:"chains-container"},L=["onClick"],R={class:"card-content"},T={class:"chain-icon"},j=["src","alt"],G={key:1,class:"chain-placeholder"},O={class:"chain-info"},U={class:"chain-selector"},V={key:0,class:"ri-check-line"},$={key:1,class:"loading-container"},J={key:2,class:"error-container"},M={class:"footer"},z=["disabled"],D={key:0},q={key:1},H=S({__name:"SelectChain",setup(K){const h=b(),y=F(),c=r(!1),d=r(!1),i=r(""),m=r([]),l=r(null),k=()=>{h.go(-1)},_=async()=>{try{c.value=!0,i.value="";const e=await(await fetch(`${g.API_BASE_URL}/wallets/get_supported_chains/`)).json();if(e.state==="success")m.value=e.data||[];else throw new Error(e.message||"Failed to load supported chains")}catch(o){i.value=o instanceof Error?o.message:"Failed to load chains",console.error("Failed to load supported chains:",o)}finally{c.value=!1}},C=o=>{l.value=o},w=async()=>{if(l.value)try{d.value=!0;const e=await(await fetch(`${g.API_BASE_URL}/wallets/select_chain/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_id:y.deviceId,chain:l.value.chain})})).json();if(e.state==="success")console.log("Chain selected successfully:",e.data),console.log("Generated mnemonic:",e.data.mnemonic),sessionStorage.setItem("generated_mnemonic",e.data.mnemonic),sessionStorage.setItem("selected_chain",l.value.chain),h.push("/verify-mnemonic");else throw new Error(e.message||"Failed to select chain")}catch(o){i.value=o instanceof Error?o.message:"Failed to select chain",console.error("Failed to select chain:",o)}finally{d.value=!1}};return A(()=>{_()}),(o,e)=>(a(),t("div",P,[s("div",{class:"header"},[s("button",{class:"back-btn",onClick:k},e[0]||(e[0]=[s("i",{class:"ri-arrow-left-line"},null,-1)])),e[1]||(e[1]=s("h1",null,"Select Blockchain",-1)),e[2]||(e[2]=s("div",{class:"placeholder"},null,-1))]),s("div",N,[e[9]||(e[9]=s("div",{class:"description"},[s("p",null,"Choose the blockchain network for your new wallet")],-1)),c.value?u("",!0):(a(),t("div",x,[(a(!0),t(B,null,E(m.value,n=>(a(),t("div",{key:n.chain,class:f(["chain-card",{active:l.value?.chain===n.chain}]),onClick:Q=>C(n)},[e[4]||(e[4]=s("div",{class:"card-background"},null,-1)),s("div",R,[s("div",T,[n.logo?(a(),t("img",{key:0,src:n.logo,alt:n.name},null,8,j)):(a(),t("div",G,v((n.chain||n.name||"C").charAt(0).toUpperCase()),1)),e[3]||(e[3]=s("div",{class:"icon-glow"},null,-1))]),s("div",O,[s("h3",null,v(n.name),1),s("p",null,v(n.chain),1)]),s("div",U,[s("div",{class:f(["radio-circle",{selected:l.value?.chain===n.chain}])},[l.value?.chain===n.chain?(a(),t("i",V)):u("",!0)],2)])]),e[5]||(e[5]=s("div",{class:"card-decoration"},[s("div",{class:"decoration-circle"}),s("div",{class:"decoration-line"})],-1))],10,L))),128))])),c.value?(a(),t("div",$,e[6]||(e[6]=[s("div",{class:"loading-spinner"},null,-1),s("p",null,"Loading supported chains...",-1)]))):u("",!0),i.value?(a(),t("div",J,[e[8]||(e[8]=s("div",{class:"error-icon"},[s("i",{class:"ri-error-warning-line"})],-1)),s("p",null,v(i.value),1),s("button",{class:"retry-btn",onClick:_},e[7]||(e[7]=[s("i",{class:"ri-refresh-line"},null,-1),p(" Retry ")]))])):u("",!0)]),s("div",M,[s("button",{class:"continue-btn",disabled:!l.value||d.value,onClick:w},[d.value?(a(),t("span",D,e[10]||(e[10]=[s("i",{class:"ri-loader-4-line animate-spin"},null,-1),p(" Processing... ")]))):(a(),t("span",q,e[11]||(e[11]=[p(" Continue "),s("i",{class:"ri-arrow-right-line"},null,-1)])))],8,z)])]))}}),se=I(H,[["__scopeId","data-v-eed4a771"]]);export{se as default};
