import{d as V,u as z,r as o,c as p,e as r,i as s,G as v,h as B,K as D,C as g,A as C,M as k,n as d,N as $,J as x,f as l}from"./auth-DRfzTYJF.js";import{_ as F,u as G}from"./preload-helper-DW6y3PHv.js";import{A as K}from"./chrome-mock-0jeXDaAI.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"setup-password-page"},U={class:"header-section"},W={class:"app-name"},Z={class:"form-section"},J={class:"input-group"},O={class:"input-wrapper"},j=["type"],q={key:0,class:"error-message"},H={class:"input-group"},L={class:"input-wrapper"},Q=["type"],X={key:0,class:"error-message"},Y={key:0,class:"password-strength"},ss={class:"strength-bar"},es=["disabled"],ts={key:0,class:"loading-spinner"},as={key:1},os={key:1,class:"error-message global-error"},rs=V({__name:"SetupPassword",setup(ls){const A=G(),y=z(),a=o(""),n=o(""),w=o(!1),f=o(!1),i=o(""),u=o(""),m=o(!1),h=o(""),_=p(()=>{const t=a.value;let e=0;return t.length>=8&&(e+=1),t.length>=12&&(e+=1),/[a-z]/.test(t)&&(e+=1),/[A-Z]/.test(t)&&(e+=1),/[0-9]/.test(t)&&(e+=1),/[^A-Za-z0-9]/.test(t)&&(e+=1),e}),P=p(()=>{const t=_.value;return t<=2?"weak":t<=4?"medium":"strong"}),E=p(()=>{const t=_.value;return`${Math.min(t*16.67,100)}%`}),M=p(()=>{const t=_.value;return t<=2?"Weak":t<=4?"Medium":"Strong"}),b=p(()=>a.value.length>=8&&a.value===n.value&&!i.value&&!u.value),N=()=>{i.value="",a.value.length>0&&a.value.length<8&&(i.value="Password must be at least 8 characters long"),n.value&&S()},S=()=>{u.value="",n.value&&n.value!==a.value&&(u.value="Passwords do not match")},I=async()=>{if(b.value)try{m.value=!0,h.value="",await y.setPaymentPassword(a.value),await y.setPasswordSession(),A.push("/wallet-choice")}catch(t){h.value=t instanceof Error?t.message:"Failed to set password"}finally{m.value=!1}};return(t,e)=>(l(),r("div",T,[s("div",U,[e[4]||(e[4]=s("div",{class:"logo-container"},[s("img",{src:F,alt:"Riftwallet",class:"logo"})],-1)),s("h1",W,v(B(K).NAME),1),e[5]||(e[5]=s("p",{class:"welcome-text"},"Create a secure password to protect your wallet",-1))]),s("div",Z,[s("form",{onSubmit:D(I,["prevent"]),class:"password-form"},[s("div",J,[e[6]||(e[6]=s("label",{for:"password"},"Password",-1)),s("div",O,[C(s("input",{id:"password","onUpdate:modelValue":e[0]||(e[0]=c=>a.value=c),type:w.value?"text":"password",placeholder:"Enter your password (min 8 characters)",class:d(["password-input",{error:i.value}]),onInput:N},null,42,j),[[k,a.value]]),s("button",{type:"button",onClick:e[1]||(e[1]=c=>w.value=!w.value),class:"toggle-password"},[s("i",{class:d(w.value?"ri-eye-off-line":"ri-eye-line")},null,2)])]),i.value?(l(),r("div",q,v(i.value),1)):g("",!0)]),s("div",H,[e[7]||(e[7]=s("label",{for:"confirmPassword"},"Confirm Password",-1)),s("div",L,[C(s("input",{id:"confirmPassword","onUpdate:modelValue":e[2]||(e[2]=c=>n.value=c),type:f.value?"text":"password",placeholder:"Confirm your password",class:d(["password-input",{error:u.value}]),onInput:S},null,42,Q),[[k,n.value]]),s("button",{type:"button",onClick:e[3]||(e[3]=c=>f.value=!f.value),class:"toggle-password"},[s("i",{class:d(f.value?"ri-eye-off-line":"ri-eye-line")},null,2)])]),u.value?(l(),r("div",X,v(u.value),1)):g("",!0)]),a.value?(l(),r("div",Y,[s("div",ss,[s("div",{class:d(["strength-fill",P.value]),style:$({width:E.value})},null,6)]),s("div",{class:d(["strength-text",P.value])},v(M.value),3)])):g("",!0),s("button",{type:"submit",disabled:!b.value||m.value,class:"submit-btn"},[m.value?(l(),r("div",ts)):(l(),r("span",as,"Create Password"))],8,es),h.value?(l(),r("div",os,v(h.value),1)):g("",!0)],32)]),e[8]||(e[8]=s("div",{class:"footer-info"},[s("p",null,[s("i",{class:"ri-shield-check-line"}),x(" Password protects all transactions")]),s("p",{class:"critical-warning"},[s("i",{class:"ri-alert-line"}),x(" If you forget your password, it cannot be recovered. Keep it safe!")])],-1))]))}}),cs=R(rs,[["__scopeId","data-v-2ed67853"]]);export{cs as default};
