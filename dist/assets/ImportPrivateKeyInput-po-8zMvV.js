import{d as D,r as n,c as E,o as B,g as A,F as C,f as l,i as e,e as r,C as d,G as i,A as b,E as $,n as p,H as N,I as F,L as V,J}from"./auth-DQh_hvla.js";import{a as M,u as O}from"./preload-helper-gab_YaoT.js";import{R}from"./ResponsiveLayout-DxLVppIv.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chrome-mock-wjw8bMAV.js";const W={class:"form-content"},z={key:0,class:"selected-chain"},H={class:"chain-display"},T=["src","alt"],q={key:1,class:"chain-placeholder"},G={class:"chain-details"},Z={class:"form-group"},j={class:"form-hint"},Q={class:"private-key-input-container"},X={key:0,class:"error-message"},Y={key:1,class:"form-group"},ee={class:"chain-selector-container"},ae={class:"selected-chain-id"},se={class:"chain-id-info"},te={class:"chain-id-label"},oe={class:"chain-id-desc"},le={key:0,class:"chain-dropdown"},re=["onClick"],ie={class:"chain-info"},ne={class:"chain-label"},ce={class:"chain-desc"},de={key:0,class:"ri-check-line"},ue={class:"form-group"},ve={class:"password-input-container"},pe=["type"],he={key:0,class:"error-message"},me={key:2,class:"error-alert"},ye={class:"bottom-section"},fe=["disabled"],ke={key:0,class:"ri-loader-4-line spinning"},_e={key:1,class:"ri-key-line"},ge=D({__name:"ImportPrivateKeyInput",setup(we){const k=O();M();const t=n(null),h=n(""),m=n(""),u=n("0"),g=n(!1),_=n(!1),y=n(!1),w=n(!1),c=n(""),v=n(""),f=n(""),P=E(()=>h.value.trim()&&m.value.trim()&&t.value),I=()=>{k.go(-1)},x=s=>{u.value=s,y.value=!1},K=()=>{const s=h.value.trim().replace(/^0x/,"");if(t.value?.chain==="SOL"){if(!/^[1-9A-HJ-NP-Za-km-z]{87,88}$/.test(s)&&!/^[a-fA-F0-9]{64}$/.test(s))return v.value="Solana private key must be Base58 encoded (87-88 characters) or 64-character hexadecimal string",!1}else if(!/^[a-fA-F0-9]{64}$/.test(s))return v.value="Private key must be a 64-character hexadecimal string",!1;return v.value="",!0},S=()=>m.value.length<8?(f.value="Password must be at least 8 characters",!1):(f.value="",!0),L=async()=>{if(!(!K()||!S()))try{c.value="";const s={private_key:h.value.trim().replace(/^0x/,""),chain:t.value.chain,payment_password:m.value,kadena_chain_id:t.value.chain==="KDA"?u.value:"0"};console.log("Starting wallet import with data:",s),console.log("Redirecting to loading page for wallet import and balance refresh"),await k.push({name:"WalletImportLoading",query:{importData:JSON.stringify(s)}})}catch(s){const a=s instanceof Error?s.message:"Import failed";a.toLowerCase().includes("password")?c.value="Incorrect password. Please check your payment password.":a.toLowerCase().includes("invalid")&&a.toLowerCase().includes("private key")?c.value="Invalid private key. Please check your private key format.":a.toLowerCase().includes("private key")?c.value="Invalid private key. Please check if the private key is correct.":c.value=a,console.error("Import private key error:",s)}};return B(()=>{const s=sessionStorage.getItem("import_selected_chain");if(s)try{t.value=JSON.parse(s)}catch(a){console.error("Failed to parse selected chain:",a),k.push("/select-chain?mode=import-private-key")}else k.push("/select-chain?mode=import-private-key")}),(s,a)=>(l(),A(R,{title:"Import Private Key","show-header":!0,"show-footer":!0,scrollable:!0,padding:"16px",onBack:I},{header:C(()=>[e("div",{class:"page-header"},[e("div",{class:"header-left"},[e("button",{onClick:I,class:"back-button"},a[5]||(a[5]=[e("i",{class:"ri-arrow-left-line"},null,-1)])),a[6]||(a[6]=e("h1",{class:"header-title"},"Import Private Key",-1))])])]),footer:C(()=>[e("div",ye,[e("button",{class:"import-btn",disabled:!P.value||w.value,onClick:L},[w.value?(l(),r("i",ke)):(l(),r("i",_e)),J(" "+i(w.value?"Importing...":"Import Wallet"),1)],8,fe)])]),default:C(()=>[e("div",W,[t.value?(l(),r("div",z,[e("div",H,[t.value.logo?(l(),r("img",{key:0,src:t.value.logo,alt:t.value.name,class:"chain-logo"},null,8,T)):(l(),r("div",q,i(t.value.chain.charAt(0).toUpperCase()),1)),e("div",G,[e("h3",null,i(t.value.name),1),e("p",null,i(t.value.chain),1)])])])):d("",!0),e("div",Z,[a[7]||(a[7]=e("label",null,"Private Key",-1)),e("p",j,i(t.value?.chain==="SOL"?"Enter your private key (Base58 encoded or 64-character hexadecimal string)":"Enter your private key (64-character hexadecimal string)"),1),e("div",Q,[b(e("textarea",{"onUpdate:modelValue":a[0]||(a[0]=o=>h.value=o),class:p(["private-key-input",{error:v.value}]),placeholder:"Enter your private key...",rows:"3"},null,2),[[$,h.value]]),e("button",{type:"button",class:"private-key-toggle",onClick:a[1]||(a[1]=o=>g.value=!g.value)},[e("i",{class:p(g.value?"ri-eye-off-line":"ri-eye-line")},null,2)])]),v.value?(l(),r("div",X,i(v.value),1)):d("",!0)]),t.value?.chain==="KDA"?(l(),r("div",Y,[a[10]||(a[10]=e("label",null,"Kadena Chain ID",-1)),a[11]||(a[11]=e("p",{class:"form-hint"},"Select Kadena Chain ID (0-19)",-1)),e("div",ee,[e("div",{class:"chain-id-selector",onClick:a[2]||(a[2]=o=>y.value=!y.value)},[e("div",ae,[a[8]||(a[8]=e("div",{class:"chain-id-icon"},[e("i",{class:"ri-link"})],-1)),e("div",se,[e("div",te,"Chain "+i(u.value),1),e("div",oe,"Kadena Chain "+i(u.value),1)])]),e("i",{class:p(["ri-arrow-down-s-line dropdown-icon",{rotated:y.value}])},null,2)]),y.value?(l(),r("div",le,[(l(),r(N,null,F(20,o=>e("div",{key:o-1,onClick:Ce=>x((o-1).toString()),class:p(["chain-option",{selected:u.value===(o-1).toString()}])},[a[9]||(a[9]=e("div",{class:"chain-icon"},[e("i",{class:"ri-link"})],-1)),e("div",ie,[e("div",ne,"Chain "+i(o-1),1),e("div",ce,"Kadena Chain "+i(o-1),1)]),u.value===(o-1).toString()?(l(),r("i",de)):d("",!0)],10,re)),64))])):d("",!0)])])):d("",!0),e("div",ue,[a[12]||(a[12]=e("label",null,"Payment Password",-1)),a[13]||(a[13]=e("p",{class:"form-hint"},"Enter your payment password to protect the wallet",-1)),e("div",ve,[b(e("input",{"onUpdate:modelValue":a[3]||(a[3]=o=>m.value=o),type:_.value?"text":"password",class:p(["password-input",{error:f.value}]),placeholder:"Enter payment password"},null,10,pe),[[V,m.value]]),e("button",{type:"button",class:"password-toggle",onClick:a[4]||(a[4]=o=>_.value=!_.value)},[e("i",{class:p(_.value?"ri-eye-off-line":"ri-eye-line")},null,2)])]),f.value?(l(),r("div",he,i(f.value),1)):d("",!0)]),c.value?(l(),r("div",me,[a[14]||(a[14]=e("i",{class:"ri-error-warning-line"},null,-1)),e("span",null,i(c.value),1)])):d("",!0)])]),_:1}))}}),Se=U(ge,[["__scopeId","data-v-566f178c"]]);export{Se as default};
