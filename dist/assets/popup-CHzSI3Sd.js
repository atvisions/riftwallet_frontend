const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-CjTz-MUy.js","assets/auth-tCBxrB_D.js","assets/chrome-mock-BOlt1wEj.js","assets/index-CpkLCnFh.js","assets/auth-Bt6g8DFh.css","assets/preload-helper-IGrWFsVS.js","assets/WalletSelector-2vn644nH.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/WalletSelector-CEu2VhcX.css","assets/icon128-CuYnzOPO.js","assets/Home-j3aVZPpm.css","assets/main-CLDYsbqu.css","assets/WalletDetail-D74D7iSB.js","assets/WalletDetail-CXHNLa72.css","assets/Send-B9rNKlpy.js","assets/Send-CSshCdWd.css","assets/Receive-C7GFhZ7F.js","assets/Receive-mup-dnWy.css","assets/Swap-BNa6YvqO.js","assets/Swap-Xz8FZRHe.css","assets/History-WpBzA83H.js","assets/History-vWYom4Qc.css","assets/Settings-_EGPEcsF.js","assets/Settings-DtICUIHl.css","assets/ImportWallet-CC4dzDxP.js","assets/ResponsiveLayout-BQBtD7HK.js","assets/ResponsiveLayout-BtJrn_1a.css","assets/ImportWallet-DGKERUsL.css","assets/ImportMnemonic-DeYUURRT.js","assets/ImportMnemonic-C7q4Ky5i.css","assets/ImportMnemonicInput-CdnWC31d.js","assets/ImportMnemonicInput-BN9__Aa6.css","assets/ImportPrivateKey-C3nqQk03.js","assets/ImportPrivateKey-ayOek8AX.css","assets/ImportPrivateKeySelectChain-DTgYjKEE.js","assets/ImportPrivateKeySelectChain-BDj-0qIF.css","assets/ImportPrivateKeyInput-CKgEHM5A.js","assets/ImportPrivateKeyInput-CcKDr9Ww.css","assets/WalletImportLoading-KFGeTYWC.js","assets/WalletImportLoading-TKZgXiZf.css","assets/SetupPassword-DPa3yPDJ.js","assets/SetupPassword-Yy2yLFDT.css","assets/VerifyPassword-DapmzpfA.js","assets/VerifyPassword-ClnL1wAd.css","assets/WalletChoice-x17xSphq.js","assets/WalletChoice-BSbLac8J.css","assets/SelectChain-C6tUrJyX.js","assets/SelectChain-C6Tl82fs.css","assets/VerifyMnemonic-9oQ39AOs.js","assets/VerifyMnemonic-DRoe4BYx.css","assets/ConfirmMnemonic-mOX4pttA.js","assets/ConfirmMnemonic-BIN7E7iM.css","assets/CreateWalletPassword-CWioOJQF.js","assets/CreateWalletPassword-BljdwNBh.css"])))=>i.map(i=>d[i]);
import{u as l,d as g,o as v,w as f,a as P,r as S,c as u,b as _,e as E,f as y,g as p,h as A,i as I,j as R}from"./auth-tCBxrB_D.js";import{u as w,a as T,_ as e,c as V,b as D}from"./preload-helper-IGrWFsVS.js";import{_ as O}from"./icon128-CuYnzOPO.js";import{S as h,A as k}from"./index-CpkLCnFh.js";import{g as L}from"./chrome-mock-BOlt1wEj.js";/* empty css             */let c=null;function W(){c&&clearInterval(c),c=setInterval(async()=>{const i=l();await i.checkPasswordSession(),i.hasPaymentPassword&&!i.isPasswordSessionValid&&(console.log("Session expired during periodic check, redirecting to verify password"),await i.clearPasswordSession(),w().push("/verify-password"))},5*60*1e3),console.log("Session check started")}function C(){c&&(clearInterval(c),c=null,console.log("Session check stopped"))}async function M(){await l().setPasswordSession(),console.log("Session refreshed")}async function q(){try{const n=(await L().get([h.LAST_PASSWORD_TIME]))[h.LAST_PASSWORD_TIME];if(!n)return 0;const r=Date.now()-n,t=k.PASSWORD_SESSION_TIMEOUT-r;return Math.max(0,t)}catch(i){return console.error("Failed to get session remaining time:",i),0}}function x(){const i=["mousedown","mousemove","keypress","scroll","touchstart"];let s=Date.now();const n=async()=>{const o=Date.now();o-s>5*60*1e3&&l().isPasswordSessionValid&&await M(),s=o};i.forEach(o=>{document.addEventListener(o,n,!0)}),console.log("Activity-based session refresh enabled")}const b={id:"app",class:"wallet-app"},z={key:0,class:"loading-screen"},H=g({__name:"App",setup(i){const s=w(),n=T(),o=l();let r=!1;return v(async()=>{try{if(r){console.log("App already initialized, skipping");return}await o.initialize(),console.log("Auth state:",{needsPasswordSetup:o.needsPasswordSetup,hasPaymentPassword:o.hasPaymentPassword,canAccessWallet:o.canAccessWallet,isPasswordSessionValid:o.isPasswordSessionValid,currentRoute:s.currentRoute.value.path});const t=s.currentRoute.value.path;t==="/"||t==="/popup.html"?(console.log("Executing routing logic for path:",t),o.hasPaymentPassword?o.isPasswordSessionValid?(console.log("Password set and session valid, checking wallet status"),await n.loadWallets(),n.wallets.length>0?console.log("Has wallets, staying on home page"):(console.log("No wallets found, redirecting to wallet choice"),s.replace("/wallet-choice"))):(console.log("Password set but session expired, redirecting to verify password"),s.replace("/verify-password")):(console.log("No password set, redirecting to setup password"),s.replace("/setup-password"))):console.log("Skipping routing logic for non-root path:",t),o.hasPaymentPassword&&(W(),x()),r=!0,console.log("App initialization completed")}catch(t){console.error("Failed to initialize app:",t)}}),f(()=>s.currentRoute.value.path,async(t,a)=>{if(console.log("Route changed from",a,"to",t),a==="/verify-password"&&t==="/"){console.log("Skipping route logic after password verification");return}if(a==="/wallet-choice"&&t==="/"){console.log("Skipping route logic after wallet creation/import");return}if(["/import-wallet","/import-mnemonic","/import-private-key","/import-private-key-select-chain","/import-private-key-input","/wallet-import-loading"].includes(a)&&t==="/"){console.log("Skipping route logic after wallet import");return}t==="/"&&r&&o.hasPaymentPassword&&!o.isPasswordSessionValid&&(console.log("Session expired, redirecting to verify password"),s.push("/verify-password"))}),P(()=>{C()}),(t,a)=>{const d=S("router-view");return _(),u("div",b,[y(o).loading?(_(),u("div",z,a[0]||(a[0]=[p("div",{class:"loading-content"},[p("img",{src:O,alt:"Riftwallet",class:"loading-logo"}),p("div",{class:"loading-spinner"}),p("p",null,"Initializing Riftwallet...")],-1)]))):(_(),E(d,{key:1}))])}}}),N=[{path:"/",name:"Home",component:()=>e(()=>import("./Home-CjTz-MUy.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))},{path:"/wallet/:id",name:"WalletDetail",component:()=>e(()=>import("./WalletDetail-D74D7iSB.js"),__vite__mapDeps([12,5,1,2,3,4,7,13]))},{path:"/send",name:"Send",component:()=>e(()=>import("./Send-B9rNKlpy.js"),__vite__mapDeps([14,1,2,3,4,5,7,15]))},{path:"/receive",name:"Receive",component:()=>e(()=>import("./Receive-C7GFhZ7F.js"),__vite__mapDeps([16,5,1,2,3,4,7,17]))},{path:"/swap",name:"Swap",component:()=>e(()=>import("./Swap-BNa6YvqO.js"),__vite__mapDeps([18,1,2,3,4,7,19]))},{path:"/history",name:"History",component:()=>e(()=>import("./History-WpBzA83H.js"),__vite__mapDeps([20,1,2,3,4,7,21]))},{path:"/settings",name:"Settings",component:()=>e(()=>import("./Settings-_EGPEcsF.js"),__vite__mapDeps([22,1,2,3,4,7,23]))},{path:"/import-wallet",name:"ImportWallet",component:()=>e(()=>import("./ImportWallet-CC4dzDxP.js"),__vite__mapDeps([24,5,1,2,3,4,25,7,26,27]))},{path:"/import-mnemonic",name:"ImportMnemonic",component:()=>e(()=>import("./ImportMnemonic-DeYUURRT.js"),__vite__mapDeps([28,1,2,3,4,5,7,29]))},{path:"/import-mnemonic-input",name:"ImportMnemonicInput",component:()=>e(()=>import("./ImportMnemonicInput-CdnWC31d.js"),__vite__mapDeps([30,1,2,3,4,5,7,31]))},{path:"/import-private-key",name:"ImportPrivateKey",component:()=>e(()=>import("./ImportPrivateKey-C3nqQk03.js"),__vite__mapDeps([32,1,2,3,4,5,7,33]))},{path:"/import-private-key-select-chain",name:"ImportPrivateKeySelectChain",component:()=>e(()=>import("./ImportPrivateKeySelectChain-DTgYjKEE.js"),__vite__mapDeps([34,5,1,2,3,4,7,35]))},{path:"/import-private-key-input",name:"ImportPrivateKeyInput",component:()=>e(()=>import("./ImportPrivateKeyInput-CKgEHM5A.js"),__vite__mapDeps([36,1,2,3,4,5,25,7,26,37]))},{path:"/wallet-import-loading",name:"WalletImportLoading",component:()=>e(()=>import("./WalletImportLoading-KFGeTYWC.js"),__vite__mapDeps([38,5,1,2,3,4,7,39]))},{path:"/setup-password",name:"SetupPassword",component:()=>e(()=>import("./SetupPassword-DPa3yPDJ.js"),__vite__mapDeps([40,1,2,3,4,9,5,7,41]))},{path:"/verify-password",name:"VerifyPassword",component:()=>e(()=>import("./VerifyPassword-DapmzpfA.js"),__vite__mapDeps([42,1,2,3,4,9,5,7,43]))},{path:"/wallet-choice",name:"WalletChoice",component:()=>e(()=>import("./WalletChoice-x17xSphq.js"),__vite__mapDeps([44,5,1,2,3,4,25,7,26,45]))},{path:"/select-chain",name:"SelectChain",component:()=>e(()=>import("./SelectChain-C6tUrJyX.js"),__vite__mapDeps([46,5,1,2,3,4,7,47]))},{path:"/verify-mnemonic",name:"VerifyMnemonic",component:()=>e(()=>import("./VerifyMnemonic-9oQ39AOs.js"),__vite__mapDeps([48,5,1,2,3,4,25,7,26,49]))},{path:"/confirm-mnemonic",name:"ConfirmMnemonic",component:()=>e(()=>import("./ConfirmMnemonic-mOX4pttA.js"),__vite__mapDeps([50,1,2,3,4,5,25,7,26,51]))},{path:"/create-wallet-password",name:"CreateWalletPassword",component:()=>e(()=>import("./CreateWalletPassword-CWioOJQF.js"),__vite__mapDeps([52,1,2,3,4,5,7,53]))}],B=V({history:D(),routes:N}),m=A(H);m.use(I());m.use(B);m.use(R);m.mount("#app");export{q as g};
