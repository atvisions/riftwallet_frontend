import{d as N,u as g,r as u,o as y,e as r,m as A,i as a,C as p,G as n,h as I,K as E,A as b,E as R,J as S,f as i}from"./auth-DA2mZ09H.js";import{a as W,e as C,u as P}from"./preload-helper-DTCqTb4O.js";import{P as k}from"./PageHeader-bQKhRC2E.js";import{C as x,h as T,A as D,j as O}from"./chrome-mock-BbAbqiJG.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";const B={class:"rename-wallet-page"},F={class:"content"},M={key:0,class:"wallet-preview"},j={class:"wallet-avatar"},G=["src","alt"],L={class:"wallet-info"},$={class:"wallet-address"},H={class:"wallet-chain"},J={class:"form-group"},U=["disabled"],q={class:"char-count"},K={key:0,class:"error-message"},z=["disabled"],Q={key:0,class:"loading-spinner"},X={key:1,class:"ri-edit-line"},Y="/icons/icon128.png",Z=N({__name:"RenameWallet",setup(ee){const h=C(),m=P(),v=W(),_=g(),e=u(null),s=u(""),o=u(!1),d=u(""),f=t=>x[t]?.name||t,w=async()=>{if(!(!e.value||!s.value.trim())){o.value=!0,d.value="";try{if(!_.deviceId)throw new Error("Device ID not found");const t=await fetch(`${D.API_BASE_URL}${O.RENAME_WALLET(e.value.id)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_id:_.deviceId,new_name:s.value.trim()})}),l=await t.json();if(!t.ok)throw new Error(l.message||"Failed to rename wallet");const c={...e.value,name:s.value.trim()};v.updateWallet(c),m.push(`/wallet/${e.value.id}`)}catch(t){d.value=t instanceof Error?t.message:"Failed to rename wallet"}finally{o.value=!1}}};return y(()=>{const t=parseInt(h.params.id);e.value=v.wallets.find(l=>l.id===t)||null,e.value?s.value=e.value.name:m.push("/")}),(t,l)=>(i(),r("div",B,[A(k,{title:"Rename Wallet"}),a("div",F,[e.value?(i(),r("div",M,[a("div",j,[a("img",{src:e.value.avatar||Y,alt:e.value.name},null,8,G)]),a("div",L,[a("h3",null,n(e.value.name),1),a("p",$,n(I(T)(e.value.address)),1),a("p",H,n(f(e.value.chain)),1)])])):p("",!0),a("form",{onSubmit:E(w,["prevent"]),class:"rename-form"},[a("div",J,[l[1]||(l[1]=a("label",{for:"newName"},"New Wallet Name",-1)),b(a("input",{id:"newName","onUpdate:modelValue":l[0]||(l[0]=c=>s.value=c),type:"text",placeholder:"Enter new wallet name",disabled:o.value,maxlength:"50",required:""},null,8,U),[[R,s.value]]),a("div",q,n(s.value.length)+"/50",1)]),d.value?(i(),r("div",K,n(d.value),1)):p("",!0),a("button",{type:"submit",class:"rename-btn",disabled:o.value||!s.value.trim()||s.value.trim()===e.value?.name},[o.value?(i(),r("div",Q)):(i(),r("i",X)),S(" "+n(o.value?"Renaming...":"Rename Wallet"),1)],8,z)],32)])]))}}),ne=V(Z,[["__scopeId","data-v-d2e68127"]]);export{ne as default};
