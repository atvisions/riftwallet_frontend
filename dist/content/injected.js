var l=Object.defineProperty;var u=(r,e,t)=>e in r?l(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var i=(r,e,t)=>u(r,typeof e!="symbol"?e+"":e,t);class c{constructor(){i(this,"isRiftwallet",!0);i(this,"selectedAddress",null);i(this,"chainId",null);i(this,"networkVersion",null);i(this,"eventListeners",{});i(this,"requestId",0);i(this,"pendingRequests",{});window.addEventListener("message",e=>{if(e.source!==window||!e.data||e.data.source!=="cocowallet-content")return;const{id:t,response:s,error:n}=e.data,o=this.pendingRequests[t];o&&(delete this.pendingRequests[t],n?o.reject(new Error(n)):o.resolve(s.data))}),console.log("Riftwallet Provider initialized")}isConnected(){return this.selectedAddress!==null}async request(e){console.log("Riftwallet Provider request:",e.method,e.params);const t=++this.requestId;return new Promise((s,n)=>{this.pendingRequests[t]={resolve:s,reject:n},window.postMessage({source:"cocowallet-injected",id:t,method:e.method,params:e.params||[]},"*"),setTimeout(()=>{this.pendingRequests[t]&&(delete this.pendingRequests[t],n(new Error("Request timeout")))},3e4)})}on(e,t){this.eventListeners[e]||(this.eventListeners[e]=[]),this.eventListeners[e].push(t)}removeListener(e,t){if(this.eventListeners[e]){const s=this.eventListeners[e].indexOf(t);s>-1&&this.eventListeners[e].splice(s,1)}}emit(e,...t){this.eventListeners[e]&&this.eventListeners[e].forEach(s=>{try{s(...t)}catch(n){console.error("Error in event handler:",n)}})}enable(){return this.request({method:"eth_requestAccounts"})}send(e,t){return this.request({method:e,params:t})}sendAsync(e,t){this.request({method:e.method,params:e.params}).then(s=>t(null,{id:e.id,jsonrpc:"2.0",result:s})).catch(s=>t(s,null))}}const d=new c;window.ethereum||(window.ethereum=d,window.dispatchEvent(new Event("ethereum#initialized")));window.riftwallet=d;typeof window.web3>"u"&&(window.web3={currentProvider:d,eth:{defaultAccount:d.selectedAddress}});window.dispatchEvent(new CustomEvent("riftwalletReady",{detail:{provider:d,isRiftwallet:!0}}));console.log("Riftwallet Provider injected successfully");
